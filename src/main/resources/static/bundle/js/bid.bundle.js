var XS=Object.defineProperty;var KS=(e,t,i)=>t in e?XS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var _=(e,t,i)=>(KS(e,typeof t!="symbol"?t+"":t,i),i),hh=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)};var K=(e,t,i)=>(hh(e,t,"read from private field"),i?i.call(e):t.get(e)),tt=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},Ee=(e,t,i,n)=>(hh(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i);var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xg={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=Symbol.for("react.transitional.element"),ZS=Symbol.for("react.fragment");function Kg(e,t,i){var n=null;if(i!==void 0&&(n=""+i),t.key!==void 0&&(n=""+t.key),"key"in t){i={};for(var a in t)a!=="key"&&(i[a]=t[a])}else i=t;return t=i.ref,{$$typeof:FS,type:e,key:n,ref:t!==void 0?t:null,props:i}}il.Fragment=ZS;il.jsx=Kg;il.jsxs=Kg;Xg.exports=il;var Fg=Xg.exports;const It=Fg.jsx,fs=Fg.jsxs;var Zg={exports:{}},Z={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=Symbol.for("react.transitional.element"),JS=Symbol.for("react.portal"),WS=Symbol.for("react.fragment"),eb=Symbol.for("react.strict_mode"),tb=Symbol.for("react.profiler"),ib=Symbol.for("react.consumer"),nb=Symbol.for("react.context"),ab=Symbol.for("react.forward_ref"),sb=Symbol.for("react.suspense"),rb=Symbol.for("react.memo"),Jg=Symbol.for("react.lazy"),mh=Symbol.iterator;function cb(e){return e===null||typeof e!="object"?null:(e=mh&&e[mh]||e["@@iterator"],typeof e=="function"?e:null)}var Wg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e_=Object.assign,t_={};function Us(e,t,i){this.props=e,this.context=t,this.refs=t_,this.updater=i||Wg}Us.prototype.isReactComponent={};Us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i_(){}i_.prototype=Us.prototype;function ff(e,t,i){this.props=e,this.context=t,this.refs=t_,this.updater=i||Wg}var pf=ff.prototype=new i_;pf.constructor=ff;e_(pf,Us.prototype);pf.isPureReactComponent=!0;var gh=Array.isArray,Me={H:null,A:null,T:null,S:null,V:null},n_=Object.prototype.hasOwnProperty;function hf(e,t,i,n,a,s){return i=s.ref,{$$typeof:uf,type:e,key:t,ref:i!==void 0?i:null,props:s}}function ob(e,t){return hf(e.type,t,void 0,void 0,void 0,e.props)}function mf(e){return typeof e=="object"&&e!==null&&e.$$typeof===uf}function lb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var _h=/\/+/g;function rd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lb(""+e.key):t.toString(36)}function vh(){}function db(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(vh,vh):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ka(e,t,i,n,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case uf:case JS:r=!0;break;case Jg:return r=e._init,Ka(r(e._payload),t,i,n,a)}}if(r)return a=a(e),r=n===""?"."+rd(e,0):n,gh(a)?(i="",r!=null&&(i=r.replace(_h,"$&/")+"/"),Ka(a,t,i,"",function(l){return l})):a!=null&&(mf(a)&&(a=ob(a,i+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(_h,"$&/")+"/")+r)),t.push(a)),1;r=0;var c=n===""?".":n+":";if(gh(e))for(var o=0;o<e.length;o++)n=e[o],s=c+rd(n,o),r+=Ka(n,t,i,s,a);else if(o=cb(e),typeof o=="function")for(e=o.call(e),o=0;!(n=e.next()).done;)n=n.value,s=c+rd(n,o++),r+=Ka(n,t,i,s,a);else if(s==="object"){if(typeof e.then=="function")return Ka(db(e),t,i,n,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Mc(e,t,i){if(e==null)return e;var n=[],a=0;return Ka(e,n,"","",function(s){return t.call(i,s,a++)}),n}function ub(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function fb(){}Z.Children={map:Mc,forEach:function(e,t,i){Mc(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Mc(e,function(){t++}),t},toArray:function(e){return Mc(e,function(t){return t})||[]},only:function(e){if(!mf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Us;Z.Fragment=WS;Z.Profiler=tb;Z.PureComponent=ff;Z.StrictMode=eb;Z.Suspense=sb;Z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Me;Z.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Me.H.useMemoCache(e)}};Z.cache=function(e){return function(){return e.apply(null,arguments)}};Z.cloneElement=function(e,t,i){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=e_({},e.props),a=e.key,s=void 0;if(t!=null)for(r in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(a=""+t.key),t)!n_.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(n[r]=t[r]);var r=arguments.length-2;if(r===1)n.children=i;else if(1<r){for(var c=Array(r),o=0;o<r;o++)c[o]=arguments[o+2];n.children=c}return hf(e.type,a,void 0,void 0,s,n)};Z.createContext=function(e){return e={$$typeof:nb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:ib,_context:e},e};Z.createElement=function(e,t,i){var n,a={},s=null;if(t!=null)for(n in t.key!==void 0&&(s=""+t.key),t)n_.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(a[n]=t[n]);var r=arguments.length-2;if(r===1)a.children=i;else if(1<r){for(var c=Array(r),o=0;o<r;o++)c[o]=arguments[o+2];a.children=c}if(e&&e.defaultProps)for(n in r=e.defaultProps,r)a[n]===void 0&&(a[n]=r[n]);return hf(e,s,void 0,void 0,null,a)};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:ab,render:e}};Z.isValidElement=mf;Z.lazy=function(e){return{$$typeof:Jg,_payload:{_status:-1,_result:e},_init:ub}};Z.memo=function(e,t){return{$$typeof:rb,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=Me.T,i={};Me.T=i;try{var n=e(),a=Me.S;a!==null&&a(i,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(fb,yh)}catch(s){yh(s)}finally{Me.T=t}};Z.unstable_useCacheRefresh=function(){return Me.H.useCacheRefresh()};Z.use=function(e){return Me.H.use(e)};Z.useActionState=function(e,t,i){return Me.H.useActionState(e,t,i)};Z.useCallback=function(e,t){return Me.H.useCallback(e,t)};Z.useContext=function(e){return Me.H.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e,t){return Me.H.useDeferredValue(e,t)};Z.useEffect=function(e,t,i){var n=Me.H;if(typeof i=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)};Z.useId=function(){return Me.H.useId()};Z.useImperativeHandle=function(e,t,i){return Me.H.useImperativeHandle(e,t,i)};Z.useInsertionEffect=function(e,t){return Me.H.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return Me.H.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Me.H.useMemo(e,t)};Z.useOptimistic=function(e,t){return Me.H.useOptimistic(e,t)};Z.useReducer=function(e,t,i){return Me.H.useReducer(e,t,i)};Z.useRef=function(e){return Me.H.useRef(e)};Z.useState=function(e){return Me.H.useState(e)};Z.useSyncExternalStore=function(e,t,i){return Me.H.useSyncExternalStore(e,t,i)};Z.useTransition=function(){return Me.H.useTransition()};Z.version="19.1.0";Zg.exports=Z;var Ae=Zg.exports,a_={exports:{}},nl={},s_={exports:{}},r_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,k){var j=D.length;D.push(k);e:for(;0<j;){var re=j-1>>>1,Ce=D[re];if(0<a(Ce,k))D[re]=k,D[j]=Ce,j=re;else break e}}function i(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var k=D[0],j=D.pop();if(j!==k){D[0]=j;e:for(var re=0,Ce=D.length,Jt=Ce>>>1;re<Jt;){var Wi=2*(re+1)-1,en=D[Wi],ot=Wi+1,wa=D[ot];if(0>a(en,j))ot<Ce&&0>a(wa,en)?(D[re]=wa,D[ot]=j,re=ot):(D[re]=en,D[Wi]=j,re=Wi);else if(ot<Ce&&0>a(wa,j))D[re]=wa,D[ot]=j,re=ot;else break e}}return k}function a(D,k){var j=D.sortIndex-k.sortIndex;return j!==0?j:D.id-k.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,c=r.now();e.unstable_now=function(){return r.now()-c}}var o=[],l=[],u=1,d=null,f=3,p=!1,y=!1,b=!1,w=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;function g(D){for(var k=i(l);k!==null;){if(k.callback===null)n(l);else if(k.startTime<=D)n(l),k.sortIndex=k.expirationTime,t(o,k);else break;k=i(l)}}function S(D){if(b=!1,g(D),!y)if(i(o)!==null)y=!0,R||(R=!0,M());else{var k=i(l);k!==null&&X(S,k.startTime-D)}}var R=!1,x=-1,O=5,T=-1;function U(){return w?!0:!(e.unstable_now()-T<O)}function L(){if(w=!1,R){var D=e.unstable_now();T=D;var k=!0;try{e:{y=!1,b&&(b=!1,v(x),x=-1),p=!0;var j=f;try{t:{for(g(D),d=i(o);d!==null&&!(d.expirationTime>D&&U());){var re=d.callback;if(typeof re=="function"){d.callback=null,f=d.priorityLevel;var Ce=re(d.expirationTime<=D);if(D=e.unstable_now(),typeof Ce=="function"){d.callback=Ce,g(D),k=!0;break t}d===i(o)&&n(o),g(D)}else n(o);d=i(o)}if(d!==null)k=!0;else{var Jt=i(l);Jt!==null&&X(S,Jt.startTime-D),k=!1}}break e}finally{d=null,f=j,p=!1}k=void 0}}finally{k?M():R=!1}}}var M;if(typeof h=="function")M=function(){h(L)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ee=q.port2;q.port1.onmessage=L,M=function(){ee.postMessage(null)}}else M=function(){m(L,0)};function X(D,k){x=m(function(){D(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var j=f;f=k;try{return D()}finally{f=j}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(D,k){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=f;f=D;try{return k()}finally{f=j}},e.unstable_scheduleCallback=function(D,k,j){var re=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?re+j:re):j=re,D){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=j+Ce,D={id:u++,callback:k,priorityLevel:D,startTime:j,expirationTime:Ce,sortIndex:-1},j>re?(D.sortIndex=j,t(l,D),i(o)===null&&D===i(l)&&(b?(v(x),x=-1):b=!0,X(S,j-re))):(D.sortIndex=Ce,t(o,D),y||p||(y=!0,R||(R=!0,M()))),D},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(D){var k=f;return function(){var j=f;f=k;try{return D.apply(this,arguments)}finally{f=j}}}})(r_);s_.exports=r_;var pb=s_.exports,c_={exports:{}},St={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=Ae;function o_(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rn(){}var yt={d:{f:rn,r:function(){throw Error(o_(522))},D:rn,C:rn,L:rn,m:rn,X:rn,S:rn,M:rn},p:0,findDOMNode:null},mb=Symbol.for("react.portal");function gb(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mb,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}var Rr=hb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function al(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=yt;St.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(o_(299));return gb(e,t,null,i)};St.flushSync=function(e){var t=Rr.T,i=yt.p;try{if(Rr.T=null,yt.p=2,e)return e()}finally{Rr.T=t,yt.p=i,yt.d.f()}};St.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,yt.d.C(e,t))};St.prefetchDNS=function(e){typeof e=="string"&&yt.d.D(e)};St.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var i=t.as,n=al(i,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;i==="style"?yt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):i==="script"&&yt.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};St.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var i=al(t.as,t.crossOrigin);yt.d.M(e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&yt.d.M(e)};St.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var i=t.as,n=al(i,t.crossOrigin);yt.d.L(e,i,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};St.preloadModule=function(e,t){if(typeof e=="string")if(t){var i=al(t.as,t.crossOrigin);yt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else yt.d.m(e)};St.requestFormReset=function(e){yt.d.r(e)};St.unstable_batchedUpdates=function(e,t){return e(t)};St.useFormState=function(e,t,i){return Rr.H.useFormState(e,t,i)};St.useFormStatus=function(){return Rr.H.useHostTransitionStatus()};St.version="19.1.0";function l_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l_)}catch(e){console.error(e)}}l_(),c_.exports=St;var _b=c_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=pb,d_=Ae,vb=_b;function E(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function f_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sh(e){if(Wr(e)!==e)throw Error(E(188))}function yb(e){var t=e.alternate;if(!t){if(t=Wr(e),t===null)throw Error(E(188));return t!==e?null:e}for(var i=e,n=t;;){var a=i.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){i=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===i)return Sh(a),e;if(s===n)return Sh(a),t;s=s.sibling}throw Error(E(188))}if(i.return!==n.return)i=a,n=s;else{for(var r=!1,c=a.child;c;){if(c===i){r=!0,i=a,n=s;break}if(c===n){r=!0,n=a,i=s;break}c=c.sibling}if(!r){for(c=s.child;c;){if(c===i){r=!0,i=s,n=a;break}if(c===n){r=!0,n=s,i=a;break}c=c.sibling}if(!r)throw Error(E(189))}}if(i.alternate!==n)throw Error(E(190))}if(i.tag!==3)throw Error(E(188));return i.stateNode.current===i?e:t}function p_(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p_(e),t!==null)return t;e=e.sibling}return null}var De=Object.assign,Sb=Symbol.for("react.element"),Lc=Symbol.for("react.transitional.element"),vr=Symbol.for("react.portal"),Wa=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),au=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),m_=Symbol.for("react.consumer"),Hi=Symbol.for("react.context"),gf=Symbol.for("react.forward_ref"),su=Symbol.for("react.suspense"),ru=Symbol.for("react.suspense_list"),_f=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),cu=Symbol.for("react.activity"),wb=Symbol.for("react.memo_cache_sentinel"),bh=Symbol.iterator;function ar(e){return e===null||typeof e!="object"?null:(e=bh&&e[bh]||e["@@iterator"],typeof e=="function"?e:null)}var Rb=Symbol.for("react.client.reference");function ou(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Rb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wa:return"Fragment";case au:return"Profiler";case h_:return"StrictMode";case su:return"Suspense";case ru:return"SuspenseList";case cu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case vr:return"Portal";case Hi:return(e.displayName||"Context")+".Provider";case m_:return(e._context.displayName||"Context")+".Consumer";case gf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _f:return t=e.displayName||null,t!==null?t:ou(e.type)||"Memo";case pn:t=e._payload,e=e._init;try{return ou(e(t))}catch{}}return null}var yr=Array.isArray,Q=d_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=vb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ia={pending:!1,data:null,method:null,action:null},lu=[],es=-1;function Di(e){return{current:e}}function et(e){0>es||(e.current=lu[es],lu[es]=null,es--)}function Le(e,t){es++,lu[es]=e.current,e.current=t}var bi=Di(null),zr=Di(null),En=Di(null),Do=Di(null);function Co(e,t){switch(Le(En,t),Le(zr,e),Le(bi,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Dm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Dm(t),e=ky(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}et(bi),Le(bi,e)}function Ds(){et(bi),et(zr),et(En)}function du(e){e.memoizedState!==null&&Le(Do,e);var t=bi.current,i=ky(t,e.type);t!==i&&(Le(zr,e),Le(bi,i))}function xo(e){zr.current===e&&(et(bi),et(zr)),Do.current===e&&(et(Do),Xr._currentValue=ia)}var uu=Object.prototype.hasOwnProperty,vf=Fe.unstable_scheduleCallback,cd=Fe.unstable_cancelCallback,Tb=Fe.unstable_shouldYield,Eb=Fe.unstable_requestPaint,wi=Fe.unstable_now,Db=Fe.unstable_getCurrentPriorityLevel,g_=Fe.unstable_ImmediatePriority,__=Fe.unstable_UserBlockingPriority,Mo=Fe.unstable_NormalPriority,Cb=Fe.unstable_LowPriority,v_=Fe.unstable_IdlePriority,xb=Fe.log,Mb=Fe.unstable_setDisableYieldValue,ec=null,At=null;function Sn(e){if(typeof xb=="function"&&Mb(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(ec,e)}catch{}}var Pt=Math.clz32?Math.clz32:kb,Lb=Math.log,Ob=Math.LN2;function kb(e){return e>>>=0,e===0?32:31-(Lb(e)/Ob|0)|0}var Oc=256,kc=4194304;function Gn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function sl(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var c=n&134217727;return c!==0?(n=c&~s,n!==0?a=Gn(n):(r&=c,r!==0?a=Gn(r):i||(i=c&~e,i!==0&&(a=Gn(i))))):(c=n&~s,c!==0?a=Gn(c):r!==0?a=Gn(r):i||(i=n&~e,i!==0&&(a=Gn(i)))),a===0?0:t!==0&&t!==a&&!(t&s)&&(s=a&-a,i=t&-t,s>=i||s===32&&(i&4194048)!==0)?t:a}function tc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ab(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y_(){var e=Oc;return Oc<<=1,!(Oc&4194048)&&(Oc=256),e}function S_(){var e=kc;return kc<<=1,!(kc&62914560)&&(kc=4194304),e}function od(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ic(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pb(e,t,i,n,a,s){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var c=e.entanglements,o=e.expirationTimes,l=e.hiddenUpdates;for(i=r&~i;0<i;){var u=31-Pt(i),d=1<<u;c[u]=0,o[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}i&=~d}n!==0&&b_(e,n,0),s!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function b_(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Pt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&4194090}function w_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-Pt(i),a=1<<n;a&t|e[n]&t&&(e[n]|=t),i&=~a}}function yf(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function R_(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:qy(e.type))}function Nb(e,t){var i=fe.p;try{return fe.p=e,t()}finally{fe.p=i}}var zn=Math.random().toString(36).slice(2),ht="__reactFiber$"+zn,Et="__reactProps$"+zn,zs="__reactContainer$"+zn,fu="__reactEvents$"+zn,jb="__reactListeners$"+zn,Ub="__reactHandles$"+zn,wh="__reactResources$"+zn,nc="__reactMarker$"+zn;function bf(e){delete e[ht],delete e[Et],delete e[fu],delete e[jb],delete e[Ub]}function ts(e){var t=e[ht];if(t)return t;for(var i=e.parentNode;i;){if(t=i[zs]||i[ht]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Mm(e);e!==null;){if(i=e[ht])return i;e=Mm(e)}return t}e=i,i=e.parentNode}return null}function Bs(e){if(e=e[ht]||e[zs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Sr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(E(33))}function ps(e){var t=e[wh];return t||(t=e[wh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[nc]=!0}var T_=new Set,E_={};function ma(e,t){Cs(e,t),Cs(e+"Capture",t)}function Cs(e,t){for(E_[e]=t,e=0;e<t.length;e++)T_.add(t[e])}var zb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rh={},Th={};function Bb(e){return uu.call(Th,e)?!0:uu.call(Rh,e)?!1:zb.test(e)?Th[e]=!0:(Rh[e]=!0,!1)}function co(e,t,i){if(Bb(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ac(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Ai(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}var ld,Eh;function Fa(e){if(ld===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ld=t&&t[1]||"",Eh=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ld+e+Eh}var dd=!1;function ud(e,t){if(!e||dd)return"";dd=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(e,[],d)}else{try{d.call()}catch(p){f=p}e.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),r=s[0],c=s[1];if(r&&c){var o=r.split(`
`),l=c.split(`
`);for(a=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;if(n===o.length||a===l.length)for(n=o.length-1,a=l.length-1;1<=n&&0<=a&&o[n]!==l[a];)a--;for(;1<=n&&0<=a;n--,a--)if(o[n]!==l[a]){if(n!==1||a!==1)do if(n--,a--,0>a||o[n]!==l[a]){var u=`
`+o[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=n&&0<=a);break}}}finally{dd=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Fa(i):""}function Ib(e){switch(e.tag){case 26:case 27:case 5:return Fa(e.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 15:return ud(e.type,!1);case 11:return ud(e.type.render,!1);case 1:return ud(e.type,!0);case 31:return Fa("Activity");default:return""}}function Dh(e){try{var t="";do t+=Ib(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hb(e){var t=D_(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lo(e){e._valueTracker||(e._valueTracker=Hb(e))}function C_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=D_(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function Oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var qb=/[\n"\\]/g;function Vt(e){return e.replace(qb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function pu(e,t,i,n,a,s,r,c){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ht(t)):e.value!==""+Ht(t)&&(e.value=""+Ht(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?hu(e,r,Ht(t)):i!=null?hu(e,r,Ht(i)):n!=null&&e.removeAttribute("value"),a==null&&s!=null&&(e.defaultChecked=!!s),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.name=""+Ht(c):e.removeAttribute("name")}function x_(e,t,i,n,a,s,r,c){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||i!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;i=i!=null?""+Ht(i):"",t=t!=null?""+Ht(t):i,c||t===e.value||(e.value=t),e.defaultValue=t}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=c?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r)}function hu(e,t,i){t==="number"&&Oo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hs(e,t,i,n){if(e=e.options,t){t={};for(var a=0;a<i.length;a++)t["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=t.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Ht(i),t=null,a=0;a<e.length;a++){if(e[a].value===i){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function M_(e,t,i){if(t!=null&&(t=""+Ht(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Ht(i):""}function L_(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(E(92));if(yr(n)){if(1<n.length)throw Error(E(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=Ht(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n)}function xs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var $b=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ch(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||$b.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function O_(e,t,i){if(t!=null&&typeof t!="object")throw Error(E(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&i[a]!==n&&Ch(e,a,n)}else for(var s in t)t.hasOwnProperty(s)&&Ch(e,s,t[s])}function wf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(e){return Vb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var mu=null;function Rf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var is=null,ms=null;function xh(e){var t=Bs(e);if(t&&(e=t.stateNode)){var i=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(pu(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Vt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var a=n[Et]||null;if(!a)throw Error(E(90));pu(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&C_(n)}break e;case"textarea":M_(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&hs(e,!!i.multiple,t,!1)}}}var fd=!1;function k_(e,t,i){if(fd)return e(t,i);fd=!0;try{var n=e(t);return n}finally{if(fd=!1,(is!==null||ms!==null)&&(ml(),is&&(t=is,e=ms,ms=is=null,xh(t),e)))for(t=0;t<e.length;t++)xh(e[t])}}function Br(e,t){var i=e.stateNode;if(i===null)return null;var n=i[Et]||null;if(n===null)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(E(231,t,typeof i));return i}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gu=!1;if(Xi)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){gu=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{gu=!1}var bn=null,Tf=null,lo=null;function A_(){if(lo)return lo;var e,t=Tf,i=t.length,n,a="value"in bn?bn.value:bn.textContent,s=a.length;for(e=0;e<i&&t[e]===a[e];e++);var r=i-e;for(n=1;n<=r&&t[i-n]===a[s-n];n++);return lo=a.slice(e,1<n?1-n:void 0)}function uo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pc(){return!0}function Mh(){return!1}function Dt(e){function t(i,n,a,s,r){this._reactName=i,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(i=e[c],this[c]=i?i(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pc:Mh,this.isPropagationStopped=Mh,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),t}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=Dt(ga),ac=De({},ga,{view:0,detail:0}),Yb=Dt(ac),pd,hd,rr,cl=De({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&e.type==="mousemove"?(pd=e.screenX-rr.screenX,hd=e.screenY-rr.screenY):hd=pd=0,rr=e),pd)},movementY:function(e){return"movementY"in e?e.movementY:hd}}),Lh=Dt(cl),Qb=De({},cl,{dataTransfer:0}),Xb=Dt(Qb),Kb=De({},ac,{relatedTarget:0}),md=Dt(Kb),Fb=De({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=Dt(Fb),Jb=De({},ga,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wb=Dt(Jb),ew=De({},ga,{data:0}),Oh=Dt(ew),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nw[e])?!!t[e]:!1}function Ef(){return aw}var sw=De({},ac,{key:function(e){if(e.key){var t=tw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ef,charCode:function(e){return e.type==="keypress"?uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rw=Dt(sw),cw=De({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Dt(cw),ow=De({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ef}),lw=Dt(ow),dw=De({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),uw=Dt(dw),fw=De({},cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pw=Dt(fw),hw=De({},ga,{newState:0,oldState:0}),mw=Dt(hw),gw=[9,13,27,32],Df=Xi&&"CompositionEvent"in window,Tr=null;Xi&&"documentMode"in document&&(Tr=document.documentMode);var _w=Xi&&"TextEvent"in window&&!Tr,P_=Xi&&(!Df||Tr&&8<Tr&&11>=Tr),Ah=String.fromCharCode(32),Ph=!1;function N_(e,t){switch(e){case"keyup":return gw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function vw(e,t){switch(e){case"compositionend":return j_(t);case"keypress":return t.which!==32?null:(Ph=!0,Ah);case"textInput":return e=t.data,e===Ah&&Ph?null:e;default:return null}}function yw(e,t){if(ns)return e==="compositionend"||!Df&&N_(e,t)?(e=A_(),lo=Tf=bn=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return P_&&t.locale!=="ko"?null:t.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sw[e.type]:t==="textarea"}function U_(e,t,i,n){is?ms?ms.push(n):ms=[n]:is=n,t=Ko(t,"onChange"),0<t.length&&(i=new rl("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Er=null,Ir=null;function bw(e){My(e,0)}function ol(e){var t=Sr(e);if(C_(t))return e}function jh(e,t){if(e==="change")return t}var z_=!1;if(Xi){var gd;if(Xi){var _d="oninput"in document;if(!_d){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),_d=typeof Uh.oninput=="function"}gd=_d}else gd=!1;z_=gd&&(!document.documentMode||9<document.documentMode)}function zh(){Er&&(Er.detachEvent("onpropertychange",B_),Ir=Er=null)}function B_(e){if(e.propertyName==="value"&&ol(Ir)){var t=[];U_(t,Ir,e,Rf(e)),k_(bw,t)}}function ww(e,t,i){e==="focusin"?(zh(),Er=t,Ir=i,Er.attachEvent("onpropertychange",B_)):e==="focusout"&&zh()}function Rw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ol(Ir)}function Tw(e,t){if(e==="click")return ol(t)}function Ew(e,t){if(e==="input"||e==="change")return ol(t)}function Dw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:Dw;function Hr(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var a=i[n];if(!uu.call(t,a)||!Ut(e[a],t[a]))return!1}return!0}function Bh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ih(e,t){var i=Bh(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Bh(i)}}function I_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?I_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H_(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Oo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Oo(e.document)}return t}function Cf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Cw=Xi&&"documentMode"in document&&11>=document.documentMode,as=null,_u=null,Dr=null,vu=!1;function Hh(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;vu||as==null||as!==Oo(n)||(n=as,"selectionStart"in n&&Cf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dr&&Hr(Dr,n)||(Dr=n,n=Ko(_u,"onSelect"),0<n.length&&(t=new rl("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=as)))}function Hn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ss={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},vd={},q_={};Xi&&(q_=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function _a(e){if(vd[e])return vd[e];if(!ss[e])return e;var t=ss[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in q_)return vd[e]=t[i];return e}var $_=_a("animationend"),G_=_a("animationiteration"),V_=_a("animationstart"),xw=_a("transitionrun"),Mw=_a("transitionstart"),Lw=_a("transitioncancel"),Y_=_a("transitionend"),Q_=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function ai(e,t){Q_.set(e,t),ma(t,[e])}var qh=new WeakMap;function Yt(e,t){if(typeof e=="object"&&e!==null){var i=qh.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Dh(t)},qh.set(e,t),t)}return{value:e,source:t,stack:Dh(t)}}var Bt=[],rs=0,xf=0;function ll(){for(var e=rs,t=xf=rs=0;t<e;){var i=Bt[t];Bt[t++]=null;var n=Bt[t];Bt[t++]=null;var a=Bt[t];Bt[t++]=null;var s=Bt[t];if(Bt[t++]=null,n!==null&&a!==null){var r=n.pending;r===null?a.next=a:(a.next=r.next,r.next=a),n.pending=a}s!==0&&X_(i,a,s)}}function dl(e,t,i,n){Bt[rs++]=e,Bt[rs++]=t,Bt[rs++]=i,Bt[rs++]=n,xf|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Mf(e,t,i,n){return dl(e,t,i,n),ko(e)}function Is(e,t){return dl(e,null,null,t),ko(e)}function X_(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var a=!1,s=e.return;s!==null;)s.childLanes|=i,n=s.alternate,n!==null&&(n.childLanes|=i),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(a=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,a&&t!==null&&(a=31-Pt(i),e=s.hiddenUpdates,n=e[a],n===null?e[a]=[t]:n.push(t),t.lane=i|536870912),s):null}function ko(e){if(50<jr)throw jr=0,Iu=null,Error(E(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var cs={};function Ow(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,i,n){return new Ow(e,t,i,n)}function Lf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yi(e,t){var i=e.alternate;return i===null?(i=kt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function K_(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fo(e,t,i,n,a,s){var r=0;if(n=e,typeof e=="function")Lf(e)&&(r=1);else if(typeof e=="string")r=A0(e,i,bi.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case cu:return e=kt(31,i,t,a),e.elementType=cu,e.lanes=s,e;case Wa:return na(i.children,a,s,t);case h_:r=8,a|=24;break;case au:return e=kt(12,i,t,a|2),e.elementType=au,e.lanes=s,e;case su:return e=kt(13,i,t,a),e.elementType=su,e.lanes=s,e;case ru:return e=kt(19,i,t,a),e.elementType=ru,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bb:case Hi:r=10;break e;case m_:r=9;break e;case gf:r=11;break e;case _f:r=14;break e;case pn:r=16,n=null;break e}r=29,i=Error(E(130,e===null?"null":typeof e,"")),n=null}return t=kt(r,i,t,a),t.elementType=e,t.type=n,t.lanes=s,t}function na(e,t,i,n){return e=kt(7,e,n,t),e.lanes=i,e}function yd(e,t,i){return e=kt(6,e,null,t),e.lanes=i,e}function Sd(e,t,i){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var os=[],ls=0,Ao=null,Po=0,qt=[],$t=0,aa=null,qi=1,$i="";function Vn(e,t){os[ls++]=Po,os[ls++]=Ao,Ao=e,Po=t}function F_(e,t,i){qt[$t++]=qi,qt[$t++]=$i,qt[$t++]=aa,aa=e;var n=qi;e=$i;var a=32-Pt(n)-1;n&=~(1<<a),i+=1;var s=32-Pt(t)+a;if(30<s){var r=a-a%5;s=(n&(1<<r)-1).toString(32),n>>=r,a-=r,qi=1<<32-Pt(t)+a|i<<a|n,$i=s+e}else qi=1<<s|i<<a|n,$i=e}function Of(e){e.return!==null&&(Vn(e,1),F_(e,1,0))}function kf(e){for(;e===Ao;)Ao=os[--ls],os[ls]=null,Po=os[--ls],os[ls]=null;for(;e===aa;)aa=qt[--$t],qt[$t]=null,$i=qt[--$t],qt[$t]=null,qi=qt[--$t],qt[$t]=null}var vt=null,je=null,ue=!1,sa=null,yi=!1,Su=Error(E(519));function la(e){var t=Error(E(418,""));throw qr(Yt(t,e)),Su}function $h(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[ht]=e,t[Et]=n,i){case"dialog":te("cancel",t),te("close",t);break;case"iframe":case"object":case"embed":te("load",t);break;case"video":case"audio":for(i=0;i<Vr.length;i++)te(Vr[i],t);break;case"source":te("error",t);break;case"img":case"image":case"link":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"input":te("invalid",t),x_(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Lo(t);break;case"select":te("invalid",t);break;case"textarea":te("invalid",t),L_(t,n.value,n.defaultValue,n.children),Lo(t)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||Oy(t.textContent,i)?(n.popover!=null&&(te("beforetoggle",t),te("toggle",t)),n.onScroll!=null&&te("scroll",t),n.onScrollEnd!=null&&te("scrollend",t),n.onClick!=null&&(t.onclick=vl),t=!0):t=!1,t||la(e)}function Gh(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:vt=vt.return}}function cr(e){if(e!==vt)return!1;if(!ue)return Gh(e),ue=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Yu(e.type,e.memoizedProps)),i=!i),i&&je&&la(e),Gh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){je=ii(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}je=null}}else t===27?(t=je,Bn(e.type)?(e=Ku,Ku=null,je=e):je=t):je=vt?ii(e.stateNode.nextSibling):null;return!0}function sc(){je=vt=null,ue=!1}function Vh(){var e=sa;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),sa=null),e}function qr(e){sa===null?sa=[e]:sa.push(e)}var bu=Di(null),va=null,Gi=null;function mn(e,t,i){Le(bu,t._currentValue),t._currentValue=i}function Qi(e){e._currentValue=bu.current,et(bu)}function wu(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Ru(e,t,i,n){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){var r=a.child;s=s.firstContext;e:for(;s!==null;){var c=s;s=a;for(var o=0;o<t.length;o++)if(c.context===t[o]){s.lanes|=i,c=s.alternate,c!==null&&(c.lanes|=i),wu(s.return,i,e),n||(r=null);break e}s=c.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(E(341));r.lanes|=i,s=r.alternate,s!==null&&(s.lanes|=i),wu(r,i,e),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===e){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function rc(e,t,i,n){e=null;for(var a=t,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(E(387));if(r=r.memoizedProps,r!==null){var c=a.type;Ut(a.pendingProps.value,r.value)||(e!==null?e.push(c):e=[c])}}else if(a===Do.current){if(r=a.alternate,r===null)throw Error(E(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Xr):e=[Xr])}a=a.return}e!==null&&Ru(t,e,i,n),t.flags|=262144}function No(e){for(e=e.firstContext;e!==null;){if(!Ut(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function da(e){va=e,Gi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mt(e){return Z_(va,e)}function Nc(e,t){return va===null&&da(e),Z_(e,t)}function Z_(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Gi===null){if(e===null)throw Error(E(308));Gi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Gi=Gi.next=t;return i}var kw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Aw=Fe.unstable_scheduleCallback,Pw=Fe.unstable_NormalPriority,Xe={$$typeof:Hi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new kw,data:new Map,refCount:0}}function cc(e){e.refCount--,e.refCount===0&&Aw(Pw,function(){e.controller.abort()})}var Cr=null,Tu=0,Ms=0,gs=null;function Nw(e,t){if(Cr===null){var i=Cr=[];Tu=0,Ms=ip(),gs={status:"pending",value:void 0,then:function(n){i.push(n)}}}return Tu++,t.then(Yh,Yh),t}function Yh(){if(--Tu===0&&Cr!==null){gs!==null&&(gs.status="fulfilled");var e=Cr;Cr=null,Ms=0,gs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jw(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(a){i.push(a)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var a=0;a<i.length;a++)(0,i[a])(t)},function(a){for(n.status="rejected",n.reason=a,a=0;a<i.length;a++)(0,i[a])(void 0)}),n}var Qh=Q.S;Q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Nw(e,t),Qh!==null&&Qh(e,t)};var ra=Di(null);function Pf(){var e=ra.current;return e!==null?e:Te.pooledCache}function po(e,t){t===null?Le(ra,ra.current):Le(ra,t.pool)}function J_(){var e=Pf();return e===null?null:{parent:Xe._currentValue,pool:e}}var oc=Error(E(460)),W_=Error(E(474)),ul=Error(E(542)),Eu={then:function(){}};function Xh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jc(){}function ev(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(jc,jc),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fh(e),e;default:if(typeof t.status=="string")t.then(jc,jc);else{if(e=Te,e!==null&&100<e.shellSuspendCounter)throw Error(E(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=n}},function(n){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fh(e),e}throw xr=t,oc}}var xr=null;function Kh(){if(xr===null)throw Error(E(459));var e=xr;return xr=null,e}function Fh(e){if(e===oc||e===ul)throw Error(E(483))}var hn=!1;function Nf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Cn(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=ko(e),X_(e,null,i),t}return dl(e,n,t,i),ko(e)}function Mr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,w_(e,i)}}function bd(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var a=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};s===null?a=s=r:s=s.next=r,i=i.next}while(i!==null);s===null?a=s=t:s=s.next=t}else a=s=t;i={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Cu=!1;function Lr(){if(Cu){var e=gs;if(e!==null)throw e}}function Or(e,t,i,n){Cu=!1;var a=e.updateQueue;hn=!1;var s=a.firstBaseUpdate,r=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,l=o.next;o.next=null,r===null?s=l:r.next=l,r=o;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==r&&(c===null?u.firstBaseUpdate=l:c.next=l,u.lastBaseUpdate=o))}if(s!==null){var d=a.baseState;r=0,u=l=o=null,c=s;do{var f=c.lane&-536870913,p=f!==c.lane;if(p?(ce&f)===f:(n&f)===f){f!==0&&f===Ms&&(Cu=!0),u!==null&&(u=u.next={lane:0,tag:c.tag,payload:c.payload,callback:null,next:null});e:{var y=e,b=c;f=t;var w=i;switch(b.tag){case 1:if(y=b.payload,typeof y=="function"){d=y.call(w,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(w,d,f):y,f==null)break e;d=De({},d,f);break e;case 2:hn=!0}}f=c.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=a.callbacks,p===null?a.callbacks=[f]:p.push(f))}else p={lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(l=u=p,o=d):u=u.next=p,r|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;p=c,c=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(1);u===null&&(o=d),a.baseState=o,a.firstBaseUpdate=l,a.lastBaseUpdate=u,s===null&&(a.shared.lanes=0),Un|=r,e.lanes=r,e.memoizedState=d}}function tv(e,t){if(typeof e!="function")throw Error(E(191,e));e.call(t)}function iv(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)tv(i[e],t)}var Ls=Di(null),jo=Di(0);function Zh(e,t){e=Zi,Le(jo,e),Le(Ls,t),Zi=e|t.baseLanes}function xu(){Le(jo,Zi),Le(Ls,Ls.current)}function jf(){Zi=jo.current,et(Ls),et(jo)}var Nn=0,W=null,ye=null,Ge=null,Uo=!1,_s=!1,ua=!1,zo=0,$r=0,vs=null,Uw=0;function Be(){throw Error(E(321))}function Uf(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ut(e[i],t[i]))return!1;return!0}function zf(e,t,i,n,a,s){return Nn=s,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q.H=e===null||e.memoizedState===null?Av:Pv,ua=!1,s=i(n,a),ua=!1,_s&&(s=av(t,i,n,a)),nv(e),s}function nv(e){Q.H=Bo;var t=ye!==null&&ye.next!==null;if(Nn=0,Ge=ye=W=null,Uo=!1,$r=0,vs=null,t)throw Error(E(300));e===null||We||(e=e.dependencies,e!==null&&No(e)&&(We=!0))}function av(e,t,i,n){W=e;var a=0;do{if(_s&&(vs=null),$r=0,_s=!1,25<=a)throw Error(E(301));if(a+=1,Ge=ye=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Q.H=Gw,s=t(i,n)}while(_s);return s}function zw(){var e=Q.H,t=e.useState()[0];return t=typeof t.then=="function"?lc(t):t,e=e.useState()[0],(ye!==null?ye.memoizedState:null)!==e&&(W.flags|=1024),t}function Bf(){var e=zo!==0;return zo=0,e}function If(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Hf(e){if(Uo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Uo=!1}Nn=0,Ge=ye=W=null,_s=!1,$r=zo=0,vs=null}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?W.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ye(){if(ye===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=Ge===null?W.memoizedState:Ge.next;if(t!==null)Ge=t,ye=e;else{if(e===null)throw W.alternate===null?Error(E(467)):Error(E(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Ge===null?W.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lc(e){var t=$r;return $r+=1,vs===null&&(vs=[]),e=ev(vs,e,t),t=W,(Ge===null?t.memoizedState:Ge.next)===null&&(t=t.alternate,Q.H=t===null||t.memoizedState===null?Av:Pv),e}function fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return lc(e);if(e.$$typeof===Hi)return mt(e)}throw Error(E(438,String(e)))}function $f(e){var t=null,i=W.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=W.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=qf(),W.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=wb;return t.index++,i}function Ki(e,t){return typeof t=="function"?t(e):t}function ho(e){var t=Ye();return Gf(t,ye,e)}function Gf(e,t,i){var n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=i;var a=e.baseQueue,s=n.pending;if(s!==null){if(a!==null){var r=a.next;a.next=s.next,s.next=r}t.baseQueue=a=s,n.pending=null}if(s=e.baseState,a===null)e.memoizedState=s;else{t=a.next;var c=r=null,o=null,l=t,u=!1;do{var d=l.lane&-536870913;if(d!==l.lane?(ce&d)===d:(Nn&d)===d){var f=l.revertLane;if(f===0)o!==null&&(o=o.next={lane:0,revertLane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d===Ms&&(u=!0);else if((Nn&f)===f){l=l.next,f===Ms&&(u=!0);continue}else d={lane:0,revertLane:l.revertLane,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},o===null?(c=o=d,r=s):o=o.next=d,W.lanes|=f,Un|=f;d=l.action,ua&&i(s,d),s=l.hasEagerState?l.eagerState:i(s,d)}else f={lane:d,revertLane:l.revertLane,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},o===null?(c=o=f,r=s):o=o.next=f,W.lanes|=d,Un|=d;l=l.next}while(l!==null&&l!==t);if(o===null?r=s:o.next=c,!Ut(s,e.memoizedState)&&(We=!0,u&&(i=gs,i!==null)))throw i;e.memoizedState=s,e.baseState=r,e.baseQueue=o,n.lastRenderedState=s}return a===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function wd(e){var t=Ye(),i=t.queue;if(i===null)throw Error(E(311));i.lastRenderedReducer=e;var n=i.dispatch,a=i.pending,s=t.memoizedState;if(a!==null){i.pending=null;var r=a=a.next;do s=e(s,r.action),r=r.next;while(r!==a);Ut(s,t.memoizedState)||(We=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function sv(e,t,i){var n=W,a=Ye(),s=ue;if(s){if(i===void 0)throw Error(E(407));i=i()}else i=t();var r=!Ut((ye||a).memoizedState,i);r&&(a.memoizedState=i,We=!0),a=a.queue;var c=ov.bind(null,n,a,e);if(dc(2048,8,c,[e]),a.getSnapshot!==t||r||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Os(9,pl(),cv.bind(null,n,a,i,t),null),Te===null)throw Error(E(349));s||Nn&124||rv(n,t,i)}return i}function rv(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=W.updateQueue,t===null?(t=qf(),W.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function cv(e,t,i,n){t.value=i,t.getSnapshot=n,lv(t)&&dv(e)}function ov(e,t,i){return i(function(){lv(t)&&dv(e)})}function lv(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ut(e,i)}catch{return!0}}function dv(e){var t=Is(e,2);t!==null&&jt(t,e,2)}function Mu(e){var t=wt();if(typeof e=="function"){var i=e;if(e=i(),ua){Sn(!0);try{i()}finally{Sn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t}function uv(e,t,i,n){return e.baseState=i,Gf(e,ye,typeof n=="function"?n:Ki)}function Bw(e,t,i,n,a){if(hl(e))throw Error(E(485));if(e=t.action,e!==null){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};Q.T!==null?i(!0):s.isTransition=!1,n(s),i=t.pending,i===null?(s.next=t.pending=s,fv(t,s)):(s.next=i.next,t.pending=i.next=s)}}function fv(e,t){var i=t.action,n=t.payload,a=e.state;if(t.isTransition){var s=Q.T,r={};Q.T=r;try{var c=i(a,n),o=Q.S;o!==null&&o(r,c),Jh(e,t,c)}catch(l){Lu(e,t,l)}finally{Q.T=s}}else try{s=i(a,n),Jh(e,t,s)}catch(l){Lu(e,t,l)}}function Jh(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){Wh(e,t,n)},function(n){return Lu(e,t,n)}):Wh(e,t,i)}function Wh(e,t,i){t.status="fulfilled",t.value=i,pv(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,fv(e,i)))}function Lu(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,pv(t),t=t.next;while(t!==n)}e.action=null}function pv(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hv(e,t){return t}function em(e,t){if(ue){var i=Te.formState;if(i!==null){e:{var n=W;if(ue){if(je){t:{for(var a=je,s=yi;a.nodeType!==8;){if(!s){a=null;break t}if(a=ii(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){je=ii(a.nextSibling),n=a.data==="F!";break e}}la(n)}n=!1}n&&(t=i[0])}}return i=wt(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:t},i.queue=n,i=Lv.bind(null,W,n),n.dispatch=i,n=Mu(!1),s=Xf.bind(null,W,!1,n.queue),n=wt(),a={state:t,dispatch:null,action:e,pending:null},n.queue=a,i=Bw.bind(null,W,a,s,i),a.dispatch=i,n.memoizedState=e,[t,i,!1]}function tm(e){var t=Ye();return mv(t,ye,e)}function mv(e,t,i){if(t=Gf(e,t,hv)[0],e=ho(Ki)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=lc(t)}catch(r){throw r===oc?ul:r}else n=t;t=Ye();var a=t.queue,s=a.dispatch;return i!==t.memoizedState&&(W.flags|=2048,Os(9,pl(),Iw.bind(null,a,i),null)),[n,s,e]}function Iw(e,t){e.action=t}function im(e){var t=Ye(),i=ye;if(i!==null)return mv(t,i,e);Ye(),t=t.memoizedState,i=Ye();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Os(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=W.updateQueue,t===null&&(t=qf(),W.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function pl(){return{destroy:void 0,resource:void 0}}function gv(){return Ye().memoizedState}function mo(e,t,i,n){var a=wt();n=n===void 0?null:n,W.flags|=e,a.memoizedState=Os(1|t,pl(),i,n)}function dc(e,t,i,n){var a=Ye();n=n===void 0?null:n;var s=a.memoizedState.inst;ye!==null&&n!==null&&Uf(n,ye.memoizedState.deps)?a.memoizedState=Os(t,s,i,n):(W.flags|=e,a.memoizedState=Os(1|t,s,i,n))}function nm(e,t){mo(8390656,8,e,t)}function _v(e,t){dc(2048,8,e,t)}function vv(e,t){return dc(4,2,e,t)}function yv(e,t){return dc(4,4,e,t)}function Sv(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bv(e,t,i){i=i!=null?i.concat([e]):null,dc(4,4,Sv.bind(null,t,e),i)}function Vf(){}function wv(e,t){var i=Ye();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&Uf(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Rv(e,t){var i=Ye();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&Uf(t,n[1]))return n[0];if(n=e(),ua){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[n,t],n}function Yf(e,t,i){return i===void 0||Nn&1073741824?e.memoizedState=t:(e.memoizedState=i,e=py(),W.lanes|=e,Un|=e,i)}function Tv(e,t,i,n){return Ut(i,t)?i:Ls.current!==null?(e=Yf(e,i,n),Ut(e,t)||(We=!0),e):Nn&42?(e=py(),W.lanes|=e,Un|=e,t):(We=!0,e.memoizedState=i)}function Ev(e,t,i,n,a){var s=fe.p;fe.p=s!==0&&8>s?s:8;var r=Q.T,c={};Q.T=c,Xf(e,!1,t,i);try{var o=a(),l=Q.S;if(l!==null&&l(c,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=jw(o,n);kr(e,t,u,Nt(e))}else kr(e,t,n,Nt(e))}catch(d){kr(e,t,{then:function(){},status:"rejected",reason:d},Nt())}finally{fe.p=s,Q.T=r}}function Hw(){}function Ou(e,t,i,n){if(e.tag!==5)throw Error(E(476));var a=Dv(e).queue;Ev(e,a,t,ia,i===null?Hw:function(){return Cv(e),i(n)})}function Dv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ia,baseState:ia,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ia},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Cv(e){var t=Dv(e).next.queue;kr(e,t,{},Nt())}function Qf(){return mt(Xr)}function xv(){return Ye().memoizedState}function Mv(){return Ye().memoizedState}function qw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Nt();e=Dn(i);var n=Cn(t,e,i);n!==null&&(jt(n,t,i),Mr(n,t,i)),t={cache:Af()},e.payload=t;return}t=t.return}}function $w(e,t,i){var n=Nt();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},hl(e)?Ov(t,i):(i=Mf(e,t,i,n),i!==null&&(jt(i,e,n),kv(i,t,n)))}function Lv(e,t,i){var n=Nt();kr(e,t,i,n)}function kr(e,t,i,n){var a={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(hl(e))Ov(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,c=s(r,i);if(a.hasEagerState=!0,a.eagerState=c,Ut(c,r))return dl(e,t,a,0),Te===null&&ll(),!1}catch{}finally{}if(i=Mf(e,t,a,n),i!==null)return jt(i,e,n),kv(i,t,n),!0}return!1}function Xf(e,t,i,n){if(n={lane:2,revertLane:ip(),action:n,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(t)throw Error(E(479))}else t=Mf(e,i,n,2),t!==null&&jt(t,e,2)}function hl(e){var t=e.alternate;return e===W||t!==null&&t===W}function Ov(e,t){_s=Uo=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function kv(e,t,i){if(i&4194048){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,w_(e,i)}}var Bo={readContext:mt,use:fl,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be},Av={readContext:mt,use:fl,useCallback:function(e,t){return wt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:nm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,mo(4194308,4,Sv.bind(null,t,e),i)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var i=wt();t=t===void 0?null:t;var n=e();if(ua){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=wt();if(i!==void 0){var a=i(t);if(ua){Sn(!0);try{i(t)}finally{Sn(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=$w.bind(null,W,e),[n.memoizedState,e]},useRef:function(e){var t=wt();return e={current:e},t.memoizedState=e},useState:function(e){e=Mu(e);var t=e.queue,i=Lv.bind(null,W,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Vf,useDeferredValue:function(e,t){var i=wt();return Yf(i,e,t)},useTransition:function(){var e=Mu(!1);return e=Ev.bind(null,W,e.queue,!0,!1),wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=W,a=wt();if(ue){if(i===void 0)throw Error(E(407));i=i()}else{if(i=t(),Te===null)throw Error(E(349));ce&124||rv(n,t,i)}a.memoizedState=i;var s={value:i,getSnapshot:t};return a.queue=s,nm(ov.bind(null,n,s,e),[e]),n.flags|=2048,Os(9,pl(),cv.bind(null,n,s,i,t),null),i},useId:function(){var e=wt(),t=Te.identifierPrefix;if(ue){var i=$i,n=qi;i=(n&~(1<<32-Pt(n)-1)).toString(32)+i,t="«"+t+"R"+i,i=zo++,0<i&&(t+="H"+i.toString(32)),t+="»"}else i=Uw++,t="«"+t+"r"+i.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Qf,useFormState:em,useActionState:em,useOptimistic:function(e){var t=wt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Xf.bind(null,W,!0,i),i.dispatch=t,[e,t]},useMemoCache:$f,useCacheRefresh:function(){return wt().memoizedState=qw.bind(null,W)}},Pv={readContext:mt,use:fl,useCallback:wv,useContext:mt,useEffect:_v,useImperativeHandle:bv,useInsertionEffect:vv,useLayoutEffect:yv,useMemo:Rv,useReducer:ho,useRef:gv,useState:function(){return ho(Ki)},useDebugValue:Vf,useDeferredValue:function(e,t){var i=Ye();return Tv(i,ye.memoizedState,e,t)},useTransition:function(){var e=ho(Ki)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:lc(e),t]},useSyncExternalStore:sv,useId:xv,useHostTransitionStatus:Qf,useFormState:tm,useActionState:tm,useOptimistic:function(e,t){var i=Ye();return uv(i,ye,e,t)},useMemoCache:$f,useCacheRefresh:Mv},Gw={readContext:mt,use:fl,useCallback:wv,useContext:mt,useEffect:_v,useImperativeHandle:bv,useInsertionEffect:vv,useLayoutEffect:yv,useMemo:Rv,useReducer:wd,useRef:gv,useState:function(){return wd(Ki)},useDebugValue:Vf,useDeferredValue:function(e,t){var i=Ye();return ye===null?Yf(i,e,t):Tv(i,ye.memoizedState,e,t)},useTransition:function(){var e=wd(Ki)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:lc(e),t]},useSyncExternalStore:sv,useId:xv,useHostTransitionStatus:Qf,useFormState:im,useActionState:im,useOptimistic:function(e,t){var i=Ye();return ye!==null?uv(i,ye,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:$f,useCacheRefresh:Mv},ys=null,Gr=0;function Uc(e){var t=Gr;return Gr+=1,ys===null&&(ys=[]),ev(ys,e,t)}function or(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zc(e,t){throw t.$$typeof===Sb?Error(E(525)):(e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function am(e){var t=e._init;return t(e._payload)}function Nv(e){function t(m,v){if(e){var h=m.deletions;h===null?(m.deletions=[v],m.flags|=16):h.push(v)}}function i(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function n(m){for(var v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function a(m,v){return m=Yi(m,v),m.index=0,m.sibling=null,m}function s(m,v,h){return m.index=h,e?(h=m.alternate,h!==null?(h=h.index,h<v?(m.flags|=67108866,v):h):(m.flags|=67108866,v)):(m.flags|=1048576,v)}function r(m){return e&&m.alternate===null&&(m.flags|=67108866),m}function c(m,v,h,g){return v===null||v.tag!==6?(v=yd(h,m.mode,g),v.return=m,v):(v=a(v,h),v.return=m,v)}function o(m,v,h,g){var S=h.type;return S===Wa?u(m,v,h.props.children,g,h.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pn&&am(S)===v.type)?(v=a(v,h.props),or(v,h),v.return=m,v):(v=fo(h.type,h.key,h.props,null,m.mode,g),or(v,h),v.return=m,v)}function l(m,v,h,g){return v===null||v.tag!==4||v.stateNode.containerInfo!==h.containerInfo||v.stateNode.implementation!==h.implementation?(v=Sd(h,m.mode,g),v.return=m,v):(v=a(v,h.children||[]),v.return=m,v)}function u(m,v,h,g,S){return v===null||v.tag!==7?(v=na(h,m.mode,g,S),v.return=m,v):(v=a(v,h),v.return=m,v)}function d(m,v,h){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=yd(""+v,m.mode,h),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lc:return h=fo(v.type,v.key,v.props,null,m.mode,h),or(h,v),h.return=m,h;case vr:return v=Sd(v,m.mode,h),v.return=m,v;case pn:var g=v._init;return v=g(v._payload),d(m,v,h)}if(yr(v)||ar(v))return v=na(v,m.mode,h,null),v.return=m,v;if(typeof v.then=="function")return d(m,Uc(v),h);if(v.$$typeof===Hi)return d(m,Nc(m,v),h);zc(m,v)}return null}function f(m,v,h,g){var S=v!==null?v.key:null;if(typeof h=="string"&&h!==""||typeof h=="number"||typeof h=="bigint")return S!==null?null:c(m,v,""+h,g);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Lc:return h.key===S?o(m,v,h,g):null;case vr:return h.key===S?l(m,v,h,g):null;case pn:return S=h._init,h=S(h._payload),f(m,v,h,g)}if(yr(h)||ar(h))return S!==null?null:u(m,v,h,g,null);if(typeof h.then=="function")return f(m,v,Uc(h),g);if(h.$$typeof===Hi)return f(m,v,Nc(m,h),g);zc(m,h)}return null}function p(m,v,h,g,S){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return m=m.get(h)||null,c(v,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lc:return m=m.get(g.key===null?h:g.key)||null,o(v,m,g,S);case vr:return m=m.get(g.key===null?h:g.key)||null,l(v,m,g,S);case pn:var R=g._init;return g=R(g._payload),p(m,v,h,g,S)}if(yr(g)||ar(g))return m=m.get(h)||null,u(v,m,g,S,null);if(typeof g.then=="function")return p(m,v,h,Uc(g),S);if(g.$$typeof===Hi)return p(m,v,h,Nc(v,g),S);zc(v,g)}return null}function y(m,v,h,g){for(var S=null,R=null,x=v,O=v=0,T=null;x!==null&&O<h.length;O++){x.index>O?(T=x,x=null):T=x.sibling;var U=f(m,x,h[O],g);if(U===null){x===null&&(x=T);break}e&&x&&U.alternate===null&&t(m,x),v=s(U,v,O),R===null?S=U:R.sibling=U,R=U,x=T}if(O===h.length)return i(m,x),ue&&Vn(m,O),S;if(x===null){for(;O<h.length;O++)x=d(m,h[O],g),x!==null&&(v=s(x,v,O),R===null?S=x:R.sibling=x,R=x);return ue&&Vn(m,O),S}for(x=n(x);O<h.length;O++)T=p(x,m,O,h[O],g),T!==null&&(e&&T.alternate!==null&&x.delete(T.key===null?O:T.key),v=s(T,v,O),R===null?S=T:R.sibling=T,R=T);return e&&x.forEach(function(L){return t(m,L)}),ue&&Vn(m,O),S}function b(m,v,h,g){if(h==null)throw Error(E(151));for(var S=null,R=null,x=v,O=v=0,T=null,U=h.next();x!==null&&!U.done;O++,U=h.next()){x.index>O?(T=x,x=null):T=x.sibling;var L=f(m,x,U.value,g);if(L===null){x===null&&(x=T);break}e&&x&&L.alternate===null&&t(m,x),v=s(L,v,O),R===null?S=L:R.sibling=L,R=L,x=T}if(U.done)return i(m,x),ue&&Vn(m,O),S;if(x===null){for(;!U.done;O++,U=h.next())U=d(m,U.value,g),U!==null&&(v=s(U,v,O),R===null?S=U:R.sibling=U,R=U);return ue&&Vn(m,O),S}for(x=n(x);!U.done;O++,U=h.next())U=p(x,m,O,U.value,g),U!==null&&(e&&U.alternate!==null&&x.delete(U.key===null?O:U.key),v=s(U,v,O),R===null?S=U:R.sibling=U,R=U);return e&&x.forEach(function(M){return t(m,M)}),ue&&Vn(m,O),S}function w(m,v,h,g){if(typeof h=="object"&&h!==null&&h.type===Wa&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Lc:e:{for(var S=h.key;v!==null;){if(v.key===S){if(S=h.type,S===Wa){if(v.tag===7){i(m,v.sibling),g=a(v,h.props.children),g.return=m,m=g;break e}}else if(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pn&&am(S)===v.type){i(m,v.sibling),g=a(v,h.props),or(g,h),g.return=m,m=g;break e}i(m,v);break}else t(m,v);v=v.sibling}h.type===Wa?(g=na(h.props.children,m.mode,g,h.key),g.return=m,m=g):(g=fo(h.type,h.key,h.props,null,m.mode,g),or(g,h),g.return=m,m=g)}return r(m);case vr:e:{for(S=h.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===h.containerInfo&&v.stateNode.implementation===h.implementation){i(m,v.sibling),g=a(v,h.children||[]),g.return=m,m=g;break e}else{i(m,v);break}else t(m,v);v=v.sibling}g=Sd(h,m.mode,g),g.return=m,m=g}return r(m);case pn:return S=h._init,h=S(h._payload),w(m,v,h,g)}if(yr(h))return y(m,v,h,g);if(ar(h)){if(S=ar(h),typeof S!="function")throw Error(E(150));return h=S.call(h),b(m,v,h,g)}if(typeof h.then=="function")return w(m,v,Uc(h),g);if(h.$$typeof===Hi)return w(m,v,Nc(m,h),g);zc(m,h)}return typeof h=="string"&&h!==""||typeof h=="number"||typeof h=="bigint"?(h=""+h,v!==null&&v.tag===6?(i(m,v.sibling),g=a(v,h),g.return=m,m=g):(i(m,v),g=yd(h,m.mode,g),g.return=m,m=g),r(m)):i(m,v)}return function(m,v,h,g){try{Gr=0;var S=w(m,v,h,g);return ys=null,S}catch(x){if(x===oc||x===ul)throw x;var R=kt(29,x,null,m.mode);return R.lanes=g,R.return=m,R}finally{}}}var ks=Nv(!0),jv=Nv(!1),Kt=Di(null),Ri=null;function gn(e){var t=e.alternate;Le(Ke,Ke.current&1),Le(Kt,e),Ri===null&&(t===null||Ls.current!==null||t.memoizedState!==null)&&(Ri=e)}function Uv(e){if(e.tag===22){if(Le(Ke,Ke.current),Le(Kt,e),Ri===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ri=e)}}else _n()}function _n(){Le(Ke,Ke.current),Le(Kt,Kt.current)}function Vi(e){et(Kt),Ri===e&&(Ri=null),et(Ke)}var Ke=Di(0);function Io(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Xu(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Rd(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:De({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ku={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Nt(),a=Dn(n);a.payload=t,i!=null&&(a.callback=i),t=Cn(e,a,n),t!==null&&(jt(t,e,n),Mr(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Nt(),a=Dn(n);a.tag=1,a.payload=t,i!=null&&(a.callback=i),t=Cn(e,a,n),t!==null&&(jt(t,e,n),Mr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Nt(),n=Dn(i);n.tag=2,t!=null&&(n.callback=t),t=Cn(e,n,i),t!==null&&(jt(t,e,i),Mr(t,e,i))}};function sm(e,t,i,n,a,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,r):t.prototype&&t.prototype.isPureReactComponent?!Hr(i,n)||!Hr(a,s):!0}function rm(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&ku.enqueueReplaceState(t,t.state,null)}function fa(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=De({},i));for(var a in e)i[a]===void 0&&(i[a]=e[a])}return i}var Ho=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function zv(e){Ho(e)}function Bv(e){console.error(e)}function Iv(e){Ho(e)}function qo(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function cm(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Au(e,t,i){return i=Dn(i),i.tag=3,i.payload={element:null},i.callback=function(){qo(e,t)},i}function Hv(e){return e=Dn(e),e.tag=3,e}function qv(e,t,i,n){var a=i.type.getDerivedStateFromError;if(typeof a=="function"){var s=n.value;e.payload=function(){return a(s)},e.callback=function(){cm(t,i,n)}}var r=i.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){cm(t,i,n),typeof a!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var c=n.stack;this.componentDidCatch(n.value,{componentStack:c!==null?c:""})})}function Vw(e,t,i,n,a){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&rc(t,i,a,!0),i=Kt.current,i!==null){switch(i.tag){case 13:return Ri===null?Hu():i.alternate===null&&Ue===0&&(Ue=3),i.flags&=-257,i.flags|=65536,i.lanes=a,n===Eu?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),Pd(e,n,a)),!1;case 22:return i.flags|=65536,n===Eu?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),Pd(e,n,a)),!1}throw Error(E(435,i.tag))}return Pd(e,n,a),Hu(),!1}if(ue)return t=Kt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==Su&&(e=Error(E(422),{cause:n}),qr(Yt(e,i)))):(n!==Su&&(t=Error(E(423),{cause:n}),qr(Yt(t,i))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=Yt(n,i),a=Au(e.stateNode,n,a),bd(e,a),Ue!==4&&(Ue=2)),!1;var s=Error(E(520),{cause:n});if(s=Yt(s,i),Nr===null?Nr=[s]:Nr.push(s),Ue!==4&&(Ue=2),t===null)return!0;n=Yt(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=a&-a,i.lanes|=e,e=Au(i.stateNode,n,e),bd(i,e),!1;case 1:if(t=i.type,s=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(xn===null||!xn.has(s))))return i.flags|=65536,a&=-a,i.lanes|=a,a=Hv(a),qv(a,e,i,n),bd(i,a),!1}i=i.return}while(i!==null);return!1}var $v=Error(E(461)),We=!1;function nt(e,t,i,n){t.child=e===null?jv(t,null,i,n):ks(t,e.child,i,n)}function om(e,t,i,n,a){i=i.render;var s=t.ref;if("ref"in n){var r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}else r=n;return da(t),n=zf(e,t,i,r,s,a),c=Bf(),e!==null&&!We?(If(e,t,a),Fi(e,t,a)):(ue&&c&&Of(t),t.flags|=1,nt(e,t,n,a),t.child)}function lm(e,t,i,n,a){if(e===null){var s=i.type;return typeof s=="function"&&!Lf(s)&&s.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=s,Gv(e,t,s,n,a)):(e=fo(i.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Kf(e,a)){var r=s.memoizedProps;if(i=i.compare,i=i!==null?i:Hr,i(r,n)&&e.ref===t.ref)return Fi(e,t,a)}return t.flags|=1,e=Yi(s,n),e.ref=t.ref,e.return=t,t.child=e}function Gv(e,t,i,n,a){if(e!==null){var s=e.memoizedProps;if(Hr(s,n)&&e.ref===t.ref)if(We=!1,t.pendingProps=n=s,Kf(e,a))e.flags&131072&&(We=!0);else return t.lanes=e.lanes,Fi(e,t,a)}return Pu(e,t,i,n,a)}function Vv(e,t,i){var n=t.pendingProps,a=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if(t.flags&128){if(n=s!==null?s.baseLanes|i:i,e!==null){for(a=t.child=e.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return dm(e,t,n,i)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&po(t,s!==null?s.cachePool:null),s!==null?Zh(t,s):xu(),Uv(t);else return t.lanes=t.childLanes=536870912,dm(e,t,s!==null?s.baseLanes|i:i,i)}else s!==null?(po(t,s.cachePool),Zh(t,s),_n(),t.memoizedState=null):(e!==null&&po(t,null),xu(),_n());return nt(e,t,a,i),t.child}function dm(e,t,i,n){var a=Pf();return a=a===null?null:{parent:Xe._currentValue,pool:a},t.memoizedState={baseLanes:i,cachePool:a},e!==null&&po(t,null),xu(),Uv(t),e!==null&&rc(e,t,n,!0),null}function go(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(E(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Pu(e,t,i,n,a){return da(t),i=zf(e,t,i,n,void 0,a),n=Bf(),e!==null&&!We?(If(e,t,a),Fi(e,t,a)):(ue&&n&&Of(t),t.flags|=1,nt(e,t,i,a),t.child)}function um(e,t,i,n,a,s){return da(t),t.updateQueue=null,i=av(t,n,i,a),nv(e),n=Bf(),e!==null&&!We?(If(e,t,s),Fi(e,t,s)):(ue&&n&&Of(t),t.flags|=1,nt(e,t,i,s),t.child)}function fm(e,t,i,n,a){if(da(t),t.stateNode===null){var s=cs,r=i.contextType;typeof r=="object"&&r!==null&&(s=mt(r)),s=new i(n,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ku,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=n,s.state=t.memoizedState,s.refs={},Nf(t),r=i.contextType,s.context=typeof r=="object"&&r!==null?mt(r):cs,s.state=t.memoizedState,r=i.getDerivedStateFromProps,typeof r=="function"&&(Rd(t,i,r,n),s.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&ku.enqueueReplaceState(s,s.state,null),Or(t,n,s,a),Lr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){s=t.stateNode;var c=t.memoizedProps,o=fa(i,c);s.props=o;var l=s.context,u=i.contextType;r=cs,typeof u=="object"&&u!==null&&(r=mt(u));var d=i.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",c=t.pendingProps!==c,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c||l!==r)&&rm(t,s,n,r),hn=!1;var f=t.memoizedState;s.state=f,Or(t,n,s,a),Lr(),l=t.memoizedState,c||f!==l||hn?(typeof d=="function"&&(Rd(t,i,d,n),l=t.memoizedState),(o=hn||sm(t,i,o,n,f,l,r))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=r,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Du(e,t),r=t.memoizedProps,u=fa(i,r),s.props=u,d=t.pendingProps,f=s.context,l=i.contextType,o=cs,typeof l=="object"&&l!==null&&(o=mt(l)),c=i.getDerivedStateFromProps,(l=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==d||f!==o)&&rm(t,s,n,o),hn=!1,f=t.memoizedState,s.state=f,Or(t,n,s,a),Lr();var p=t.memoizedState;r!==d||f!==p||hn||e!==null&&e.dependencies!==null&&No(e.dependencies)?(typeof c=="function"&&(Rd(t,i,c,n),p=t.memoizedState),(u=hn||sm(t,i,u,n,f,p,o)||e!==null&&e.dependencies!==null&&No(e.dependencies))?(l||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=o,n=u):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,go(e,t),n=(t.flags&128)!==0,s||n?(s=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&n?(t.child=ks(t,e.child,null,a),t.child=ks(t,null,i,a)):nt(e,t,i,a),t.memoizedState=s.state,e=t.child):e=Fi(e,t,a),e}function pm(e,t,i,n){return sc(),t.flags|=256,nt(e,t,i,n),t.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(e){return{baseLanes:e,cachePool:J_()}}function Dd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Qt),e}function Yv(e,t,i){var n=t.pendingProps,a=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(Ke.current&2)!==0),r&&(a=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(ue){if(a?gn(t):_n(),ue){var c=je,o;if(o=c){e:{for(o=c,c=yi;o.nodeType!==8;){if(!c){c=null;break e}if(o=ii(o.nextSibling),o===null){c=null;break e}}c=o}c!==null?(t.memoizedState={dehydrated:c,treeContext:aa!==null?{id:qi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},o=kt(18,null,null,0),o.stateNode=c,o.return=t,t.child=o,vt=t,je=null,o=!0):o=!1}o||la(t)}if(c=t.memoizedState,c!==null&&(c=c.dehydrated,c!==null))return Xu(c)?t.lanes=32:t.lanes=536870912,null;Vi(t)}return c=n.children,n=n.fallback,a?(_n(),a=t.mode,c=$o({mode:"hidden",children:c},a),n=na(n,a,i,null),c.return=t,n.return=t,c.sibling=n,t.child=c,a=t.child,a.memoizedState=Ed(i),a.childLanes=Dd(e,r,i),t.memoizedState=Td,n):(gn(t),Nu(t,c))}if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null)){if(s)t.flags&256?(gn(t),t.flags&=-257,t=Cd(e,t,i)):t.memoizedState!==null?(_n(),t.child=e.child,t.flags|=128,t=null):(_n(),a=n.fallback,c=t.mode,n=$o({mode:"visible",children:n.children},c),a=na(a,c,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,ks(t,e.child,null,i),n=t.child,n.memoizedState=Ed(i),n.childLanes=Dd(e,r,i),t.memoizedState=Td,t=a);else if(gn(t),Xu(c)){if(r=c.nextSibling&&c.nextSibling.dataset,r)var l=r.dgst;r=l,n=Error(E(419)),n.stack="",n.digest=r,qr({value:n,source:null,stack:null}),t=Cd(e,t,i)}else if(We||rc(e,t,i,!1),r=(i&e.childLanes)!==0,We||r){if(r=Te,r!==null&&(n=i&-i,n=n&42?1:yf(n),n=n&(r.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane))throw o.retryLane=n,Is(e,n),jt(r,e,n),$v;c.data==="$?"||Hu(),t=Cd(e,t,i)}else c.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,je=ii(c.nextSibling),vt=t,ue=!0,sa=null,yi=!1,e!==null&&(qt[$t++]=qi,qt[$t++]=$i,qt[$t++]=aa,qi=e.id,$i=e.overflow,aa=t),t=Nu(t,n.children),t.flags|=4096);return t}return a?(_n(),a=n.fallback,c=t.mode,o=e.child,l=o.sibling,n=Yi(o,{mode:"hidden",children:n.children}),n.subtreeFlags=o.subtreeFlags&65011712,l!==null?a=Yi(l,a):(a=na(a,c,i,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,c=e.child.memoizedState,c===null?c=Ed(i):(o=c.cachePool,o!==null?(l=Xe._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=J_(),c={baseLanes:c.baseLanes|i,cachePool:o}),a.memoizedState=c,a.childLanes=Dd(e,r,i),t.memoizedState=Td,n):(gn(t),i=e.child,e=i.sibling,i=Yi(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function Nu(e,t){return t=$o({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function $o(e,t){return e=kt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Cd(e,t,i){return ks(t,e.child,null,i),e=Nu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hm(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),wu(e.return,t,i)}function xd(e,t,i,n,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=a)}function Qv(e,t,i){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(nt(e,t,n.children,i),n=Ke.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hm(e,i,t);else if(e.tag===19)hm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(Le(Ke,n),a){case"forwards":for(i=t.child,a=null;i!==null;)e=i.alternate,e!==null&&Io(e)===null&&(a=i),i=i.sibling;i=a,i===null?(a=t.child,t.child=null):(a=i.sibling,i.sibling=null),xd(t,!1,a,i,s);break;case"backwards":for(i=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Io(e)===null){t.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}xd(t,!0,i,null,s);break;case"together":xd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fi(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(i&t.childLanes))if(e!==null){if(rc(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,i=Yi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Yi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Kf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&No(e)))}function Yw(e,t,i){switch(t.tag){case 3:Co(t,t.stateNode.containerInfo),mn(t,Xe,e.memoizedState.cache),sc();break;case 27:case 5:du(t);break;case 4:Co(t,t.stateNode.containerInfo);break;case 10:mn(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(gn(t),t.flags|=128,null):i&t.child.childLanes?Yv(e,t,i):(gn(t),e=Fi(e,t,i),e!==null?e.sibling:null);gn(t);break;case 19:var a=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(rc(e,t,i,!1),n=(i&t.childLanes)!==0),a){if(n)return Qv(e,t,i);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Le(Ke,Ke.current),n)break;return null;case 22:case 23:return t.lanes=0,Vv(e,t,i);case 24:mn(t,Xe,e.memoizedState.cache)}return Fi(e,t,i)}function Xv(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)We=!0;else{if(!Kf(e,i)&&!(t.flags&128))return We=!1,Yw(e,t,i);We=!!(e.flags&131072)}else We=!1,ue&&t.flags&1048576&&F_(t,Po,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,typeof n=="function")Lf(n)?(e=fa(n,e),t.tag=1,t=fm(null,t,n,e,i)):(t.tag=0,t=Pu(null,t,n,e,i));else{if(n!=null){if(a=n.$$typeof,a===gf){t.tag=11,t=om(null,t,n,e,i);break e}else if(a===_f){t.tag=14,t=lm(null,t,n,e,i);break e}}throw t=ou(n)||n,Error(E(306,t,""))}}return t;case 0:return Pu(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,a=fa(n,t.pendingProps),fm(e,t,n,a,i);case 3:e:{if(Co(t,t.stateNode.containerInfo),e===null)throw Error(E(387));n=t.pendingProps;var s=t.memoizedState;a=s.element,Du(e,t),Or(t,n,null,i);var r=t.memoizedState;if(n=r.cache,mn(t,Xe,n),n!==s.cache&&Ru(t,[Xe],i,!0),Lr(),n=r.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=pm(e,t,n,i);break e}else if(n!==a){a=Yt(Error(E(424)),t),qr(a),t=pm(e,t,n,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(je=ii(e.firstChild),vt=t,ue=!0,sa=null,yi=!0,i=jv(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(sc(),n===a){t=Fi(e,t,i);break e}nt(e,t,n,i)}t=t.child}return t;case 26:return go(e,t),e===null?(i=Om(t.type,null,t.pendingProps,null))?t.memoizedState=i:ue||(i=t.type,e=t.pendingProps,n=Fo(En.current).createElement(i),n[ht]=t,n[Et]=e,st(n,i,e),Je(n),t.stateNode=n):t.memoizedState=Om(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return du(t),e===null&&ue&&(n=t.stateNode=Py(t.type,t.pendingProps,En.current),vt=t,yi=!0,a=je,Bn(t.type)?(Ku=a,je=ii(n.firstChild)):je=a),nt(e,t,t.pendingProps.children,i),go(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ue&&((a=n=je)&&(n=S0(n,t.type,t.pendingProps,yi),n!==null?(t.stateNode=n,vt=t,je=ii(n.firstChild),yi=!1,a=!0):a=!1),a||la(t)),du(t),a=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,n=s.children,Yu(a,s)?n=null:r!==null&&Yu(a,r)&&(t.flags|=32),t.memoizedState!==null&&(a=zf(e,t,zw,null,null,i),Xr._currentValue=a),go(e,t),nt(e,t,n,i),t.child;case 6:return e===null&&ue&&((e=i=je)&&(i=b0(i,t.pendingProps,yi),i!==null?(t.stateNode=i,vt=t,je=null,e=!0):e=!1),e||la(t)),null;case 13:return Yv(e,t,i);case 4:return Co(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ks(t,null,n,i):nt(e,t,n,i),t.child;case 11:return om(e,t,t.type,t.pendingProps,i);case 7:return nt(e,t,t.pendingProps,i),t.child;case 8:return nt(e,t,t.pendingProps.children,i),t.child;case 12:return nt(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,mn(t,t.type,n.value),nt(e,t,n.children,i),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,da(t),a=mt(a),n=n(a),t.flags|=1,nt(e,t,n,i),t.child;case 14:return lm(e,t,t.type,t.pendingProps,i);case 15:return Gv(e,t,t.type,t.pendingProps,i);case 19:return Qv(e,t,i);case 31:return n=t.pendingProps,i=t.mode,n={mode:n.mode,children:n.children},e===null?(i=$o(n,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=Yi(e.child,n),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Vv(e,t,i);case 24:return da(t),n=mt(Xe),e===null?(a=Pf(),a===null&&(a=Te,s=Af(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=i),a=s),t.memoizedState={parent:n,cache:a},Nf(t),mn(t,Xe,a)):(e.lanes&i&&(Du(e,t),Or(t,null,null,i),Lr()),a=e.memoizedState,s=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),mn(t,Xe,n)):(n=s.cache,mn(t,Xe,n),n!==a.cache&&Ru(t,[Xe],i,!0))),nt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(E(156,t.tag))}function Pi(e){e.flags|=4}function mm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Uy(t)){if(t=Kt.current,t!==null&&((ce&4194048)===ce?Ri!==null:(ce&62914560)!==ce&&!(ce&536870912)||t!==Ri))throw xr=Eu,W_;e.flags|=8192}}function Bc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?S_():536870912,e.lanes|=t,As|=t)}function lr(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var a=e.child;a!==null;)i|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)i|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Qw(e,t,i){var n=t.pendingProps;switch(kf(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(t),null;case 1:return ke(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Qi(Xe),Ds(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(cr(t)?Pi(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vh())),ke(t),null;case 26:return i=t.memoizedState,e===null?(Pi(t),i!==null?(ke(t),mm(t,i)):(ke(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Pi(t),ke(t),mm(t,i)):(ke(t),t.flags&=-16777217):(e.memoizedProps!==n&&Pi(t),ke(t),t.flags&=-16777217),null;case 27:xo(t),i=En.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Pi(t);else{if(!n){if(t.stateNode===null)throw Error(E(166));return ke(t),null}e=bi.current,cr(t)?$h(t):(e=Py(a,n,i),t.stateNode=e,Pi(t))}return ke(t),null;case 5:if(xo(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Pi(t);else{if(!n){if(t.stateNode===null)throw Error(E(166));return ke(t),null}if(e=bi.current,cr(t))$h(t);else{switch(a=Fo(En.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?a.createElement(i,{is:n.is}):a.createElement(i)}}e[ht]=t,e[Et]=n;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(st(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Pi(t)}}return ke(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Pi(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(E(166));if(e=En.current,cr(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,a=vt,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}e[ht]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||Oy(e.nodeValue,i)),e||la(t)}else e=Fo(e).createTextNode(n),e[ht]=t,t.stateNode=e}return ke(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=cr(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(E(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(E(317));a[ht]=t}else sc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ke(t),a=!1}else a=Vh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(Vi(t),t):(Vi(t),null)}if(Vi(t),t.flags&128)return t.lanes=i,t;if(i=n!==null,e=e!==null&&e.memoizedState!==null,i){n=t.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool);var s=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Bc(t,t.updateQueue),ke(t),null;case 4:return Ds(),e===null&&np(t.stateNode.containerInfo),ke(t),null;case 10:return Qi(t.type),ke(t),null;case 19:if(et(Ke),a=t.memoizedState,a===null)return ke(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)lr(a,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Io(e),s!==null){for(t.flags|=128,lr(a,!1),e=s.updateQueue,t.updateQueue=e,Bc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)K_(i,e),i=i.sibling;return Le(Ke,Ke.current&1|2),t.child}e=e.sibling}a.tail!==null&&wi()>Vo&&(t.flags|=128,n=!0,lr(a,!1),t.lanes=4194304)}else{if(!n)if(e=Io(s),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Bc(t,e),lr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ue)return ke(t),null}else 2*wi()-a.renderingStartTime>Vo&&i!==536870912&&(t.flags|=128,n=!0,lr(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(e=a.last,e!==null?e.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wi(),t.sibling=null,e=Ke.current,Le(Ke,n?e&1|2:e&1),t):(ke(t),null);case 22:case 23:return Vi(t),jf(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?i&536870912&&!(t.flags&128)&&(ke(t),t.subtreeFlags&6&&(t.flags|=8192)):ke(t),i=t.updateQueue,i!==null&&Bc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&et(ra),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Qi(Xe),ke(t),null;case 25:return null;case 30:return null}throw Error(E(156,t.tag))}function Xw(e,t){switch(kf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qi(Xe),Ds(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xo(t),null;case 13:if(Vi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));sc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(Ke),null;case 4:return Ds(),null;case 10:return Qi(t.type),null;case 22:case 23:return Vi(t),jf(),e!==null&&et(ra),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qi(Xe),null;case 25:return null;default:return null}}function Kv(e,t){switch(kf(t),t.tag){case 3:Qi(Xe),Ds();break;case 26:case 27:case 5:xo(t);break;case 4:Ds();break;case 13:Vi(t);break;case 19:et(Ke);break;case 10:Qi(t.type);break;case 22:case 23:Vi(t),jf(),e!==null&&et(ra);break;case 24:Qi(Xe)}}function uc(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var a=n.next;i=a;do{if((i.tag&e)===e){n=void 0;var s=i.create,r=i.inst;n=s(),r.destroy=n}i=i.next}while(i!==a)}}catch(c){Re(t,t.return,c)}}function jn(e,t,i){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&e)===e){var r=n.inst,c=r.destroy;if(c!==void 0){r.destroy=void 0,a=t;var o=i,l=c;try{l()}catch(u){Re(a,o,u)}}}n=n.next}while(n!==s)}}catch(u){Re(t,t.return,u)}}function Fv(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{iv(t,i)}catch(n){Re(e,e.return,n)}}}function Zv(e,t,i){i.props=fa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){Re(e,t,n)}}function Ar(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(a){Re(e,t,a)}}function Si(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(a){Re(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(a){Re(e,t,a)}else i.current=null}function Jv(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(a){Re(e,e.return,a)}}function Md(e,t,i){try{var n=e.stateNode;m0(n,e.type,i,t),n[Et]=t}catch(a){Re(e,e.return,a)}}function Wv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Bn(e.type)||e.tag===4}function Ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Bn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ju(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=vl));else if(n!==4&&(n===27&&Bn(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(ju(e,t,i),e=e.sibling;e!==null;)ju(e,t,i),e=e.sibling}function Go(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&Bn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Go(e,t,i),e=e.sibling;e!==null;)Go(e,t,i),e=e.sibling}function ey(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);st(t,n,i),t[ht]=e,t[Et]=i}catch(s){Re(e,e.return,s)}}var Ii=!1,He=!1,Od=!1,gm=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Kw(e,t){if(e=e.containerInfo,Gu=el,e=H_(e),Cf(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var r=0,c=-1,o=-1,l=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==i||a!==0&&d.nodeType!==3||(c=r+a),d!==s||n!==0&&d.nodeType!==3||(o=r+n),d.nodeType===3&&(r+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===i&&++l===a&&(c=r),f===s&&++u===n&&(o=r),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}i=c===-1||o===-1?null:{start:c,end:o}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vu={focusedElem:e,selectionRange:i},el=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){switch(t=Ze,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,i=t,a=s.memoizedProps,s=s.memoizedState,n=i.stateNode;try{var y=fa(i.type,a,i.elementType===i.type);e=n.getSnapshotBeforeUpdate(y,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(b){Re(i,i.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Qu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(E(163))}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}}function ty(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:cn(e,i),n&4&&uc(5,i);break;case 1:if(cn(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(r){Re(i,i.return,r)}else{var a=fa(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Re(i,i.return,r)}}n&64&&Fv(i),n&512&&Ar(i,i.return);break;case 3:if(cn(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{iv(e,t)}catch(r){Re(i,i.return,r)}}break;case 27:t===null&&n&4&&ey(i);case 26:case 5:cn(e,i),t===null&&n&4&&Jv(i),n&512&&Ar(i,i.return);break;case 12:cn(e,i);break;case 13:cn(e,i),n&4&&ay(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=a0.bind(null,i),w0(e,i))));break;case 22:if(n=i.memoizedState!==null||Ii,!n){t=t!==null&&t.memoizedState!==null||He,a=Ii;var s=He;Ii=n,(He=t)&&!s?fn(e,i,(i.subtreeFlags&8772)!==0):cn(e,i),Ii=a,He=s}break;case 30:break;default:cn(e,i)}}function iy(e){var t=e.alternate;t!==null&&(e.alternate=null,iy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&bf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xe=null,Rt=!1;function Ni(e,t,i){for(i=i.child;i!==null;)ny(e,t,i),i=i.sibling}function ny(e,t,i){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(ec,i)}catch{}switch(i.tag){case 26:He||Si(i,t),Ni(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:He||Si(i,t);var n=xe,a=Rt;Bn(i.type)&&(xe=i.stateNode,Rt=!1),Ni(e,t,i),Ur(i.stateNode),xe=n,Rt=a;break;case 5:He||Si(i,t);case 6:if(n=xe,a=Rt,xe=null,Ni(e,t,i),xe=n,Rt=a,xe!==null)if(Rt)try{(xe.nodeType===9?xe.body:xe.nodeName==="HTML"?xe.ownerDocument.body:xe).removeChild(i.stateNode)}catch(s){Re(i,t,s)}else try{xe.removeChild(i.stateNode)}catch(s){Re(i,t,s)}break;case 18:xe!==null&&(Rt?(e=xe,xm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Zr(e)):xm(xe,i.stateNode));break;case 4:n=xe,a=Rt,xe=i.stateNode.containerInfo,Rt=!0,Ni(e,t,i),xe=n,Rt=a;break;case 0:case 11:case 14:case 15:He||jn(2,i,t),He||jn(4,i,t),Ni(e,t,i);break;case 1:He||(Si(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&Zv(i,t,n)),Ni(e,t,i);break;case 21:Ni(e,t,i);break;case 22:He=(n=He)||i.memoizedState!==null,Ni(e,t,i),He=n;break;default:Ni(e,t,i)}}function ay(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Zr(e)}catch(i){Re(t,t.return,i)}}function Fw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gm),t;default:throw Error(E(435,e.tag))}}function kd(e,t){var i=Fw(e);t.forEach(function(n){var a=s0.bind(null,e,n);i.has(n)||(i.add(n),n.then(a,a))})}function xt(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var a=i[n],s=e,r=t,c=r;e:for(;c!==null;){switch(c.tag){case 27:if(Bn(c.type)){xe=c.stateNode,Rt=!1;break e}break;case 5:xe=c.stateNode,Rt=!1;break e;case 3:case 4:xe=c.stateNode.containerInfo,Rt=!0;break e}c=c.return}if(xe===null)throw Error(E(160));ny(s,r,a),xe=null,Rt=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)sy(t,e),t=t.sibling}var ei=null;function sy(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),Mt(e),n&4&&(jn(3,e,e.return),uc(3,e),jn(5,e,e.return));break;case 1:xt(t,e),Mt(e),n&512&&(He||i===null||Si(i,i.return)),n&64&&Ii&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var a=ei;if(xt(t,e),Mt(e),n&512&&(He||i===null||Si(i,i.return)),n&4){var s=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){e:{n=e.type,i=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":s=a.getElementsByTagName("title")[0],(!s||s[nc]||s[ht]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),st(s,n,i),s[ht]=e,Je(s),n=s;break e;case"link":var r=Am("link","href",a).get(n+(i.href||""));if(r){for(var c=0;c<r.length;c++)if(s=r[c],s.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&s.getAttribute("rel")===(i.rel==null?null:i.rel)&&s.getAttribute("title")===(i.title==null?null:i.title)&&s.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){r.splice(c,1);break t}}s=a.createElement(n),st(s,n,i),a.head.appendChild(s);break;case"meta":if(r=Am("meta","content",a).get(n+(i.content||""))){for(c=0;c<r.length;c++)if(s=r[c],s.getAttribute("content")===(i.content==null?null:""+i.content)&&s.getAttribute("name")===(i.name==null?null:i.name)&&s.getAttribute("property")===(i.property==null?null:i.property)&&s.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&s.getAttribute("charset")===(i.charSet==null?null:i.charSet)){r.splice(c,1);break t}}s=a.createElement(n),st(s,n,i),a.head.appendChild(s);break;default:throw Error(E(468,n))}s[ht]=e,Je(s),n=s}e.stateNode=n}else Pm(a,e.type,e.stateNode);else e.stateNode=km(a,n,e.memoizedProps);else s!==n?(s===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):s.count--,n===null?Pm(a,e.type,e.stateNode):km(a,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Md(e,e.memoizedProps,i.memoizedProps)}break;case 27:xt(t,e),Mt(e),n&512&&(He||i===null||Si(i,i.return)),i!==null&&n&4&&Md(e,e.memoizedProps,i.memoizedProps);break;case 5:if(xt(t,e),Mt(e),n&512&&(He||i===null||Si(i,i.return)),e.flags&32){a=e.stateNode;try{xs(a,"")}catch(p){Re(e,e.return,p)}}n&4&&e.stateNode!=null&&(a=e.memoizedProps,Md(e,a,i!==null?i.memoizedProps:a)),n&1024&&(Od=!0);break;case 6:if(xt(t,e),Mt(e),n&4){if(e.stateNode===null)throw Error(E(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(p){Re(e,e.return,p)}}break;case 3:if(yo=null,a=ei,ei=Zo(t.containerInfo),xt(t,e),ei=a,Mt(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Zr(t.containerInfo)}catch(p){Re(e,e.return,p)}Od&&(Od=!1,ry(e));break;case 4:n=ei,ei=Zo(e.stateNode.containerInfo),xt(t,e),Mt(e),ei=n;break;case 12:xt(t,e),Mt(e);break;case 13:xt(t,e),Mt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ep=wi()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,kd(e,n)));break;case 22:a=e.memoizedState!==null;var o=i!==null&&i.memoizedState!==null,l=Ii,u=He;if(Ii=l||a,He=u||o,xt(t,e),He=u,Ii=l,Mt(e),n&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(i===null||o||Ii||He||Yn(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){o=i=t;try{if(s=o.stateNode,a)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{c=o.stateNode;var d=o.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;c.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(p){Re(o,o.return,p)}}}else if(t.tag===6){if(i===null){o=t;try{o.stateNode.nodeValue=a?"":o.memoizedProps}catch(p){Re(o,o.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,kd(e,i))));break;case 19:xt(t,e),Mt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,kd(e,n)));break;case 30:break;case 21:break;default:xt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(Wv(n)){i=n;break}n=n.return}if(i==null)throw Error(E(160));switch(i.tag){case 27:var a=i.stateNode,s=Ld(e);Go(e,s,a);break;case 5:var r=i.stateNode;i.flags&32&&(xs(r,""),i.flags&=-33);var c=Ld(e);Go(e,c,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Ld(e);ju(e,l,o);break;default:throw Error(E(161))}}catch(u){Re(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ry(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ry(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function cn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ty(e,t.alternate,t),t=t.sibling}function Yn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:jn(4,t,t.return),Yn(t);break;case 1:Si(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Zv(t,t.return,i),Yn(t);break;case 27:Ur(t.stateNode);case 26:case 5:Si(t,t.return),Yn(t);break;case 22:t.memoizedState===null&&Yn(t);break;case 30:Yn(t);break;default:Yn(t)}e=e.sibling}}function fn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,a=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:fn(a,s,i),uc(4,s);break;case 1:if(fn(a,s,i),n=s,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(l){Re(n,n.return,l)}if(n=s,a=n.updateQueue,a!==null){var c=n.stateNode;try{var o=a.shared.hiddenCallbacks;if(o!==null)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)tv(o[a],c)}catch(l){Re(n,n.return,l)}}i&&r&64&&Fv(s),Ar(s,s.return);break;case 27:ey(s);case 26:case 5:fn(a,s,i),i&&n===null&&r&4&&Jv(s),Ar(s,s.return);break;case 12:fn(a,s,i);break;case 13:fn(a,s,i),i&&r&4&&ay(a,s);break;case 22:s.memoizedState===null&&fn(a,s,i),Ar(s,s.return);break;case 30:break;default:fn(a,s,i)}t=t.sibling}}function Ff(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&cc(i))}function Zf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cc(e))}function ci(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cy(e,t,i,n),t=t.sibling}function cy(e,t,i,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:ci(e,t,i,n),a&2048&&uc(9,t);break;case 1:ci(e,t,i,n);break;case 3:ci(e,t,i,n),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cc(e)));break;case 12:if(a&2048){ci(e,t,i,n),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,c=s.onPostCommit;typeof c=="function"&&c(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Re(t,t.return,o)}}else ci(e,t,i,n);break;case 13:ci(e,t,i,n);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?ci(e,t,i,n):Pr(e,t):s._visibility&2?ci(e,t,i,n):(s._visibility|=2,Za(e,t,i,n,(t.subtreeFlags&10256)!==0)),a&2048&&Ff(r,t);break;case 24:ci(e,t,i,n),a&2048&&Zf(t.alternate,t);break;default:ci(e,t,i,n)}}function Za(e,t,i,n,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,r=t,c=i,o=n,l=r.flags;switch(r.tag){case 0:case 11:case 15:Za(s,r,c,o,a),uc(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?Za(s,r,c,o,a):Pr(s,r):(u._visibility|=2,Za(s,r,c,o,a)),a&&l&2048&&Ff(r.alternate,r);break;case 24:Za(s,r,c,o,a),a&&l&2048&&Zf(r.alternate,r);break;default:Za(s,r,c,o,a)}t=t.sibling}}function Pr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,a=n.flags;switch(n.tag){case 22:Pr(i,n),a&2048&&Ff(n.alternate,n);break;case 24:Pr(i,n),a&2048&&Zf(n.alternate,n);break;default:Pr(i,n)}t=t.sibling}}var br=8192;function xa(e){if(e.subtreeFlags&br)for(e=e.child;e!==null;)oy(e),e=e.sibling}function oy(e){switch(e.tag){case 26:xa(e),e.flags&br&&e.memoizedState!==null&&N0(ei,e.memoizedState,e.memoizedProps);break;case 5:xa(e);break;case 3:case 4:var t=ei;ei=Zo(e.stateNode.containerInfo),xa(e),ei=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=br,br=16777216,xa(e),br=t):xa(e));break;default:xa(e)}}function ly(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function dr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Ze=n,uy(n,e)}ly(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dy(e),e=e.sibling}function dy(e){switch(e.tag){case 0:case 11:case 15:dr(e),e.flags&2048&&jn(9,e,e.return);break;case 3:dr(e);break;case 12:dr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,_o(e)):dr(e);break;default:dr(e)}}function _o(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Ze=n,uy(n,e)}ly(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:jn(8,t,t.return),_o(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,_o(t));break;default:_o(t)}e=e.sibling}}function uy(e,t){for(;Ze!==null;){var i=Ze;switch(i.tag){case 0:case 11:case 15:jn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:cc(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,Ze=n;else e:for(i=e;Ze!==null;){n=Ze;var a=n.sibling,s=n.return;if(iy(n),n===i){Ze=null;break e}if(a!==null){a.return=s,Ze=a;break e}Ze=s}}}var Zw={getCacheForType:function(e){var t=mt(Xe),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},Jw=typeof WeakMap=="function"?WeakMap:Map,ge=0,Te=null,ie=null,ce=0,me=0,Lt=null,wn=!1,Hs=!1,Jf=!1,Zi=0,Ue=0,Un=0,ca=0,Wf=0,Qt=0,As=0,Nr=null,Tt=null,Uu=!1,ep=0,Vo=1/0,Yo=null,xn=null,at=0,Mn=null,Ps=null,Ss=0,zu=0,Bu=null,fy=null,jr=0,Iu=null;function Nt(){if(ge&2&&ce!==0)return ce&-ce;if(Q.T!==null){var e=Ms;return e!==0?e:ip()}return R_()}function py(){Qt===0&&(Qt=!(ce&536870912)||ue?y_():536870912);var e=Kt.current;return e!==null&&(e.flags|=32),Qt}function jt(e,t,i){(e===Te&&(me===2||me===9)||e.cancelPendingCommit!==null)&&(Ns(e,0),Rn(e,ce,Qt,!1)),ic(e,i),(!(ge&2)||e!==Te)&&(e===Te&&(!(ge&2)&&(ca|=i),Ue===4&&Rn(e,ce,Qt,!1)),Ci(e))}function hy(e,t,i){if(ge&6)throw Error(E(327));var n=!i&&(t&124)===0&&(t&e.expiredLanes)===0||tc(e,t),a=n?t0(e,t):Ad(e,t,!0),s=n;do{if(a===0){Hs&&!n&&Rn(e,t,0,!1);break}else{if(i=e.current.alternate,s&&!Ww(i)){a=Ad(e,t,!1),s=!1;continue}if(a===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var c=e;a=Nr;var o=c.current.memoizedState.isDehydrated;if(o&&(Ns(c,r).flags|=256),r=Ad(c,r,!1),r!==2){if(Jf&&!o){c.errorRecoveryDisabledLanes|=s,ca|=s,a=4;break e}s=Tt,Tt=a,s!==null&&(Tt===null?Tt=s:Tt.push.apply(Tt,s))}a=r}if(s=!1,a!==2)continue}}if(a===1){Ns(e,0),Rn(e,t,0,!0);break}e:{switch(n=e,s=a,s){case 0:case 1:throw Error(E(345));case 4:if((t&4194048)!==t)break;case 6:Rn(n,t,Qt,!wn);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(E(329))}if((t&62914560)===t&&(a=ep+300-wi(),10<a)){if(Rn(n,t,Qt,!wn),sl(n,0,!0)!==0)break e;n.timeoutHandle=Ay(_m.bind(null,n,i,Tt,Yo,Uu,t,Qt,ca,As,wn,s,2,-0,0),a);break e}_m(n,i,Tt,Yo,Uu,t,Qt,ca,As,wn,s,0,-0,0)}}break}while(1);Ci(e)}function _m(e,t,i,n,a,s,r,c,o,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(Qr={stylesheets:null,count:0,unsuspend:P0},oy(t),d=j0(),d!==null)){e.cancelPendingCommit=d(ym.bind(null,e,t,s,i,n,a,r,c,o,u,1,f,p)),Rn(e,s,r,!l);return}ym(e,t,s,i,n,a,r,c,o)}function Ww(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var a=i[n],s=a.getSnapshot;a=a.value;try{if(!Ut(s(),a))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rn(e,t,i,n){t&=~Wf,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var s=31-Pt(a),r=1<<s;n[s]=-1,a&=~r}i!==0&&b_(e,i,t)}function ml(){return ge&6?!0:(fc(0,!1),!1)}function tp(){if(ie!==null){if(me===0)var e=ie.return;else e=ie,Gi=va=null,Hf(e),ys=null,Gr=0,e=ie;for(;e!==null;)Kv(e.alternate,e),e=e.return;ie=null}}function Ns(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,_0(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),tp(),Te=e,ie=i=Yi(e.current,null),ce=t,me=0,Lt=null,wn=!1,Hs=tc(e,t),Jf=!1,As=Qt=Wf=ca=Un=Ue=0,Tt=Nr=null,Uu=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var a=31-Pt(n),s=1<<a;t|=e[a],n&=~s}return Zi=t,ll(),i}function my(e,t){W=null,Q.H=Bo,t===oc||t===ul?(t=Kh(),me=3):t===W_?(t=Kh(),me=4):me=t===$v?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Lt=t,ie===null&&(Ue=1,qo(e,Yt(t,e.current)))}function gy(){var e=Q.H;return Q.H=Bo,e===null?Bo:e}function _y(){var e=Q.A;return Q.A=Zw,e}function Hu(){Ue=4,wn||(ce&4194048)!==ce&&Kt.current!==null||(Hs=!0),!(Un&134217727)&&!(ca&134217727)||Te===null||Rn(Te,ce,Qt,!1)}function Ad(e,t,i){var n=ge;ge|=2;var a=gy(),s=_y();(Te!==e||ce!==t)&&(Yo=null,Ns(e,t)),t=!1;var r=Ue;e:do try{if(me!==0&&ie!==null){var c=ie,o=Lt;switch(me){case 8:tp(),r=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(t=!0);var l=me;if(me=0,Lt=null,ds(e,c,o,l),i&&Hs){r=0;break e}break;default:l=me,me=0,Lt=null,ds(e,c,o,l)}}e0(),r=Ue;break}catch(u){my(e,u)}while(1);return t&&e.shellSuspendCounter++,Gi=va=null,ge=n,Q.H=a,Q.A=s,ie===null&&(Te=null,ce=0,ll()),r}function e0(){for(;ie!==null;)vy(ie)}function t0(e,t){var i=ge;ge|=2;var n=gy(),a=_y();Te!==e||ce!==t?(Yo=null,Vo=wi()+500,Ns(e,t)):Hs=tc(e,t);e:do try{if(me!==0&&ie!==null){t=ie;var s=Lt;t:switch(me){case 1:me=0,Lt=null,ds(e,t,s,1);break;case 2:case 9:if(Xh(s)){me=0,Lt=null,vm(t);break}t=function(){me!==2&&me!==9||Te!==e||(me=7),Ci(e)},s.then(t,t);break e;case 3:me=7;break e;case 4:me=5;break e;case 7:Xh(s)?(me=0,Lt=null,vm(t)):(me=0,Lt=null,ds(e,t,s,7));break;case 5:var r=null;switch(ie.tag){case 26:r=ie.memoizedState;case 5:case 27:var c=ie;if(!r||Uy(r)){me=0,Lt=null;var o=c.sibling;if(o!==null)ie=o;else{var l=c.return;l!==null?(ie=l,gl(l)):ie=null}break t}}me=0,Lt=null,ds(e,t,s,5);break;case 6:me=0,Lt=null,ds(e,t,s,6);break;case 8:tp(),Ue=6;break e;default:throw Error(E(462))}}i0();break}catch(u){my(e,u)}while(1);return Gi=va=null,Q.H=n,Q.A=a,ge=i,ie!==null?0:(Te=null,ce=0,ll(),Ue)}function i0(){for(;ie!==null&&!Tb();)vy(ie)}function vy(e){var t=Xv(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,t===null?gl(e):ie=t}function vm(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=um(i,t,t.pendingProps,t.type,void 0,ce);break;case 11:t=um(i,t,t.pendingProps,t.type.render,t.ref,ce);break;case 5:Hf(t);default:Kv(i,t),t=ie=K_(t,Zi),t=Xv(i,t,Zi)}e.memoizedProps=e.pendingProps,t===null?gl(e):ie=t}function ds(e,t,i,n){Gi=va=null,Hf(t),ys=null,Gr=0;var a=t.return;try{if(Vw(e,a,t,i,ce)){Ue=1,qo(e,Yt(i,e.current)),ie=null;return}}catch(s){if(a!==null)throw ie=a,s;Ue=1,qo(e,Yt(i,e.current)),ie=null;return}t.flags&32768?(ue||n===1?e=!0:Hs||ce&536870912?e=!1:(wn=e=!0,(n===2||n===9||n===3||n===6)&&(n=Kt.current,n!==null&&n.tag===13&&(n.flags|=16384))),yy(t,e)):gl(t)}function gl(e){var t=e;do{if(t.flags&32768){yy(t,wn);return}e=t.return;var i=Qw(t.alternate,t,Zi);if(i!==null){ie=i;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);Ue===0&&(Ue=5)}function yy(e,t){do{var i=Xw(e.alternate,e);if(i!==null){i.flags&=32767,ie=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ie=e;return}ie=e=i}while(e!==null);Ue=6,ie=null}function ym(e,t,i,n,a,s,r,c,o){e.cancelPendingCommit=null;do _l();while(at!==0);if(ge&6)throw Error(E(327));if(t!==null){if(t===e.current)throw Error(E(177));if(s=t.lanes|t.childLanes,s|=xf,Pb(e,i,s,r,c,o),e===Te&&(ie=Te=null,ce=0),Ps=t,Mn=e,Ss=i,zu=s,Bu=a,fy=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,r0(Mo,function(){return Ty(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=Q.T,Q.T=null,a=fe.p,fe.p=2,r=ge,ge|=4;try{Kw(e,t,i)}finally{ge=r,fe.p=a,Q.T=n}}at=1,Sy(),by(),wy()}}function Sy(){if(at===1){at=0;var e=Mn,t=Ps,i=(t.flags&13878)!==0;if(t.subtreeFlags&13878||i){i=Q.T,Q.T=null;var n=fe.p;fe.p=2;var a=ge;ge|=4;try{sy(t,e);var s=Vu,r=H_(e.containerInfo),c=s.focusedElem,o=s.selectionRange;if(r!==c&&c&&c.ownerDocument&&I_(c.ownerDocument.documentElement,c)){if(o!==null&&Cf(c)){var l=o.start,u=o.end;if(u===void 0&&(u=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(u,c.value.length);else{var d=c.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),y=c.textContent.length,b=Math.min(o.start,y),w=o.end===void 0?b:Math.min(o.end,y);!p.extend&&b>w&&(r=w,w=b,b=r);var m=Ih(c,b),v=Ih(c,w);if(m&&v&&(p.rangeCount!==1||p.anchorNode!==m.node||p.anchorOffset!==m.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var h=d.createRange();h.setStart(m.node,m.offset),p.removeAllRanges(),b>w?(p.addRange(h),p.extend(v.node,v.offset)):(h.setEnd(v.node,v.offset),p.addRange(h))}}}}for(d=[],p=c;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<d.length;c++){var g=d[c];g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}el=!!Gu,Vu=Gu=null}finally{ge=a,fe.p=n,Q.T=i}}e.current=t,at=2}}function by(){if(at===2){at=0;var e=Mn,t=Ps,i=(t.flags&8772)!==0;if(t.subtreeFlags&8772||i){i=Q.T,Q.T=null;var n=fe.p;fe.p=2;var a=ge;ge|=4;try{ty(e,t.alternate,t)}finally{ge=a,fe.p=n,Q.T=i}}at=3}}function wy(){if(at===4||at===3){at=0,Eb();var e=Mn,t=Ps,i=Ss,n=fy;t.subtreeFlags&10256||t.flags&10256?at=5:(at=0,Ps=Mn=null,Ry(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(xn=null),Sf(i),t=t.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=Q.T,a=fe.p,fe.p=2,Q.T=null;try{for(var s=e.onRecoverableError,r=0;r<n.length;r++){var c=n[r];s(c.value,{componentStack:c.stack})}}finally{Q.T=t,fe.p=a}}Ss&3&&_l(),Ci(e),a=e.pendingLanes,i&4194090&&a&42?e===Iu?jr++:(jr=0,Iu=e):jr=0,fc(0,!1)}}function Ry(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,cc(t)))}function _l(e){return Sy(),by(),wy(),Ty()}function Ty(){if(at!==5)return!1;var e=Mn,t=zu;zu=0;var i=Sf(Ss),n=Q.T,a=fe.p;try{fe.p=32>i?32:i,Q.T=null,i=Bu,Bu=null;var s=Mn,r=Ss;if(at=0,Ps=Mn=null,Ss=0,ge&6)throw Error(E(331));var c=ge;if(ge|=4,dy(s.current),cy(s,s.current,r,i),ge=c,fc(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(ec,s)}catch{}return!0}finally{fe.p=a,Q.T=n,Ry(e,t)}}function Sm(e,t,i){t=Yt(i,t),t=Au(e.stateNode,t,2),e=Cn(e,t,2),e!==null&&(ic(e,2),Ci(e))}function Re(e,t,i){if(e.tag===3)Sm(e,e,i);else for(;t!==null;){if(t.tag===3){Sm(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xn===null||!xn.has(n))){e=Yt(i,e),i=Hv(2),n=Cn(t,i,2),n!==null&&(qv(i,n,t,e),ic(n,2),Ci(n));break}}t=t.return}}function Pd(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new Jw;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(i)||(Jf=!0,a.add(i),e=n0.bind(null,e,t,i),t.then(e,e))}function n0(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Te===e&&(ce&i)===i&&(Ue===4||Ue===3&&(ce&62914560)===ce&&300>wi()-ep?!(ge&2)&&Ns(e,0):Wf|=i,As===ce&&(As=0)),Ci(e)}function Ey(e,t){t===0&&(t=S_()),e=Is(e,t),e!==null&&(ic(e,t),Ci(e))}function a0(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ey(e,i)}function s0(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(i=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(E(314))}n!==null&&n.delete(t),Ey(e,i)}function r0(e,t){return vf(e,t)}var Qo=null,Ja=null,qu=!1,Xo=!1,Nd=!1,oa=0;function Ci(e){e!==Ja&&e.next===null&&(Ja===null?Qo=Ja=e:Ja=Ja.next=e),Xo=!0,qu||(qu=!0,o0())}function fc(e,t){if(!Nd&&Xo){Nd=!0;do for(var i=!1,n=Qo;n!==null;){if(!t)if(e!==0){var a=n.pendingLanes;if(a===0)var s=0;else{var r=n.suspendedLanes,c=n.pingedLanes;s=(1<<31-Pt(42|e)+1)-1,s&=a&~(r&~c),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(i=!0,bm(n,s))}else s=ce,s=sl(n,n===Te?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(s&3)||tc(n,s)||(i=!0,bm(n,s));n=n.next}while(i);Nd=!1}}function c0(){Dy()}function Dy(){Xo=qu=!1;var e=0;oa!==0&&(g0()&&(e=oa),oa=0);for(var t=wi(),i=null,n=Qo;n!==null;){var a=n.next,s=Cy(n,t);s===0?(n.next=null,i===null?Qo=a:i.next=a,a===null&&(Ja=i)):(i=n,(e!==0||s&3)&&(Xo=!0)),n=a}fc(e,!1)}function Cy(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-Pt(s),c=1<<r,o=a[r];o===-1?(!(c&i)||c&n)&&(a[r]=Ab(c,t)):o<=t&&(e.expiredLanes|=c),s&=~c}if(t=Te,i=ce,i=sl(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(me===2||me===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&cd(n),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||tc(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&cd(n),Sf(i)){case 2:case 8:i=__;break;case 32:i=Mo;break;case 268435456:i=v_;break;default:i=Mo}return n=xy.bind(null,e),i=vf(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&cd(n),e.callbackPriority=2,e.callbackNode=null,2}function xy(e,t){if(at!==0&&at!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(_l()&&e.callbackNode!==i)return null;var n=ce;return n=sl(e,e===Te?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(hy(e,n,t),Cy(e,wi()),e.callbackNode!=null&&e.callbackNode===i?xy.bind(null,e):null)}function bm(e,t){if(_l())return null;hy(e,t,!0)}function o0(){v0(function(){ge&6?vf(g_,c0):Dy()})}function ip(){return oa===0&&(oa=y_()),oa}function wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:oo(""+e)}function Rm(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function l0(e,t,i,n,a){if(t==="submit"&&i&&i.stateNode===a){var s=wm((a[Et]||null).action),r=n.submitter;r&&(t=(t=r[Et]||null)?wm(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var c=new rl("action","action",null,n,a);e.push({event:c,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(oa!==0){var o=r?Rm(a,r):new FormData(a);Ou(i,{pending:!0,data:o,method:a.method,action:s},null,o)}}else typeof s=="function"&&(c.preventDefault(),o=r?Rm(a,r):new FormData(a),Ou(i,{pending:!0,data:o,method:a.method,action:s},s,o))},currentTarget:a}]})}}for(var jd=0;jd<yu.length;jd++){var Ud=yu[jd],d0=Ud.toLowerCase(),u0=Ud[0].toUpperCase()+Ud.slice(1);ai(d0,"on"+u0)}ai($_,"onAnimationEnd");ai(G_,"onAnimationIteration");ai(V_,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(xw,"onTransitionRun");ai(Mw,"onTransitionStart");ai(Lw,"onTransitionCancel");ai(Y_,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vr));function My(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var r=n.length-1;0<=r;r--){var c=n[r],o=c.instance,l=c.currentTarget;if(c=c.listener,o!==s&&a.isPropagationStopped())break e;s=c,a.currentTarget=l;try{s(a)}catch(u){Ho(u)}a.currentTarget=null,s=o}else for(r=0;r<n.length;r++){if(c=n[r],o=c.instance,l=c.currentTarget,c=c.listener,o!==s&&a.isPropagationStopped())break e;s=c,a.currentTarget=l;try{s(a)}catch(u){Ho(u)}a.currentTarget=null,s=o}}}}function te(e,t){var i=t[fu];i===void 0&&(i=t[fu]=new Set);var n=e+"__bubble";i.has(n)||(Ly(t,e,2,!1),i.add(n))}function zd(e,t,i){var n=0;t&&(n|=4),Ly(i,e,n,t)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function np(e){if(!e[Ic]){e[Ic]=!0,T_.forEach(function(i){i!=="selectionchange"&&(f0.has(i)||zd(i,!1,e),zd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ic]||(t[Ic]=!0,zd("selectionchange",!1,t))}}function Ly(e,t,i,n){switch(qy(t)){case 2:var a=B0;break;case 8:a=I0;break;default:a=cp}i=a.bind(null,t,i,e),a=void 0,!gu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,i,{capture:!0,passive:a}):e.addEventListener(t,i,!0):a!==void 0?e.addEventListener(t,i,{passive:a}):e.addEventListener(t,i,!1)}function Bd(e,t,i,n,a){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var c=n.stateNode.containerInfo;if(c===a)break;if(r===4)for(r=n.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;c!==null;){if(r=ts(c),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){n=s=r;continue e}c=c.parentNode}}n=n.return}k_(function(){var l=s,u=Rf(i),d=[];e:{var f=Q_.get(e);if(f!==void 0){var p=rl,y=e;switch(e){case"keypress":if(uo(i)===0)break e;case"keydown":case"keyup":p=rw;break;case"focusin":y="focus",p=md;break;case"focusout":y="blur",p=md;break;case"beforeblur":case"afterblur":p=md;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lw;break;case $_:case G_:case V_:p=Zb;break;case Y_:p=uw;break;case"scroll":case"scrollend":p=Yb;break;case"wheel":p=pw;break;case"copy":case"cut":case"paste":p=Wb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kh;break;case"toggle":case"beforetoggle":p=mw}var b=(t&4)!==0,w=!b&&(e==="scroll"||e==="scrollend"),m=b?f!==null?f+"Capture":null:f;b=[];for(var v=l,h;v!==null;){var g=v;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||m===null||(g=Br(v,m),g!=null&&b.push(Yr(v,g,h))),w)break;v=v.return}0<b.length&&(f=new p(f,y,null,i,u),d.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&i!==mu&&(y=i.relatedTarget||i.fromElement)&&(ts(y)||y[zs]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=i.relatedTarget||i.toElement,p=l,y=y?ts(y):null,y!==null&&(w=Wr(y),b=y.tag,y!==w||b!==5&&b!==27&&b!==6)&&(y=null)):(p=null,y=l),p!==y)){if(b=Lh,g="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(b=kh,g="onPointerLeave",m="onPointerEnter",v="pointer"),w=p==null?f:Sr(p),h=y==null?f:Sr(y),f=new b(g,v+"leave",p,i,u),f.target=w,f.relatedTarget=h,g=null,ts(u)===l&&(b=new b(m,v+"enter",y,i,u),b.target=h,b.relatedTarget=w,g=b),w=g,p&&y)t:{for(b=p,m=y,v=0,h=b;h;h=Ma(h))v++;for(h=0,g=m;g;g=Ma(g))h++;for(;0<v-h;)b=Ma(b),v--;for(;0<h-v;)m=Ma(m),h--;for(;v--;){if(b===m||m!==null&&b===m.alternate)break t;b=Ma(b),m=Ma(m)}b=null}else b=null;p!==null&&Tm(d,f,p,b,!1),y!==null&&w!==null&&Tm(d,w,y,b,!0)}}e:{if(f=l?Sr(l):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=jh;else if(Nh(f))if(z_)S=Ew;else{S=Rw;var R=ww}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?l&&wf(l.elementType)&&(S=jh):S=Tw;if(S&&(S=S(e,l))){U_(d,S,i,u);break e}R&&R(e,f,l),e==="focusout"&&l&&f.type==="number"&&l.memoizedProps.value!=null&&hu(f,"number",f.value)}switch(R=l?Sr(l):window,e){case"focusin":(Nh(R)||R.contentEditable==="true")&&(as=R,_u=l,Dr=null);break;case"focusout":Dr=_u=as=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Hh(d,i,u);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Hh(d,i,u)}var x;if(Df)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else ns?N_(e,i)&&(O="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(O="onCompositionStart");O&&(P_&&i.locale!=="ko"&&(ns||O!=="onCompositionStart"?O==="onCompositionEnd"&&ns&&(x=A_()):(bn=u,Tf="value"in bn?bn.value:bn.textContent,ns=!0)),R=Ko(l,O),0<R.length&&(O=new Oh(O,e,null,i,u),d.push({event:O,listeners:R}),x?O.data=x:(x=j_(i),x!==null&&(O.data=x)))),(x=_w?vw(e,i):yw(e,i))&&(O=Ko(l,"onBeforeInput"),0<O.length&&(R=new Oh("onBeforeInput","beforeinput",null,i,u),d.push({event:R,listeners:O}),R.data=x)),l0(d,e,l,i,u)}My(d,t)})}function Yr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ko(e,t){for(var i=t+"Capture",n=[];e!==null;){var a=e,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=Br(e,i),a!=null&&n.unshift(Yr(e,a,s)),a=Br(e,t),a!=null&&n.push(Yr(e,a,s))),e.tag===3)return n;e=e.return}return[]}function Ma(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Tm(e,t,i,n,a){for(var s=t._reactName,r=[];i!==null&&i!==n;){var c=i,o=c.alternate,l=c.stateNode;if(c=c.tag,o!==null&&o===n)break;c!==5&&c!==26&&c!==27||l===null||(o=l,a?(l=Br(i,s),l!=null&&r.unshift(Yr(i,l,o))):a||(l=Br(i,s),l!=null&&r.push(Yr(i,l,o)))),i=i.return}r.length!==0&&e.push({event:t,listeners:r})}var p0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function Em(e){return(typeof e=="string"?e:""+e).replace(p0,`
`).replace(h0,"")}function Oy(e,t){return t=Em(t),Em(e)===t}function vl(){}function ve(e,t,i,n,a,s){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||xs(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&xs(e,""+n);break;case"className":Ac(e,"class",n);break;case"tabIndex":Ac(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ac(e,i,n);break;case"style":O_(e,n,s);break;case"data":if(t!=="object"){Ac(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=oo(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(i==="formAction"?(t!=="input"&&ve(e,t,"name",a.name,a,null),ve(e,t,"formEncType",a.formEncType,a,null),ve(e,t,"formMethod",a.formMethod,a,null),ve(e,t,"formTarget",a.formTarget,a,null)):(ve(e,t,"encType",a.encType,a,null),ve(e,t,"method",a.method,a,null),ve(e,t,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=oo(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=vl);break;case"onScroll":n!=null&&te("scroll",e);break;case"onScrollEnd":n!=null&&te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(E(61));if(i=n.__html,i!=null){if(a.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=oo(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":te("beforetoggle",e),te("toggle",e),co(e,"popover",n);break;case"xlinkActuate":Ai(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ai(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ai(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ai(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ai(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ai(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ai(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ai(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ai(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":co(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Gb.get(i)||i,co(e,i,n))}}function $u(e,t,i,n,a,s){switch(i){case"style":O_(e,n,s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(E(61));if(i=n.__html,i!=null){if(a.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"children":typeof n=="string"?xs(e,n):(typeof n=="number"||typeof n=="bigint")&&xs(e,""+n);break;case"onScroll":n!=null&&te("scroll",e);break;case"onScrollEnd":n!=null&&te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!E_.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(a=i.endsWith("Capture"),t=i.slice(2,a?i.length-7:void 0),s=e[Et]||null,s=s!=null?s[i]:null,typeof s=="function"&&e.removeEventListener(t,s,a),typeof n=="function")){typeof s!="function"&&s!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,a);break e}i in e?e[i]=n:n===!0?e.setAttribute(i,""):co(e,i,n)}}}function st(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",e),te("load",e);var n=!1,a=!1,s;for(s in i)if(i.hasOwnProperty(s)){var r=i[s];if(r!=null)switch(s){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ve(e,t,s,r,i,null)}}a&&ve(e,t,"srcSet",i.srcSet,i,null),n&&ve(e,t,"src",i.src,i,null);return;case"input":te("invalid",e);var c=s=r=a=null,o=null,l=null;for(n in i)if(i.hasOwnProperty(n)){var u=i[n];if(u!=null)switch(n){case"name":a=u;break;case"type":r=u;break;case"checked":o=u;break;case"defaultChecked":l=u;break;case"value":s=u;break;case"defaultValue":c=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(E(137,t));break;default:ve(e,t,n,u,i,null)}}x_(e,s,c,o,l,r,a,!1),Lo(e);return;case"select":te("invalid",e),n=r=s=null;for(a in i)if(i.hasOwnProperty(a)&&(c=i[a],c!=null))switch(a){case"value":s=c;break;case"defaultValue":r=c;break;case"multiple":n=c;default:ve(e,t,a,c,i,null)}t=s,i=r,e.multiple=!!n,t!=null?hs(e,!!n,t,!1):i!=null&&hs(e,!!n,i,!0);return;case"textarea":te("invalid",e),s=a=n=null;for(r in i)if(i.hasOwnProperty(r)&&(c=i[r],c!=null))switch(r){case"value":n=c;break;case"defaultValue":a=c;break;case"children":s=c;break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(E(91));break;default:ve(e,t,r,c,i,null)}L_(e,n,a,s),Lo(e);return;case"option":for(o in i)if(i.hasOwnProperty(o)&&(n=i[o],n!=null))switch(o){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:ve(e,t,o,n,i,null)}return;case"dialog":te("beforetoggle",e),te("toggle",e),te("cancel",e),te("close",e);break;case"iframe":case"object":te("load",e);break;case"video":case"audio":for(n=0;n<Vr.length;n++)te(Vr[n],e);break;case"image":te("error",e),te("load",e);break;case"details":te("toggle",e);break;case"embed":case"source":case"link":te("error",e),te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(l in i)if(i.hasOwnProperty(l)&&(n=i[l],n!=null))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ve(e,t,l,n,i,null)}return;default:if(wf(t)){for(u in i)i.hasOwnProperty(u)&&(n=i[u],n!==void 0&&$u(e,t,u,n,i,void 0));return}}for(c in i)i.hasOwnProperty(c)&&(n=i[c],n!=null&&ve(e,t,c,n,i,null))}function m0(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,r=null,c=null,o=null,l=null,u=null;for(p in i){var d=i[p];if(i.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":o=d;default:n.hasOwnProperty(p)||ve(e,t,p,null,n,d)}}for(var f in n){var p=n[f];if(d=i[f],n.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":s=p;break;case"name":a=p;break;case"checked":l=p;break;case"defaultChecked":u=p;break;case"value":r=p;break;case"defaultValue":c=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(E(137,t));break;default:p!==d&&ve(e,t,f,p,n,d)}}pu(e,r,c,o,l,u,s,a);return;case"select":p=r=c=f=null;for(s in i)if(o=i[s],i.hasOwnProperty(s)&&o!=null)switch(s){case"value":break;case"multiple":p=o;default:n.hasOwnProperty(s)||ve(e,t,s,null,n,o)}for(a in n)if(s=n[a],o=i[a],n.hasOwnProperty(a)&&(s!=null||o!=null))switch(a){case"value":f=s;break;case"defaultValue":c=s;break;case"multiple":r=s;default:s!==o&&ve(e,t,a,s,n,o)}t=c,i=r,n=p,f!=null?hs(e,!!i,f,!1):!!n!=!!i&&(t!=null?hs(e,!!i,t,!0):hs(e,!!i,i?[]:"",!1));return;case"textarea":p=f=null;for(c in i)if(a=i[c],i.hasOwnProperty(c)&&a!=null&&!n.hasOwnProperty(c))switch(c){case"value":break;case"children":break;default:ve(e,t,c,null,n,a)}for(r in n)if(a=n[r],s=i[r],n.hasOwnProperty(r)&&(a!=null||s!=null))switch(r){case"value":f=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(E(91));break;default:a!==s&&ve(e,t,r,a,n,s)}M_(e,f,p);return;case"option":for(var y in i)if(f=i[y],i.hasOwnProperty(y)&&f!=null&&!n.hasOwnProperty(y))switch(y){case"selected":e.selected=!1;break;default:ve(e,t,y,null,n,f)}for(o in n)if(f=n[o],p=i[o],n.hasOwnProperty(o)&&f!==p&&(f!=null||p!=null))switch(o){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ve(e,t,o,f,n,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in i)f=i[b],i.hasOwnProperty(b)&&f!=null&&!n.hasOwnProperty(b)&&ve(e,t,b,null,n,f);for(l in n)if(f=n[l],p=i[l],n.hasOwnProperty(l)&&f!==p&&(f!=null||p!=null))switch(l){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(E(137,t));break;default:ve(e,t,l,f,n,p)}return;default:if(wf(t)){for(var w in i)f=i[w],i.hasOwnProperty(w)&&f!==void 0&&!n.hasOwnProperty(w)&&$u(e,t,w,void 0,n,f);for(u in n)f=n[u],p=i[u],!n.hasOwnProperty(u)||f===p||f===void 0&&p===void 0||$u(e,t,u,f,n,p);return}}for(var m in i)f=i[m],i.hasOwnProperty(m)&&f!=null&&!n.hasOwnProperty(m)&&ve(e,t,m,null,n,f);for(d in n)f=n[d],p=i[d],!n.hasOwnProperty(d)||f===p||f==null&&p==null||ve(e,t,d,f,n,p)}var Gu=null,Vu=null;function Fo(e){return e.nodeType===9?e:e.ownerDocument}function Dm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ky(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Id=null;function g0(){var e=window.event;return e&&e.type==="popstate"?e===Id?!1:(Id=e,!0):(Id=null,!1)}var Ay=typeof setTimeout=="function"?setTimeout:void 0,_0=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,v0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(e){return Cm.resolve(null).then(e).catch(y0)}:Ay;function y0(e){setTimeout(function(){throw e})}function Bn(e){return e==="head"}function xm(e,t){var i=t,n=0,a=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(0<n&&8>n){i=n;var r=e.ownerDocument;if(i&1&&Ur(r.documentElement),i&2&&Ur(r.body),i&4)for(i=r.head,Ur(i),r=i.firstChild;r;){var c=r.nextSibling,o=r.nodeName;r[nc]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||i.removeChild(r),r=c}}if(a===0){e.removeChild(s),Zr(t);return}a--}else i==="$"||i==="$?"||i==="$!"?a++:n=i.charCodeAt(0)-48;else n=0;i=s}while(i);Zr(t)}function Qu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Qu(i),bf(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function S0(e,t,i,n){for(;e.nodeType===1;){var a=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[nc])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=ii(e.nextSibling),e===null)break}return null}function b0(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ii(e.nextSibling),e===null))return null;return e}function Xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function w0(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Ku=null;function Mm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function Py(e,t,i){switch(t=Fo(i),e){case"html":if(e=t.documentElement,!e)throw Error(E(452));return e;case"head":if(e=t.head,!e)throw Error(E(453));return e;case"body":if(e=t.body,!e)throw Error(E(454));return e;default:throw Error(E(451))}}function Ur(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);bf(e)}var Ft=new Map,Lm=new Set;function Zo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=fe.d;fe.d={f:R0,r:T0,D:E0,C:D0,L:C0,m:x0,X:L0,S:M0,M:O0};function R0(){var e=Ji.f(),t=ml();return e||t}function T0(e){var t=Bs(e);t!==null&&t.tag===5&&t.type==="form"?Cv(t):Ji.r(e)}var qs=typeof document>"u"?null:document;function Ny(e,t,i){var n=qs;if(n&&typeof t=="string"&&t){var a=Vt(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof i=="string"&&(a+='[crossorigin="'+i+'"]'),Lm.has(a)||(Lm.add(a),e={rel:e,crossOrigin:i,href:t},n.querySelector(a)===null&&(t=n.createElement("link"),st(t,"link",e),Je(t),n.head.appendChild(t)))}}function E0(e){Ji.D(e),Ny("dns-prefetch",e,null)}function D0(e,t){Ji.C(e,t),Ny("preconnect",e,t)}function C0(e,t,i){Ji.L(e,t,i);var n=qs;if(n&&e&&t){var a='link[rel="preload"][as="'+Vt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(a+='[imagesrcset="'+Vt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(a+='[imagesizes="'+Vt(i.imageSizes)+'"]')):a+='[href="'+Vt(e)+'"]';var s=a;switch(t){case"style":s=js(e);break;case"script":s=$s(e)}Ft.has(s)||(e=De({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ft.set(s,e),n.querySelector(a)!==null||t==="style"&&n.querySelector(pc(s))||t==="script"&&n.querySelector(hc(s))||(t=n.createElement("link"),st(t,"link",e),Je(t),n.head.appendChild(t)))}}function x0(e,t){Ji.m(e,t);var i=qs;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Vt(n)+'"][href="'+Vt(e)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=$s(e)}if(!Ft.has(s)&&(e=De({rel:"modulepreload",href:e},t),Ft.set(s,e),i.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(hc(s)))return}n=i.createElement("link"),st(n,"link",e),Je(n),i.head.appendChild(n)}}}function M0(e,t,i){Ji.S(e,t,i);var n=qs;if(n&&e){var a=ps(n).hoistableStyles,s=js(e);t=t||"default";var r=a.get(s);if(!r){var c={loading:0,preload:null};if(r=n.querySelector(pc(s)))c.loading=5;else{e=De({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ft.get(s))&&ap(e,i);var o=r=n.createElement("link");Je(o),st(o,"link",e),o._p=new Promise(function(l,u){o.onload=l,o.onerror=u}),o.addEventListener("load",function(){c.loading|=1}),o.addEventListener("error",function(){c.loading|=2}),c.loading|=4,vo(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:c},a.set(s,r)}}}function L0(e,t){Ji.X(e,t);var i=qs;if(i&&e){var n=ps(i).hoistableScripts,a=$s(e),s=n.get(a);s||(s=i.querySelector(hc(a)),s||(e=De({src:e,async:!0},t),(t=Ft.get(a))&&sp(e,t),s=i.createElement("script"),Je(s),st(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function O0(e,t){Ji.M(e,t);var i=qs;if(i&&e){var n=ps(i).hoistableScripts,a=$s(e),s=n.get(a);s||(s=i.querySelector(hc(a)),s||(e=De({src:e,async:!0,type:"module"},t),(t=Ft.get(a))&&sp(e,t),s=i.createElement("script"),Je(s),st(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function Om(e,t,i,n){var a=(a=En.current)?Zo(a):null;if(!a)throw Error(E(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=js(i.href),i=ps(a).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=js(i.href);var s=ps(a).hoistableStyles,r=s.get(e);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=a.querySelector(pc(e)))&&!s._p&&(r.instance=s,r.state.loading=5),Ft.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ft.set(e,i),s||k0(a,e,i,r.state))),t&&n===null)throw Error(E(528,""));return r}if(t&&n!==null)throw Error(E(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$s(i),i=ps(a).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(E(444,e))}}function js(e){return'href="'+Vt(e)+'"'}function pc(e){return'link[rel="stylesheet"]['+e+"]"}function jy(e){return De({},e,{"data-precedence":e.precedence,precedence:null})}function k0(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),st(t,"link",i),Je(t),e.head.appendChild(t))}function $s(e){return'[src="'+Vt(e)+'"]'}function hc(e){return"script[async]"+e}function km(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Vt(i.href)+'"]');if(n)return t.instance=n,Je(n),n;var a=De({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Je(n),st(n,"style",a),vo(n,i.precedence,e),t.instance=n;case"stylesheet":a=js(i.href);var s=e.querySelector(pc(a));if(s)return t.state.loading|=4,t.instance=s,Je(s),s;n=jy(i),(a=Ft.get(a))&&ap(n,a),s=(e.ownerDocument||e).createElement("link"),Je(s);var r=s;return r._p=new Promise(function(c,o){r.onload=c,r.onerror=o}),st(s,"link",n),t.state.loading|=4,vo(s,i.precedence,e),t.instance=s;case"script":return s=$s(i.src),(a=e.querySelector(hc(s)))?(t.instance=a,Je(a),a):(n=i,(a=Ft.get(s))&&(n=De({},i),sp(n,a)),e=e.ownerDocument||e,a=e.createElement("script"),Je(a),st(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(E(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,vo(n,i.precedence,e));return t.instance}function vo(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,r=0;r<n.length;r++){var c=n[r];if(c.dataset.precedence===t)s=c;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function ap(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yo=null;function Am(e,t,i){if(yo===null){var n=new Map,a=yo=new Map;a.set(i,n)}else a=yo,n=a.get(i),n||(n=new Map,a.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),a=0;a<i.length;a++){var s=i[a];if(!(s[nc]||s[ht]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var c=n.get(r);c?c.push(s):n.set(r,[s])}}return n}function Pm(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function A0(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Uy(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Qr=null;function P0(){}function N0(e,t,i){if(Qr===null)throw Error(E(475));var n=Qr;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=js(i.href),s=e.querySelector(pc(a));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Jo.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,Je(s);return}s=e.ownerDocument||e,i=jy(i),(a=Ft.get(a))&&ap(i,a),s=s.createElement("link"),Je(s);var r=s;r._p=new Promise(function(c,o){r.onload=c,r.onerror=o}),st(s,"link",i),t.instance=s}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=Jo.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function j0(){if(Qr===null)throw Error(E(475));var e=Qr;return e.stylesheets&&e.count===0&&Fu(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&Fu(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Jo(){if(this.count--,this.count===0){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wo=null;function Fu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wo=new Map,t.forEach(U0,e),Wo=null,Jo.call(e))}function U0(e,t){if(!(t.state.loading&4)){var i=Wo.get(e);if(i)var n=i.get(null);else{i=new Map,Wo.set(e,i);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var r=a[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(i.set(r.dataset.precedence,r),n=r)}n&&i.set(null,n)}a=t.instance,r=a.getAttribute("data-precedence"),s=i.get(r)||n,s===n&&i.set(null,a),i.set(r,a),this.count++,n=Jo.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Xr={$$typeof:Hi,Provider:null,Consumer:null,_currentValue:ia,_currentValue2:ia,_threadCount:0};function z0(e,t,i,n,a,s,r,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=od(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=od(0),this.hiddenUpdates=od(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function zy(e,t,i,n,a,s,r,c,o,l,u,d){return e=new z0(e,t,i,r,c,o,l,d),t=1,s===!0&&(t|=24),s=kt(3,null,null,t),e.current=s,s.stateNode=e,t=Af(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:i,cache:t},Nf(s),e}function By(e){return e?(e=cs,e):cs}function Iy(e,t,i,n,a,s){a=By(a),n.context===null?n.context=a:n.pendingContext=a,n=Dn(t),n.payload={element:i},s=s===void 0?null:s,s!==null&&(n.callback=s),i=Cn(e,n,t),i!==null&&(jt(i,e,t),Mr(i,e,t))}function Nm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function rp(e,t){Nm(e,t),(e=e.alternate)&&Nm(e,t)}function Hy(e){if(e.tag===13){var t=Is(e,67108864);t!==null&&jt(t,e,67108864),rp(e,67108864)}}var el=!0;function B0(e,t,i,n){var a=Q.T;Q.T=null;var s=fe.p;try{fe.p=2,cp(e,t,i,n)}finally{fe.p=s,Q.T=a}}function I0(e,t,i,n){var a=Q.T;Q.T=null;var s=fe.p;try{fe.p=8,cp(e,t,i,n)}finally{fe.p=s,Q.T=a}}function cp(e,t,i,n){if(el){var a=Zu(n);if(a===null)Bd(e,t,n,tl,i),jm(e,n);else if(q0(a,e,t,i,n))n.stopPropagation();else if(jm(e,n),t&4&&-1<H0.indexOf(e)){for(;a!==null;){var s=Bs(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=Gn(s.pendingLanes);if(r!==0){var c=s;for(c.pendingLanes|=2,c.entangledLanes|=2;r;){var o=1<<31-Pt(r);c.entanglements[1]|=o,r&=~o}Ci(s),!(ge&6)&&(Vo=wi()+500,fc(0,!1))}}break;case 13:c=Is(s,2),c!==null&&jt(c,s,2),ml(),rp(s,2)}if(s=Zu(n),s===null&&Bd(e,t,n,tl,i),s===a)break;a=s}a!==null&&n.stopPropagation()}else Bd(e,t,n,null,i)}}function Zu(e){return e=Rf(e),op(e)}var tl=null;function op(e){if(tl=null,e=ts(e),e!==null){var t=Wr(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=f_(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tl=e,null}function qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Db()){case g_:return 2;case __:return 8;case Mo:case Cb:return 32;case v_:return 268435456;default:return 32}default:return 32}}var Ju=!1,Ln=null,On=null,kn=null,Kr=new Map,Fr=new Map,vn=[],H0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jm(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Kr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(t.pointerId)}}function ur(e,t,i,n,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Bs(t),t!==null&&Hy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function q0(e,t,i,n,a){switch(t){case"focusin":return Ln=ur(Ln,e,t,i,n,a),!0;case"dragenter":return On=ur(On,e,t,i,n,a),!0;case"mouseover":return kn=ur(kn,e,t,i,n,a),!0;case"pointerover":var s=a.pointerId;return Kr.set(s,ur(Kr.get(s)||null,e,t,i,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Fr.set(s,ur(Fr.get(s)||null,e,t,i,n,a)),!0}return!1}function $y(e){var t=ts(e.target);if(t!==null){var i=Wr(t);if(i!==null){if(t=i.tag,t===13){if(t=f_(i),t!==null){e.blockedOn=t,Nb(e.priority,function(){if(i.tag===13){var n=Nt();n=yf(n);var a=Is(i,n);a!==null&&jt(a,i,n),rp(i,n)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function So(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Zu(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);mu=n,i.target.dispatchEvent(n),mu=null}else return t=Bs(i),t!==null&&Hy(t),e.blockedOn=i,!1;t.shift()}return!0}function Um(e,t,i){So(e)&&i.delete(t)}function $0(){Ju=!1,Ln!==null&&So(Ln)&&(Ln=null),On!==null&&So(On)&&(On=null),kn!==null&&So(kn)&&(kn=null),Kr.forEach(Um),Fr.forEach(Um)}function Hc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,$0)))}var qc=null;function zm(e){qc!==e&&(qc=e,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,function(){qc===e&&(qc=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],a=e[t+2];if(typeof n!="function"){if(op(n||i)===null)continue;break}var s=Bs(i);s!==null&&(e.splice(t,3),t-=3,Ou(s,{pending:!0,data:a,method:i.method,action:n},n,a))}}))}function Zr(e){function t(o){return Hc(o,e)}Ln!==null&&Hc(Ln,e),On!==null&&Hc(On,e),kn!==null&&Hc(kn,e),Kr.forEach(t),Fr.forEach(t);for(var i=0;i<vn.length;i++){var n=vn[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<vn.length&&(i=vn[0],i.blockedOn===null);)$y(i),i.blockedOn===null&&vn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var a=i[n],s=i[n+1],r=a[Et]||null;if(typeof s=="function")r||zm(i);else if(r){var c=null;if(s&&s.hasAttribute("formAction")){if(a=s,r=s[Et]||null)c=r.formAction;else if(op(a)!==null)continue}else c=r.action;typeof c=="function"?i[n+1]=c:(i.splice(n,3),n-=3),zm(i)}}}function lp(e){this._internalRoot=e}yl.prototype.render=lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));var i=t.current,n=Nt();Iy(i,n,e,t,null,null)};yl.prototype.unmount=lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Iy(e.current,2,null,e,null,null),ml(),t[zs]=null}};function yl(e){this._internalRoot=e}yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=R_();e={blockedOn:null,target:e,priority:t};for(var i=0;i<vn.length&&t!==0&&t<vn[i].priority;i++);vn.splice(i,0,e),i===0&&$y(e)}};var Bm=d_.version;if(Bm!=="19.1.0")throw Error(E(527,Bm,"19.1.0"));fe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=yb(t),e=e!==null?p_(e):null,e=e===null?null:e.stateNode,e};var G0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{ec=$c.inject(G0),At=$c}catch{}}nl.createRoot=function(e,t){if(!u_(e))throw Error(E(299));var i=!1,n="",a=zv,s=Bv,r=Iv,c=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(c=t.unstable_transitionCallbacks)),t=zy(e,1,!1,null,null,i,n,a,s,r,c,null),e[zs]=t.current,np(e),new lp(t)};nl.hydrateRoot=function(e,t,i){if(!u_(e))throw Error(E(299));var n=!1,a="",s=zv,r=Bv,c=Iv,o=null,l=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(s=i.onUncaughtError),i.onCaughtError!==void 0&&(r=i.onCaughtError),i.onRecoverableError!==void 0&&(c=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(o=i.unstable_transitionCallbacks),i.formState!==void 0&&(l=i.formState)),t=zy(e,1,!0,t,i??null,n,a,s,r,c,o,l),t.context=By(null),i=t.current,n=Nt(),n=yf(n),a=Dn(n),a.callback=null,Cn(i,a,n),i=n,t.current.lanes=i,ic(t,i),Ci(t),e[zs]=t.current,np(e),new yl(t)};nl.version="19.1.0";function Gy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gy)}catch(e){console.error(e)}}Gy(),a_.exports=nl;var V0=a_.exports;const Ei=Object.create(null);Ei.open="0";Ei.close="1";Ei.ping="2";Ei.pong="3";Ei.message="4";Ei.upgrade="5";Ei.noop="6";const bo=Object.create(null);Object.keys(Ei).forEach(e=>{bo[Ei[e]]=e});const Wu={type:"error",data:"parser error"},Vy=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Yy=typeof ArrayBuffer=="function",Qy=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,dp=({type:e,data:t},i,n)=>Vy&&t instanceof Blob?i?n(t):Im(t,n):Yy&&(t instanceof ArrayBuffer||Qy(t))?i?n(t):Im(new Blob([t]),n):n(Ei[e]+(t||"")),Im=(e,t)=>{const i=new FileReader;return i.onload=function(){const n=i.result.split(",")[1];t("b"+(n||""))},i.readAsDataURL(e)};function Hm(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Hd;function Y0(e,t){if(Vy&&e.data instanceof Blob)return e.data.arrayBuffer().then(Hm).then(t);if(Yy&&(e.data instanceof ArrayBuffer||Qy(e.data)))return t(Hm(e.data));dp(e,!1,i=>{Hd||(Hd=new TextEncoder),t(Hd.encode(i))})}const qm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<qm.length;e++)wr[qm.charCodeAt(e)]=e;const Q0=e=>{let t=e.length*.75,i=e.length,n,a=0,s,r,c,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const l=new ArrayBuffer(t),u=new Uint8Array(l);for(n=0;n<i;n+=4)s=wr[e.charCodeAt(n)],r=wr[e.charCodeAt(n+1)],c=wr[e.charCodeAt(n+2)],o=wr[e.charCodeAt(n+3)],u[a++]=s<<2|r>>4,u[a++]=(r&15)<<4|c>>2,u[a++]=(c&3)<<6|o&63;return l},X0=typeof ArrayBuffer=="function",up=(e,t)=>{if(typeof e!="string")return{type:"message",data:Xy(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:K0(e.substring(1),t)}:bo[i]?e.length>1?{type:bo[i],data:e.substring(1)}:{type:bo[i]}:Wu},K0=(e,t)=>{if(X0){const i=Q0(e);return Xy(i,t)}else return{base64:!0,data:e}},Xy=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ky=String.fromCharCode(30),F0=(e,t)=>{const i=e.length,n=new Array(i);let a=0;e.forEach((s,r)=>{dp(s,!1,c=>{n[r]=c,++a===i&&t(n.join(Ky))})})},Z0=(e,t)=>{const i=e.split(Ky),n=[];for(let a=0;a<i.length;a++){const s=up(i[a],t);if(n.push(s),s.type==="error")break}return n};function J0(){return new TransformStream({transform(e,t){Y0(e,i=>{const n=i.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const s=new DataView(a.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{a=new Uint8Array(9);const s=new DataView(a.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(i)})}})}let qd;function Gc(e){return e.reduce((t,i)=>t+i.length,0)}function Vc(e,t){if(e[0].length===t)return e.shift();const i=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)i[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),i}function W0(e,t){qd||(qd=new TextDecoder);const i=[];let n=0,a=-1,s=!1;return new TransformStream({transform(r,c){for(i.push(r);;){if(n===0){if(Gc(i)<1)break;const o=Vc(i,1);s=(o[0]&128)===128,a=o[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Gc(i)<2)break;const o=Vc(i,2);a=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),n=3}else if(n===2){if(Gc(i)<8)break;const o=Vc(i,8),l=new DataView(o.buffer,o.byteOffset,o.length),u=l.getUint32(0);if(u>Math.pow(2,53-32)-1){c.enqueue(Wu);break}a=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(Gc(i)<a)break;const o=Vc(i,a);c.enqueue(up(s?o:qd.decode(o),t)),n=0}if(a===0||a>e){c.enqueue(Wu);break}}}})}const Fy=4;function Ve(e){if(e)return e1(e)}function e1(e){for(var t in Ve.prototype)e[t]=Ve.prototype[t];return e}Ve.prototype.on=Ve.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ve.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Ve.prototype.off=Ve.prototype.removeListener=Ve.prototype.removeAllListeners=Ve.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<i.length;a++)if(n=i[a],n===t||n.fn===t){i.splice(a,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Ve.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,a=i.length;n<a;++n)i[n].apply(this,t)}return this};Ve.prototype.emitReserved=Ve.prototype.emit;Ve.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ve.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Sl=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),Gt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),t1="arraybuffer";function Zy(e,...t){return t.reduce((i,n)=>(e.hasOwnProperty(n)&&(i[n]=e[n]),i),{})}const i1=Gt.setTimeout,n1=Gt.clearTimeout;function bl(e,t){t.useNativeTimers?(e.setTimeoutFn=i1.bind(Gt),e.clearTimeoutFn=n1.bind(Gt)):(e.setTimeoutFn=Gt.setTimeout.bind(Gt),e.clearTimeoutFn=Gt.clearTimeout.bind(Gt))}const a1=1.33;function s1(e){return typeof e=="string"?r1(e):Math.ceil((e.byteLength||e.size)*a1)}function r1(e){let t=0,i=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(n++,i+=4);return i}function Jy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function c1(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function o1(e){let t={},i=e.split("&");for(let n=0,a=i.length;n<a;n++){let s=i[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class l1 extends Error{constructor(t,i,n){super(t),this.description=i,this.context=n,this.type="TransportError"}}let fp=class extends Ve{constructor(t){super(),this.writable=!1,bl(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,i,n){return super.emitReserved("error",new l1(t,i,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=up(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,i={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const i=c1(t);return i.length?"?"+i:""}};class d1 extends fp{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||i()})),this.writable||(n++,this.once("drain",function(){--n||i()}))}else i()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Z0(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,F0(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=Jy()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(t,i)}}let Wy=!1;try{Wy=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const u1=Wy;function f1(){}class p1 extends d1{constructor(t){if(super(t),typeof location<"u"){const i=location.protocol==="https:";let n=location.port;n||(n=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,i){const n=this.request({method:"POST",data:t});n.on("success",i),n.on("error",(a,s)=>{this.onError("xhr post error",a,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,n)=>{this.onError("xhr poll error",i,n)}),this.pollXhr=t}}class Ti extends Ve{constructor(t,i,n){super(),this.createRequest=t,bl(this,n),this._opts=n,this._method=n.method||"GET",this._uri=i,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const i=Zy(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(i);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ti.requestsCount++,Ti.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=f1,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ti.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ti.requestsCount=0;Ti.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$m);else if(typeof addEventListener=="function"){const e="onpagehide"in Gt?"pagehide":"unload";addEventListener(e,$m,!1)}}function $m(){for(let e in Ti.requests)Ti.requests.hasOwnProperty(e)&&Ti.requests[e].abort()}const h1=function(){const e=eS({xdomain:!1});return e&&e.responseType!==null}();class m1 extends p1{constructor(t){super(t);const i=t&&t.forceBase64;this.supportsBinary=h1&&!i}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ti(eS,this.uri(),t)}}function eS(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||u1))return new XMLHttpRequest}catch{}if(!t)try{return new Gt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const tS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class g1 extends fp{get name(){return"websocket"}doOpen(){const t=this.uri(),i=this.opts.protocols,n=tS?{}:Zy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,i,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const n=t[i],a=i===t.length-1;dp(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}a&&Sl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=Jy()),this.supportsBinary||(i.b64=1),this.createUri(t,i)}}const $d=Gt.WebSocket||Gt.MozWebSocket;class _1 extends g1{createSocket(t,i,n){return tS?new $d(t,i,n):i?new $d(t,i):new $d(t)}doWrite(t,i){this.ws.send(i)}}class v1 extends fp{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const i=W0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(i).getReader(),a=J0();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const s=()=>{n.read().then(({done:c,value:o})=>{c||(this.onPacket(o),s())}).catch(c=>{})};s();const r={type:"open"};this.query.sid&&(r.data=`{"sid":"${this.query.sid}"}`),this._writer.write(r).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const n=t[i],a=i===t.length-1;this._writer.write(n).then(()=>{a&&Sl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const y1={websocket:_1,webtransport:v1,polling:m1},S1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,b1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ef(e){if(e.length>8e3)throw"URI too long";const t=e,i=e.indexOf("["),n=e.indexOf("]");i!=-1&&n!=-1&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));let a=S1.exec(e||""),s={},r=14;for(;r--;)s[b1[r]]=a[r]||"";return i!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=w1(s,s.path),s.queryKey=R1(s,s.query),s}function w1(e,t){const i=/\/{2,9}/g,n=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function R1(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,s){a&&(i[a]=s)}),i}const tf=typeof addEventListener=="function"&&typeof removeEventListener=="function",wo=[];tf&&addEventListener("offline",()=>{wo.forEach(e=>e())},!1);class An extends Ve{constructor(t,i){if(super(),this.binaryType=t1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(i=t,t=null),t){const n=ef(t);i.hostname=n.host,i.secure=n.protocol==="https"||n.protocol==="wss",i.port=n.port,n.query&&(i.query=n.query)}else i.host&&(i.hostname=ef(i.host).host);bl(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=o1(this.opts.query)),tf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=Fy,i.transport=t,this.id&&(i.sid=this.id);const n=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&An.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const i=this.createTransport(t);i.open(),this.setTransport(i)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",An.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const i=new Error("server error");i.code=t.data,this._onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(i+=s1(a)),n>0&&i>this._maxPayload)return this.writeBuffer.slice(0,n);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Sl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,i,n){return this._sendPacket("message",t,i,n),this}send(t,i,n){return this._sendPacket("message",t,i,n),this}_sendPacket(t,i,n,a){if(typeof i=="function"&&(a=i,i=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:i,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},n=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(An.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),tf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=wo.indexOf(this._offlineEventListener);n!==-1&&wo.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this._prevBufferLen=0}}}An.protocol=Fy;class T1 extends An{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let i=this.createTransport(t),n=!1;An.priorWebsocketSuccess=!1;const a=()=>{n||(i.send([{type:"ping",data:"probe"}]),i.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;An.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=i.name,this.emitReserved("upgradeError",f)}}))};function s(){n||(n=!0,u(),i.close(),i=null)}const r=d=>{const f=new Error("probe error: "+d);f.transport=i.name,s(),this.emitReserved("upgradeError",f)};function c(){r("transport closed")}function o(){r("socket closed")}function l(d){i&&d.name!==i.name&&s()}const u=()=>{i.removeListener("open",a),i.removeListener("error",r),i.removeListener("close",c),this.off("close",o),this.off("upgrading",l)};i.once("open",a),i.once("error",r),i.once("close",c),this.once("close",o),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||i.open()},200):i.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const i=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&i.push(t[n]);return i}}let E1=class extends T1{constructor(t,i={}){const n=typeof t=="object"?t:i;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>y1[a]).filter(a=>!!a)),super(t,n)}};function D1(e,t="",i){let n=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),n=ef(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(i&&i.port===n.port?"":":"+n.port),n}const C1=typeof ArrayBuffer=="function",x1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,iS=Object.prototype.toString,M1=typeof Blob=="function"||typeof Blob<"u"&&iS.call(Blob)==="[object BlobConstructor]",L1=typeof File=="function"||typeof File<"u"&&iS.call(File)==="[object FileConstructor]";function pp(e){return C1&&(e instanceof ArrayBuffer||x1(e))||M1&&e instanceof Blob||L1&&e instanceof File}function Ro(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,n=e.length;i<n;i++)if(Ro(e[i]))return!0;return!1}if(pp(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ro(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Ro(e[i]))return!0;return!1}function O1(e){const t=[],i=e.data,n=e;return n.data=nf(i,t),n.attachments=t.length,{packet:n,buffers:t}}function nf(e,t){if(!e)return e;if(pp(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=nf(e[n],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=nf(e[n],t));return i}return e}function k1(e,t){return e.data=af(e.data,t),delete e.attachments,e}function af(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=af(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=af(e[i],t));return e}const A1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],P1=5;var se;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(se||(se={}));class N1{constructor(t){this.replacer=t}encode(t){return(t.type===se.EVENT||t.type===se.ACK)&&Ro(t)?this.encodeAsBinary({type:t.type===se.EVENT?se.BINARY_EVENT:se.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===se.BINARY_EVENT||t.type===se.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=O1(t),n=this.encodeAsString(i.packet),a=i.buffers;return a.unshift(n),a}}function Gm(e){return Object.prototype.toString.call(e)==="[object Object]"}class hp extends Ve{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const n=i.type===se.BINARY_EVENT;n||i.type===se.BINARY_ACK?(i.type=n?se.EVENT:se.ACK,this.reconstructor=new j1(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(pp(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const n={type:Number(t.charAt(0))};if(se[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===se.BINARY_EVENT||n.type===se.BINARY_ACK){const s=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const r=t.substring(s,i);if(r!=Number(r)||t.charAt(i)!=="-")throw new Error("Illegal attachments");n.attachments=Number(r)}if(t.charAt(i+1)==="/"){const s=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););n.nsp=t.substring(s,i)}else n.nsp="/";const a=t.charAt(i+1);if(a!==""&&Number(a)==a){const s=i+1;for(;++i;){const r=t.charAt(i);if(r==null||Number(r)!=r){--i;break}if(i===t.length)break}n.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){const s=this.tryParse(t.substr(i));if(hp.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case se.CONNECT:return Gm(i);case se.DISCONNECT:return i===void 0;case se.CONNECT_ERROR:return typeof i=="string"||Gm(i);case se.EVENT:case se.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&A1.indexOf(i[0])===-1);case se.ACK:case se.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class j1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=k1(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const U1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hp,Encoder:N1,get PacketType(){return se},protocol:P1},Symbol.toStringTag,{value:"Module"}));function ti(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const z1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nS extends Ve{constructor(t,i,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ti(t,"open",this.onopen.bind(this)),ti(t,"packet",this.onpacket.bind(this)),ti(t,"error",this.onerror.bind(this)),ti(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){var n,a,s;if(z1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:se.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const u=this.ids++,d=i.pop();this._registerAckCallback(u,d),r.id=u}const c=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,o=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!c||(o?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,i){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=i;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);i.call(this,new Error("operation has timed out"))},a),r=(...c)=>{this.io.clearTimeoutFn(s),i.apply(this,c)};r.withError=!0,this.acks[t]=r}emitWithAck(t,...i){return new Promise((n,a)=>{const s=(r,c)=>r?a(r):n(c);s.withError=!0,i.push(s),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...s)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(a)):(this._queue.shift(),i&&i(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:se.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case se.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case se.EVENT:case se.BINARY_EVENT:this.onevent(t);break;case se.ACK:case se.BINARY_ACK:this.onack(t);break;case se.DISCONNECT:this.ondisconnect();break;case se.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const n of i)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let n=!1;return function(...a){n||(n=!0,i.packet({type:se.ACK,id:t,data:a}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(delete this.acks[t.id],i.withError&&t.data.unshift(null),i.apply(this,t.data))}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:se.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const n of i)n.apply(this,t.data)}}}function Gs(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Gs.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+i:e-i}return Math.min(e,this.max)|0};Gs.prototype.reset=function(){this.attempts=0};Gs.prototype.setMin=function(e){this.ms=e};Gs.prototype.setMax=function(e){this.max=e};Gs.prototype.setJitter=function(e){this.jitter=e};class sf extends Ve{constructor(t,i){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,bl(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((n=i.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Gs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const a=i.parser||U1;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new E1(this.uri,this.opts);const i=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ti(i,"open",function(){n.onopen(),t&&t()}),s=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},r=ti(i,"error",s);if(this._timeout!==!1){const c=this._timeout,o=this.setTimeoutFn(()=>{a(),s(new Error("timeout")),i.close()},c);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(a),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ti(t,"ping",this.onping.bind(this)),ti(t,"data",this.ondata.bind(this)),ti(t,"error",this.onerror.bind(this)),ti(t,"close",this.onclose.bind(this)),ti(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){Sl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new nS(this,t,i),this.nsps[t]=n),n}_destroy(t){const i=Object.keys(this.nsps);for(const n of i)if(this.nsps[n].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let n=0;n<i.length;n++)this.engine.write(i[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,i){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},i);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fr={};function To(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=D1(e,t.path||"/socket.io"),n=i.source,a=i.id,s=i.path,r=fr[a]&&s in fr[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||r;let o;return c?o=new sf(n,t):(fr[a]||(fr[a]=new sf(n,t)),o=fr[a]),i.query&&!t.query&&(t.query=i.queryKey),o.socket(i.path,t)}Object.assign(To,{Manager:sf,Socket:nS,io:To,connect:To});var aS={},rf={exports:{}},Gd,Vm;function B1(){if(Vm)return Gd;Vm=1;var e=1e3,t=e*60,i=t*60,n=i*24,a=n*7,s=n*365.25;Gd=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return r(u);if(f==="number"&&isFinite(u))return d.long?o(u):c(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function r(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*a;case"days":case"day":case"d":return f*n;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=i?Math.round(u/i)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function o(u){var d=Math.abs(u);return d>=n?l(u,d,n,"day"):d>=i?l(u,d,i,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,p){var y=d>=f*1.5;return Math.round(u/f)+" "+p+(y?"s":"")}return Gd}function I1(e){i.debug=i,i.default=i,i.coerce=o,i.disable=r,i.enable=a,i.enabled=c,i.humanize=B1(),i.destroy=l,Object.keys(e).forEach(u=>{i[u]=e[u]}),i.names=[],i.skips=[],i.formatters={};function t(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return i.colors[Math.abs(d)%i.colors.length]}i.selectColor=t;function i(u){let d,f=null,p,y;function b(...w){if(!b.enabled)return;const m=b,v=Number(new Date),h=v-(d||v);m.diff=h,m.prev=d,m.curr=v,d=v,w[0]=i.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let g=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(R,x)=>{if(R==="%%")return"%";g++;const O=i.formatters[x];if(typeof O=="function"){const T=w[g];R=O.call(m,T),w.splice(g,1),g--}return R}),i.formatArgs.call(m,w),(m.log||i.log).apply(m,w)}return b.namespace=u,b.useColors=i.useColors(),b.color=i.selectColor(u),b.extend=n,b.destroy=i.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==i.namespaces&&(p=i.namespaces,y=i.enabled(u)),y),set:w=>{f=w}}),typeof i.init=="function"&&i.init(b),b}function n(u,d){const f=i(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function a(u){i.save(u),i.namespaces=u,i.names=[],i.skips=[];const d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of d)f[0]==="-"?i.skips.push(f.slice(1)):i.names.push(f)}function s(u,d){let f=0,p=0,y=-1,b=0;for(;f<u.length;)if(p<d.length&&(d[p]===u[f]||d[p]==="*"))d[p]==="*"?(y=p,b=f,p++):(f++,p++);else if(y!==-1)p=y+1,b++,f=b;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function r(){const u=[...i.names,...i.skips.map(d=>"-"+d)].join(",");return i.enable(""),u}function c(u){for(const d of i.skips)if(s(u,d))return!1;for(const d of i.names)if(s(u,d))return!0;return!1}function o(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var H1=I1;(function(e,t){t.formatArgs=n,t.save=a,t.load=s,t.useColors=i,t.storage=r(),t.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;o.splice(1,0,l,"color: inherit");let u=0,d=0;o[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(d=u))}),o.splice(d,0,l)}t.log=console.debug||console.log||(()=>{});function a(o){try{o?t.storage.setItem("debug",o):t.storage.removeItem("debug")}catch{}}function s(){let o;try{o=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!o&&typeof process<"u"&&"env"in process&&(o={}.DEBUG),o}function r(){try{return localStorage}catch{}}e.exports=H1(t);const{formatters:c}=e.exports;c.j=function(o){try{return JSON.stringify(o)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(rf,rf.exports);var wl=rf.exports,sS={},ya={},cf={exports:{}};(function(e,t){(function(i,n){var a="2.0.3",s=500,r="user-agent",c="",o="?",l="function",u="undefined",d="object",f="string",p="browser",y="cpu",b="device",w="engine",m="os",v="result",h="name",g="type",S="vendor",R="version",x="architecture",O="major",T="model",U="console",L="mobile",M="tablet",q="smarttv",ee="wearable",X="xr",D="embedded",k="inapp",j="brands",re="formFactors",Ce="fullVersionList",Jt="platform",Wi="platformVersion",en="bitness",ot="sec-ch-ua",wa=ot+"-full-version-list",US=ot+"-arch",zS=ot+"-"+en,BS=ot+"-form-factors",IS=ot+"-"+L,HS=ot+"-"+T,Kp=ot+"-"+Jt,qS=Kp+"-version",Fp=[j,Ce,L,T,Jt,Wi,x,re,en],wc="Amazon",Ra="Apple",Zp="ASUS",Jp="BlackBerry",In="Google",Wp="Huawei",eh="Lenovo",th="Honor",Rc="LG",Yl="Microsoft",Ql="Motorola",Xl="Nvidia",ih="OnePlus",Kl="OPPO",Ks="Samsung",nh="Sharp",Fs="Sony",Fl="Xiaomi",Zl="Zebra",ah="Chrome",sh="Chromium",tn="Chromecast",$S="Edge",Zs="Firefox",Js="Opera",Jl="Facebook",rh="Sogou",Ta="Mobile ",Ws=" Browser",Wl="Windows",ch=typeof i!==u,bt=ch&&i.navigator?i.navigator:n,nn=bt&&bt.userAgentData?bt.userAgentData:n,GS=function(C,A){var P={},de=A;if(!Ec(A)){de={};for(var G in A)for(var be in A[G])de[be]=A[G][be].concat(de[be]?de[be]:[])}for(var z in C)P[z]=de[z]&&de[z].length%2===0?de[z].concat(C[z]):C[z];return P},Tc=function(C){for(var A={},P=0;P<C.length;P++)A[C[P].toUpperCase()]=C[P];return A},ed=function(C,A){if(typeof C===d&&C.length>0){for(var P in C)if(Li(C[P])==Li(A))return!0;return!1}return Ea(C)?Li(A).indexOf(Li(C))!==-1:!1},Ec=function(C,A){for(var P in C)return/^(browser|cpu|device|engine|os)$/.test(P)||(A?Ec(C[P]):!1)},Ea=function(C){return typeof C===f},td=function(C){if(!C)return n;for(var A=[],P=Da(/\\?\"/g,C).split(","),de=0;de<P.length;de++)if(P[de].indexOf(";")>-1){var G=tr(P[de]).split(";v=");A[de]={brand:G[0],version:G[1]}}else A[de]=tr(P[de]);return A},Li=function(C){return Ea(C)?C.toLowerCase():C},id=function(C){return Ea(C)?Da(/[^\d\.]/g,C).split(".")[0]:n},Oi=function(C){for(var A in C){var P=C[A];typeof P==d&&P.length==2?this[P[0]]=P[1]:this[P]=n}return this},Da=function(C,A){return Ea(A)?A.replace(C,c):A},er=function(C){return Da(/\\?\"/g,C)},tr=function(C,A){if(Ea(C))return C=Da(/^\s\s*/,C),typeof A===u?C:C.substring(0,s)},nd=function(C,A){if(!(!C||!A))for(var P=0,de,G,be,z,he,J;P<A.length&&!he;){var ze=A[P],ki=A[P+1];for(de=G=0;de<ze.length&&!he&&ze[de];)if(he=ze[de++].exec(C),he)for(be=0;be<ki.length;be++)J=he[++G],z=ki[be],typeof z===d&&z.length>0?z.length===2?typeof z[1]==l?this[z[0]]=z[1].call(this,J):this[z[0]]=z[1]:z.length===3?typeof z[1]===l&&!(z[1].exec&&z[1].test)?this[z[0]]=J?z[1].call(this,J,z[2]):n:this[z[0]]=J?J.replace(z[1],z[2]):n:z.length===4&&(this[z[0]]=J?z[3].call(this,J.replace(z[1],z[2])):n):this[z]=J||n;P+=2}},an=function(C,A){for(var P in A)if(typeof A[P]===d&&A[P].length>0){for(var de=0;de<A[P].length;de++)if(ed(A[P][de],C))return P===o?n:P}else if(ed(A[P],C))return P===o?n:P;return A.hasOwnProperty("*")?A["*"]:C},oh={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},lh={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":n},dh={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[R,[h,Ta+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[R,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,R],[/opios[\/ ]+([\w\.]+)/i],[R,[h,Js+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[R,[h,Js+" GX"]],[/\bopr\/([\w\.]+)/i],[R,[h,Js]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[R,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[R,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[h,R],[/quark(?:pc)?\/([-\w\.]+)/i],[R,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[R,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[R,[h,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[R,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[R,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[R,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[R,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[R,[h,"Smart "+eh+Ws]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure"+Ws],R],[/\bfocus\/([\w\.]+)/i],[R,[h,Zs+" Focus"]],[/\bopt\/([\w\.]+)/i],[R,[h,Js+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[R,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[R,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[R,[h,Js+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[R,[h,"MIUI"+Ws]],[/fxios\/([\w\.-]+)/i],[R,[h,Ta+Zs]],[/\bqihoobrowser\/?([\w\.]*)/i],[R,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],R],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+Ws],R],[/samsungbrowser\/([\w\.]+)/i],[R,[h,Ks+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[R,[h,rh+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,rh+" Mobile"],R],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,R],[/(lbbrowser|rekonq)/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[R,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Jl],R,[g,k]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,R,[g,k]],[/\bgsa\/([\w\.]+) .*safari\//i],[R,[h,"GSA"],[g,k]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[R,[h,"TikTok"],[g,k]],[/\[(linkedin)app\]/i],[h,[g,k]],[/(chromium)[\/ ]([-\w\.]+)/i],[h,R],[/headlesschrome(?:\/([\w\.]+)| )/i],[R,[h,ah+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,ah+" WebView"],R],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[R,[h,"Android"+Ws]],[/chrome\/([\w\.]+) mobile/i],[R,[h,Ta+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,R],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[R,[h,Ta+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[h,Ta+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[R,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[R,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[h,R],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[h,Ta+Zs],R],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],R],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,R],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[R,[h,Zs+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[h,[R,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[R,/[^\d\.]+./,c]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[x,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[x,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[x,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[x,/ower/,c,Li]],[/ sun4\w[;\)]/i],[[x,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[x,Li]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[S,Ks],[g,M]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[T,[S,Ks],[g,L]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[T,[S,Ra],[g,L]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[S,Ra],[g,M]],[/(macintosh);/i],[T,[S,Ra]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[S,nh],[g,L]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[T,[S,th],[g,M]],[/honor([-\w ]+)[;\)]/i],[T,[S,th],[g,L]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[T,[S,Wp],[g,M]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[S,Wp],[g,L]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[T,/_/g," "],[S,Fl],[g,M]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[T,/_/g," "],[S,Fl],[g,L]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[S,Kl],[g,L]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[T,[S,an,{OnePlus:["304","403","203"],"*":Kl}],[g,M]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[T,[S,"BLU"],[g,L]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[S,"Vivo"],[g,L]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[T,[S,"Realme"],[g,L]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[S,Ql],[g,L]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[S,Ql],[g,M]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[S,Rc],[g,M]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[S,Rc],[g,L]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[T,[S,eh],[g,M]],[/(nokia) (t[12][01])/i],[S,T,[g,M]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[T,/_/g," "],[g,L],[S,"Nokia"]],[/(pixel (c|tablet))\b/i],[T,[S,In],[g,M]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[S,In],[g,L]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[S,Fs],[g,L]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[S,Fs],[g,M]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[S,ih],[g,L]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[S,wc],[g,M]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[S,wc],[g,L]],[/(playbook);[-\w\),; ]+(rim)/i],[T,S,[g,M]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[S,Jp],[g,L]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[S,Zp],[g,M]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[S,Zp],[g,L]],[/(nexus 9)/i],[T,[S,"HTC"],[g,M]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[S,[T,/_/g," "],[g,L]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[T,[S,"TCL"],[g,M]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[T,[S,"TCL"],[g,L]],[/(itel) ((\w+))/i],[[S,Li],T,[g,an,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[S,"Acer"],[g,M]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[S,"Meizu"],[g,L]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[T,[S,"Ulefone"],[g,L]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[T,[S,"Energizer"],[g,L]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[T,[S,"Cat"],[g,L]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[T,[S,"Smartfren"],[g,L]],[/droid.+; (a(?:015|06[35]|142p?))/i],[T,[S,"Nothing"],[g,L]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[T,[S,"Archos"],[g,M]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[T,[S,"Archos"],[g,L]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[S,T,[g,M]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[S,T,[g,L]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[S,T,[g,M]],[/(surface duo)/i],[T,[S,Yl],[g,M]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[S,"Fairphone"],[g,L]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[T,[S,Xl],[g,M]],[/(sprint) (\w+)/i],[S,T,[g,L]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[S,Yl],[g,L]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[S,Zl],[g,M]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[S,Zl],[g,L]],[/smart-tv.+(samsung)/i],[S,[g,q]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[S,Ks],[g,q]],[/tcast.+(lg)e?. ([-\w]+)/i],[S,T,[g,q]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[S,Rc],[g,q]],[/(apple) ?tv/i],[S,[T,Ra+" TV"],[g,q]],[/crkey.*devicetype\/chromecast/i],[[T,tn+" Third Generation"],[S,In],[g,q]],[/crkey.*devicetype\/([^/]*)/i],[[T,/^/,"Chromecast "],[S,In],[g,q]],[/fuchsia.*crkey/i],[[T,tn+" Nest Hub"],[S,In],[g,q]],[/crkey/i],[[T,tn],[S,In],[g,q]],[/(portaltv)/i],[T,[S,Jl],[g,q]],[/droid.+aft(\w+)( bui|\))/i],[T,[S,wc],[g,q]],[/(shield \w+ tv)/i],[T,[S,Xl],[g,q]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[S,nh],[g,q]],[/(bravia[\w ]+)( bui|\))/i],[T,[S,Fs],[g,q]],[/(mi(tv|box)-?\w+) bui/i],[T,[S,Fl],[g,q]],[/Hbbtv.*(technisat) (.*);/i],[S,T,[g,q]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[S,tr],[T,tr],[g,q]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[T,[g,q]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,q]],[/(ouya)/i,/(nintendo) (\w+)/i],[S,T,[g,U]],[/droid.+; (shield)( bui|\))/i],[T,[S,Xl],[g,U]],[/(playstation \w+)/i],[T,[S,Fs],[g,U]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[S,Yl],[g,U]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[T,[S,Ks],[g,ee]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[S,T,[g,ee]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[T,[S,Kl],[g,ee]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[T,[S,Ra],[g,ee]],[/(opwwe\d{3})/i],[T,[S,ih],[g,ee]],[/(moto 360)/i],[T,[S,Ql],[g,ee]],[/(smartwatch 3)/i],[T,[S,Fs],[g,ee]],[/(g watch r)/i],[T,[S,Rc],[g,ee]],[/droid.+; (wt63?0{2,3})\)/i],[T,[S,Zl],[g,ee]],[/droid.+; (glass) \d/i],[T,[S,In],[g,X]],[/(pico) (4|neo3(?: link|pro)?)/i],[S,T,[g,X]],[/(quest( \d| pro)?s?).+vr/i],[T,[S,Jl],[g,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[S,[g,D]],[/(aeobc)\b/i],[T,[S,wc],[g,D]],[/(homepod).+mac os/i],[T,[S,Ra],[g,D]],[/windows iot/i],[[g,D]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[T,[g,an,{mobile:"Mobile",xr:"VR","*":M}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,M]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,L]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[T,[S,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[R,[h,$S+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[h,R],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[R,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,R],[/ladybird\//i],[[h,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[R,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,R],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[h,[R,an,oh]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[R,an,oh],[h,Wl]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[R,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"macOS"],[R,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[R,[h,tn+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[R,[h,tn+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[R,[h,tn+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[R,[h,tn+" Linux"]],[/crkey\/([\d\.]+)/i],[R,[h,tn]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[R,h],[/(ubuntu) ([\w\.]+) like android/i],[[h,/(.+)/,"$1 Touch"],R],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[h,R],[/\(bb(10);/i],[R,[h,Jp]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[R,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[R,[h,Zs+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[R,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[R,[h,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,"Chrome OS"],R],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,R],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],R],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,R]]},Dc=function(){var C={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return Oi.call(C.init,[[p,[h,R,O,g]],[y,[x]],[b,[g,T,S]],[w,[h,R]],[m,[h,R]]]),Oi.call(C.isIgnore,[[p,[R,O]],[w,[R]],[m,[R]]]),Oi.call(C.isIgnoreRgx,[[p,/ ?browser$/i],[m,/ ?os$/i]]),Oi.call(C.toString,[[p,[h,R]],[y,[x]],[b,[S,T]],[w,[h,R]],[m,[h,R]]]),C}(),VS=function(C,A){var P=Dc.init[A],de=Dc.isIgnore[A]||0,G=Dc.isIgnoreRgx[A]||0,be=Dc.toString[A]||0;function z(){Oi.call(this,P)}return z.prototype.getItem=function(){return C},z.prototype.withClientHints=function(){return nn?nn.getHighEntropyValues(Fp).then(function(he){return C.setCH(new uh(he,!1)).parseCH().get()}):C.parseCH().get()},z.prototype.withFeatureCheck=function(){return C.detectFeature().get()},A!=v&&(z.prototype.is=function(he){var J=!1;for(var ze in this)if(this.hasOwnProperty(ze)&&!ed(de,ze)&&Li(G?Da(G,this[ze]):this[ze])==Li(G?Da(G,he):he)){if(J=!0,he!=u)break}else if(he==u&&J){J=!J;break}return J},z.prototype.toString=function(){var he=c;for(var J in be)typeof this[be[J]]!==u&&(he+=(he?" ":c)+this[be[J]]);return he||u}),nn||(z.prototype.then=function(he){var J=this,ze=function(){for(var sn in J)J.hasOwnProperty(sn)&&(this[sn]=J[sn])};ze.prototype={is:z.prototype.is,toString:z.prototype.toString};var ki=new ze;return he(ki),ki}),new z};function uh(C,A){if(C=C||{},Oi.call(this,Fp),A)Oi.call(this,[[j,td(C[ot])],[Ce,td(C[wa])],[L,/\?1/.test(C[IS])],[T,er(C[HS])],[Jt,er(C[Kp])],[Wi,er(C[qS])],[x,er(C[US])],[re,td(C[BS])],[en,er(C[zS])]]);else for(var P in C)this.hasOwnProperty(P)&&typeof C[P]!==u&&(this[P]=C[P])}function fh(C,A,P,de){return this.get=function(G){return G?this.data.hasOwnProperty(G)?this.data[G]:n:this.data},this.set=function(G,be){return this.data[G]=be,this},this.setCH=function(G){return this.uaCH=G,this},this.detectFeature=function(){if(bt&&bt.userAgent==this.ua)switch(this.itemType){case p:bt.brave&&typeof bt.brave.isBrave==l&&this.set(h,"Brave");break;case b:!this.get(g)&&nn&&nn[L]&&this.set(g,L),this.get(T)=="Macintosh"&&bt&&typeof bt.standalone!==u&&bt.maxTouchPoints&&bt.maxTouchPoints>2&&this.set(T,"iPad").set(g,M);break;case m:!this.get(h)&&nn&&nn[Jt]&&this.set(h,nn[Jt]);break;case v:var G=this.data,be=function(z){return G[z].getItem().detectFeature().get()};this.set(p,be(p)).set(y,be(y)).set(b,be(b)).set(w,be(w)).set(m,be(m))}return this},this.parseUA=function(){return this.itemType!=v&&nd.call(this.data,this.ua,this.rgxMap),this.itemType==p&&this.set(O,id(this.get(R))),this},this.parseCH=function(){var G=this.uaCH,be=this.rgxMap;switch(this.itemType){case p:case w:var z=G[Ce]||G[j],he;if(z)for(var J in z){var ze=z[J].brand||z[J],ki=z[J].version;this.itemType==p&&!/not.a.brand/i.test(ze)&&(!he||/chrom/i.test(he)&&ze!=sh)&&(ze=an(ze,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(h,ze).set(R,ki).set(O,id(ki)),he=ze),this.itemType==w&&ze==sh&&this.set(R,ki)}break;case y:var sn=G[x];sn&&(sn&&G[en]=="64"&&(sn+="64"),nd.call(this.data,sn+";",be));break;case b:if(G[L]&&this.set(g,L),G[T]&&(this.set(T,G[T]),!this.get(g)||!this.get(S))){var ir={};nd.call(ir,"droid 9; "+G[T]+")",be),!this.get(g)&&ir.type&&this.set(g,ir.type),!this.get(S)&&ir.vendor&&this.set(S,ir.vendor)}if(G[re]){var xc;if(typeof G[re]!="string")for(var ph=0;!xc&&ph<G[re].length;)xc=an(G[re][ph++],lh);else xc=an(G[re],lh);this.set(g,xc)}break;case m:var ad=G[Jt];if(ad){var sd=G[Wi];ad==Wl&&(sd=parseInt(id(sd),10)>=13?"11":"10"),this.set(h,ad).set(R,sd)}this.get(h)==Wl&&G[T]=="Xbox"&&this.set(h,"Xbox").set(R,n);break;case v:var YS=this.data,nr=function(QS){return YS[QS].getItem().setCH(G).parseCH().get()};this.set(p,nr(p)).set(y,nr(y)).set(b,nr(b)).set(w,nr(w)).set(m,nr(m))}return this},Oi.call(this,[["itemType",C],["ua",A],["uaCH",de],["rgxMap",P],["data",VS(this,C)]]),this}function Wt(C,A,P){if(typeof C===d?(Ec(C,!0)?(typeof A===d&&(P=A),A=C):(P=C,A=n),C=n):typeof C===f&&!Ec(A,!0)&&(P=A,A=n),P&&typeof P.append===l){var de={};P.forEach(function(J,ze){de[ze]=J}),P=de}if(!(this instanceof Wt))return new Wt(C,A,P).getResult();var G=typeof C===f?C:P&&P[r]?P[r]:bt&&bt.userAgent?bt.userAgent:c,be=new uh(P,!0),z=A?GS(dh,A):dh,he=function(J){return J==v?function(){return new fh(J,G,z,be).set("ua",G).set(p,this.getBrowser()).set(y,this.getCPU()).set(b,this.getDevice()).set(w,this.getEngine()).set(m,this.getOS()).get()}:function(){return new fh(J,G,z[J],be).parseUA().get()}};return Oi.call(this,[["getBrowser",he(p)],["getCPU",he(y)],["getDevice",he(b)],["getEngine",he(w)],["getOS",he(m)],["getResult",he(v)],["getUA",function(){return G}],["setUA",function(J){return Ea(J)&&(G=J.length>s?tr(J,s):J),this}]]).setUA(G),this}Wt.VERSION=a,Wt.BROWSER=Tc([h,R,O,g]),Wt.CPU=Tc([x]),Wt.DEVICE=Tc([T,S,g,U,L,q,M,ee,D]),Wt.ENGINE=Wt.OS=Tc([h,R]),e.exports&&(t=e.exports=Wt),t.UAParser=Wt;var Ca=ch&&(i.jQuery||i.Zepto);if(Ca&&!Ca.ua){var Cc=new Wt;Ca.ua=Cc.getResult(),Ca.ua.get=function(){return Cc.getUA()},Ca.ua.set=function(C){Cc.setUA(C);var A=Cc.getResult();for(var P in A)Ca.ua[P]=A[P]}}})(typeof window=="object"?window:Qn)})(cf,cf.exports);var q1=cf.exports,Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Logger=void 0;const La=wl,Oa="mediasoup-client";let $1=class{constructor(t){_(this,"_debug");_(this,"_warn");_(this,"_error");t?(this._debug=(0,La.default)(`${Oa}:${t}`),this._warn=(0,La.default)(`${Oa}:WARN:${t}`),this._error=(0,La.default)(`${Oa}:ERROR:${t}`)):(this._debug=(0,La.default)(Oa),this._warn=(0,La.default)(`${Oa}:WARN`),this._error=(0,La.default)(`${Oa}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Oe.Logger=$1;var si={},mp={exports:{}},bs=typeof Reflect=="object"?Reflect:null,Ym=bs&&typeof bs.apply=="function"?bs.apply:function(t,i,n){return Function.prototype.apply.call(t,i,n)},Eo;bs&&typeof bs.ownKeys=="function"?Eo=bs.ownKeys:Object.getOwnPropertySymbols?Eo=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Eo=function(t){return Object.getOwnPropertyNames(t)};function G1(e){console&&console.warn&&console.warn(e)}var rS=Number.isNaN||function(t){return t!==t};function Se(){Se.init.call(this)}mp.exports=Se;mp.exports.once=X1;Se.EventEmitter=Se;Se.prototype._events=void 0;Se.prototype._eventsCount=0;Se.prototype._maxListeners=void 0;var Qm=10;function Rl(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Se,"defaultMaxListeners",{enumerable:!0,get:function(){return Qm},set:function(e){if(typeof e!="number"||e<0||rS(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Qm=e}});Se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Se.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||rS(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cS(e){return e._maxListeners===void 0?Se.defaultMaxListeners:e._maxListeners}Se.prototype.getMaxListeners=function(){return cS(this)};Se.prototype.emit=function(t){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var a=t==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var r;if(i.length>0&&(r=i[0]),r instanceof Error)throw r;var c=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw c.context=r,c}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")Ym(o,this,i);else for(var l=o.length,u=fS(o,l),n=0;n<l;++n)Ym(u[n],this,i);return!0};function oS(e,t,i,n){var a,s,r;if(Rl(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),r=s[t]),r===void 0)r=s[t]=i,++e._eventsCount;else if(typeof r=="function"?r=s[t]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),a=cS(e),a>0&&r.length>a&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=r.length,G1(c)}return e}Se.prototype.addListener=function(t,i){return oS(this,t,i,!1)};Se.prototype.on=Se.prototype.addListener;Se.prototype.prependListener=function(t,i){return oS(this,t,i,!0)};function V1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lS(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},a=V1.bind(n);return a.listener=i,n.wrapFn=a,a}Se.prototype.once=function(t,i){return Rl(i),this.on(t,lS(this,t,i)),this};Se.prototype.prependOnceListener=function(t,i){return Rl(i),this.prependListener(t,lS(this,t,i)),this};Se.prototype.removeListener=function(t,i){var n,a,s,r,c;if(Rl(i),a=this._events,a===void 0)return this;if(n=a[t],n===void 0)return this;if(n===i||n.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||i));else if(typeof n!="function"){for(s=-1,r=n.length-1;r>=0;r--)if(n[r]===i||n[r].listener===i){c=n[r].listener,s=r;break}if(s<0)return this;s===0?n.shift():Y1(n,s),n.length===1&&(a[t]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",t,c||i)}return this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.removeAllListeners=function(t){var i,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),r;for(a=0;a<s.length;++a)r=s[a],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=n[t],typeof i=="function")this.removeListener(t,i);else if(i!==void 0)for(a=i.length-1;a>=0;a--)this.removeListener(t,i[a]);return this};function dS(e,t,i){var n=e._events;if(n===void 0)return[];var a=n[t];return a===void 0?[]:typeof a=="function"?i?[a.listener||a]:[a]:i?Q1(a):fS(a,a.length)}Se.prototype.listeners=function(t){return dS(this,t,!0)};Se.prototype.rawListeners=function(t){return dS(this,t,!1)};Se.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):uS.call(e,t)};Se.prototype.listenerCount=uS;function uS(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Se.prototype.eventNames=function(){return this._eventsCount>0?Eo(this._events):[]};function fS(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function Y1(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Q1(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function X1(e,t){return new Promise(function(i,n){function a(r){e.removeListener(t,s),n(r)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",a),i([].slice.call(arguments))}pS(e,t,s,{once:!0}),t!=="error"&&K1(e,a,{once:!0})})}function K1(e,t,i){typeof e.on=="function"&&pS(e,"error",t,i)}function pS(e,t,i,n){if(typeof e.on=="function")n.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(s){n.once&&e.removeEventListener(t,a),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var F1=mp.exports;Object.defineProperty(si,"__esModule",{value:!0});si.EnhancedEventEmitter=void 0;const Z1=F1,J1=Oe,W1=new J1.Logger("EnhancedEventEmitter");class eR extends Z1.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(t,...i){return super.emit(t,...i)}safeEmit(t,...i){try{return super.emit(t,...i)}catch(n){W1.error("safeEmit() | event listener threw an error [eventName:%s]:%o",t,n);try{super.emit("listenererror",t,n)}catch{}return!!super.listenerCount(t)}}on(t,i){return super.on(t,i),this}off(t,i){return super.off(t,i),this}addListener(t,i){return super.on(t,i),this}prependListener(t,i){return super.prependListener(t,i),this}once(t,i){return super.once(t,i),this}prependOnceListener(t,i){return super.prependOnceListener(t,i),this}removeListener(t,i){return super.off(t,i),this}removeAllListeners(t){return super.removeAllListeners(t),this}listenerCount(t){return super.listenerCount(t)}listeners(t){return super.listeners(t)}rawListeners(t){return super.rawListeners(t)}}si.EnhancedEventEmitter=eR;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.InvalidStateError=qe.UnsupportedError=void 0;class gp extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,gp):this.stack=new Error(t).stack}}qe.UnsupportedError=gp;class _p extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,_p):this.stack=new Error(t).stack}}qe.InvalidStateError=_p;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.clone=tR;Pe.generateRandomNumber=iR;Pe.deepFreeze=hS;function tR(e){if(e!==void 0)return Number.isNaN(e)?NaN:typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}function iR(){return Math.round(Math.random()*1e7)}function hS(e){const t=Reflect.ownKeys(e);for(const i of t){const n=e[i];(n&&typeof n=="object"||typeof n=="function")&&hS(n)}return Object.freeze(e)}var _e={},rt={},Tl={},nR=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.Logger=void 0;const ka=nR(wl),Aa="h264-profile-level-id";let aR=class{constructor(t){t?(this._debug=(0,ka.default)(`${Aa}:${t}`),this._warn=(0,ka.default)(`${Aa}:WARN:${t}`),this._error=(0,ka.default)(`${Aa}:ERROR:${t}`)):(this._debug=(0,ka.default)(Aa),this._warn=(0,ka.default)(`${Aa}:WARN`),this._error=(0,ka.default)(`${Aa}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Tl.Logger=aR;Object.defineProperty(rt,"__esModule",{value:!0});rt.ProfileLevelId=rt.Level=rt.Profile=void 0;rt.parseProfileLevelId=mS;rt.profileLevelIdToString=gS;rt.profileToString=oR;rt.levelToString=lR;rt.parseSdpProfileLevelId=pa;rt.isSameProfile=dR;rt.isSameProfileAndLevel=uR;rt.generateProfileLevelIdStringForAnswer=fR;rt.supportedLevel=pR;const sR=Tl,ni=new sR.Logger;var we;(function(e){e[e.ConstrainedBaseline=1]="ConstrainedBaseline",e[e.Baseline=2]="Baseline",e[e.Main=3]="Main",e[e.ConstrainedHigh=4]="ConstrainedHigh",e[e.High=5]="High",e[e.PredictiveHigh444=6]="PredictiveHigh444"})(we||(rt.Profile=we={}));var N;(function(e){e[e.L1_b=0]="L1_b",e[e.L1=10]="L1",e[e.L1_1=11]="L1_1",e[e.L1_2=12]="L1_2",e[e.L1_3=13]="L1_3",e[e.L2=20]="L2",e[e.L2_1=21]="L2_1",e[e.L2_2=22]="L2_2",e[e.L3=30]="L3",e[e.L3_1=31]="L3_1",e[e.L3_2=32]="L3_2",e[e.L4=40]="L4",e[e.L4_1=41]="L4_1",e[e.L4_2=42]="L4_2",e[e.L5=50]="L5",e[e.L5_1=51]="L5_1",e[e.L5_2=52]="L5_2"})(N||(rt.Level=N={}));class El{constructor(t,i){this.profile=t,this.level=i}}rt.ProfileLevelId=El;const rR=new El(we.ConstrainedBaseline,N.L3_1);class ji{constructor(t){this.mask=~Km("x",t),this.masked_value=Km("1",t)}isMatch(t){return this.masked_value===(t&this.mask)}}class Ui{constructor(t,i,n){this.profile_idc=t,this.profile_iop=i,this.profile=n}}const cR=[new Ui(66,new ji("x1xx0000"),we.ConstrainedBaseline),new Ui(77,new ji("1xxx0000"),we.ConstrainedBaseline),new Ui(88,new ji("11xx0000"),we.ConstrainedBaseline),new Ui(66,new ji("x0xx0000"),we.Baseline),new Ui(88,new ji("10xx0000"),we.Baseline),new Ui(77,new ji("0x0x0000"),we.Main),new Ui(100,new ji("00000000"),we.High),new Ui(100,new ji("00001100"),we.ConstrainedHigh),new Ui(244,new ji("00000000"),we.PredictiveHigh444)],Xm=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:N.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:N.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:N.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:N.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:N.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:N.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:N.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:N.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:N.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:N.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:N.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:N.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:N.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:N.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:N.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:N.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:N.L5_2}];function mS(e){if(typeof e!="string"||e.length!==6)return;const i=parseInt(e,16);if(i===0)return;const n=i&255,a=i>>8&255,s=i>>16&255;let r;switch(n){case N.L1_1:{r=a&16?N.L1_b:N.L1_1;break}case N.L1:case N.L1_2:case N.L1_3:case N.L2:case N.L2_1:case N.L2_2:case N.L3:case N.L3_1:case N.L3_2:case N.L4:case N.L4_1:case N.L4_2:case N.L5:case N.L5_1:case N.L5_2:{r=n;break}default:{ni.warn(`parseProfileLevelId() | unrecognized level_idc [str:${e}, level_idc:${n}]`);return}}for(const c of cR)if(s===c.profile_idc&&c.profile_iop.isMatch(a))return ni.debug(`parseProfileLevelId() | result [str:${e}, profile:${c.profile}, level:${r}]`),new El(c.profile,r);ni.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${e}, profile_idc:${s}, profile_iop:${a}]`)}function gS(e){if(e.level==N.L1_b)switch(e.profile){case we.ConstrainedBaseline:return"42f00b";case we.Baseline:return"42100b";case we.Main:return"4d100b";default:{ni.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${e.profile}`);return}}let t;switch(e.profile){case we.ConstrainedBaseline:{t="42e0";break}case we.Baseline:{t="4200";break}case we.Main:{t="4d00";break}case we.ConstrainedHigh:{t="640c";break}case we.High:{t="6400";break}case we.PredictiveHigh444:{t="f400";break}default:{ni.warn(`profileLevelIdToString() | unrecognized profile ${e.profile}`);return}}let i=e.level.toString(16);return i.length===1&&(i=`0${i}`),`${t}${i}`}function oR(e){switch(e){case we.ConstrainedBaseline:return"ConstrainedBaseline";case we.Baseline:return"Baseline";case we.Main:return"Main";case we.ConstrainedHigh:return"ConstrainedHigh";case we.High:return"High";case we.PredictiveHigh444:return"PredictiveHigh444";default:{ni.warn(`profileToString() | unrecognized profile ${e}`);return}}}function lR(e){switch(e){case N.L1_b:return"1b";case N.L1:return"1";case N.L1_1:return"1.1";case N.L1_2:return"1.2";case N.L1_3:return"1.3";case N.L2:return"2";case N.L2_1:return"2.1";case N.L2_2:return"2.2";case N.L3:return"3";case N.L3_1:return"3.1";case N.L3_2:return"3.2";case N.L4:return"4";case N.L4_1:return"4.1";case N.L4_2:return"4.2";case N.L5:return"5";case N.L5_1:return"5.1";case N.L5_2:return"5.2";default:{ni.warn(`levelToString() | unrecognized level ${e}`);return}}}function pa(e={}){const t=e["profile-level-id"];return t?mS(t):rR}function dR(e={},t={}){const i=pa(e),n=pa(t);return!!(i&&n&&i.profile===n.profile)}function uR(e={},t={}){const i=pa(e),n=pa(t);return!!(i&&n&&i.profile===n.profile&&i.level==n.level)}function fR(e={},t={}){if(!e["profile-level-id"]&&!t["profile-level-id"]){ni.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const i=pa(e),n=pa(t);if(!i)throw new TypeError("invalid local_profile_level_id");if(!n)throw new TypeError("invalid remote_profile_level_id");if(i.profile!==n.profile)throw new TypeError("H264 Profile mismatch");const a=Fm(e)&&Fm(t),s=i.level,r=n.level,c=mR(s,r),o=a?s:c;return ni.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${i.profile}, level:${o}]`),gS(new El(i.profile,o))}function pR(e,t){for(let n=Xm.length-1;n>=0;--n){const a=Xm[n];if(a.max_macroblock_frame_size*256<=e&&a.max_macroblocks_per_second<=t*a.max_macroblock_frame_size)return ni.debug(`supportedLevel() | result [max_frame_pixel_count:${e}, max_fps:${t}, level:${a.level}]`),a.level}ni.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${e}, max_fps:${t}]`)}function Km(e,t){return+(t[0]===e)<<7|+(t[1]===e)<<6|+(t[2]===e)<<5|+(t[3]===e)<<4|+(t[4]===e)<<3|+(t[5]===e)<<2|+(t[6]===e)<<1|+(t[7]===e)<<0}function hR(e,t){return e===N.L1_b?t!==N.L1&&t!==N.L1_b:t===N.L1_b?e!==N.L1:e<t}function mR(e,t){return hR(e,t)?e:t}function Fm(e={}){const t=e["level-asymmetry-allowed"];return t===!0||t===1||t==="1"}Object.defineProperty(_e,"__esModule",{value:!0});_e.validateRtpCapabilities=SR;_e.validateRtpParameters=vp;_e.validateSctpStreamParameters=bR;_e.validateSctpCapabilities=wR;_e.getExtendedRtpCapabilities=RR;_e.getRecvRtpCapabilities=TR;_e.getSendingRtpParameters=ER;_e.getSendingRemoteRtpParameters=DR;_e.reduceCodecs=CR;_e.generateProbatorRtpParameters=xR;_e.canSend=MR;_e.canReceive=LR;const Zm=rt,gR=Pe,_R="probator",vR=1234,yR=127;function SR(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)OR(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)kR(t)}function vp(e){if(typeof e!="object")throw new TypeError("params is not an object");if(e.mid&&typeof e.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)AR(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)PR(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)NR(t);if(e.rtcp&&typeof e.rtcp!="object")throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),jR(e.rtcp)}function bR(e){if(typeof e!="object")throw new TypeError("params is not an object");if(typeof e.streamId!="number")throw new TypeError("missing params.streamId");let t=!1;if(typeof e.ordered=="boolean"?t=!0:e.ordered=!0,e.maxPacketLifeTime&&typeof e.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&typeof e.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!t&&(e.maxPacketLifeTime||e.maxRetransmits)&&(e.ordered=!1),e.label&&typeof e.label!="string")throw new TypeError("invalid params.label");if(e.protocol&&typeof e.protocol!="string")throw new TypeError("invalid params.protocol")}function wR(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(!e.numStreams||typeof e.numStreams!="object")throw new TypeError("missing caps.numStreams");UR(e.numStreams)}function RR(e,t,i){const n={codecs:[],headerExtensions:[]};if(i)for(const a of e.codecs??[]){if(us(a))continue;const s=(t.codecs??[]).find(c=>of(c,a,{strict:!0,modify:!0}));if(!s)continue;const r={mimeType:a.mimeType,kind:a.kind,clockRate:a.clockRate,channels:a.channels,localPayloadType:a.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:s.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:a.parameters,remoteParameters:s.parameters,rtcpFeedback:Jm(a,s)};n.codecs.push(r)}else for(const a of t.codecs??[]){if(us(a))continue;const s=(e.codecs??[]).find(c=>of(c,a,{strict:!0,modify:!0}));if(!s)continue;const r={mimeType:s.mimeType,kind:s.kind,clockRate:s.clockRate,channels:s.channels,localPayloadType:s.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:a.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:s.parameters,remoteParameters:a.parameters,rtcpFeedback:Jm(s,a)};n.codecs.push(r)}for(const a of n.codecs){const s=e.codecs.find(c=>us(c)&&c.parameters.apt===a.localPayloadType),r=t.codecs.find(c=>us(c)&&c.parameters.apt===a.remotePayloadType);s&&r&&(a.localRtxPayloadType=s.preferredPayloadType,a.remoteRtxPayloadType=r.preferredPayloadType)}for(const a of t.headerExtensions){const s=e.headerExtensions.find(c=>zR(c,a));if(!s)continue;const r={kind:a.kind,uri:a.uri,sendId:s.preferredId,recvId:a.preferredId,encrypt:s.preferredEncrypt,direction:"sendrecv"};switch(a.direction){case"sendrecv":{r.direction="sendrecv";break}case"recvonly":{r.direction="sendonly";break}case"sendonly":{r.direction="recvonly";break}case"inactive":{r.direction="inactive";break}}n.headerExtensions.push(r)}return n}function TR(e){const t={codecs:[],headerExtensions:[]};for(const i of e.codecs){const n={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(t.codecs.push(n),!i.remoteRtxPayloadType)continue;const a={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};t.codecs.push(a)}for(const i of e.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const n={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};t.headerExtensions.push(n)}return t}function ER(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const a={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(i.codecs.push(a),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const a={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};i.headerExtensions.push(a)}return i}function DR(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const a={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(i.codecs.push(a),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const a={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};i.headerExtensions.push(a)}if(i.headerExtensions.some(n=>n.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const n of i.codecs)n.rtcpFeedback=(n.rtcpFeedback??[]).filter(a=>a.type!=="goog-remb");else if(i.headerExtensions.some(n=>n.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const n of i.codecs)n.rtcpFeedback=(n.rtcpFeedback??[]).filter(a=>a.type!=="transport-cc");else for(const n of i.codecs)n.rtcpFeedback=(n.rtcpFeedback??[]).filter(a=>a.type!=="transport-cc"&&a.type!=="goog-remb");return i}function CR(e,t){const i=[];if(!t)i.push(e[0]),us(e[1])&&i.push(e[1]);else{for(let n=0;n<e.length;++n)if(of(e[n],t,{strict:!0})){i.push(e[n]),us(e[n+1])&&i.push(e[n+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function xR(e){e=gR.clone(e),vp(e);const t={mid:_R,codecs:[],headerExtensions:[],encodings:[{ssrc:vR}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=yR,t.headerExtensions=e.headerExtensions,t}function MR(e,t){return t.codecs.some(i=>i.kind===e)}function LR(e,t){if(vp(e),e.codecs.length===0)return!1;const i=e.codecs[0];return t.codecs.some(n=>n.remotePayloadType===i.payloadType)}function OR(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(e.kind=i[1].toLowerCase(),e.preferredPayloadType&&typeof e.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");e.kind==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const n of Object.keys(e.parameters)){let a=e.parameters[n];if(a===void 0&&(e.parameters[n]="",a=""),typeof a!="string"&&typeof a!="number")throw new TypeError(`invalid codec parameter [key:${n}s, value:${a}]`);if(n==="apt"&&typeof a!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const n of e.rtcpFeedback)_S(n)}function _S(e){if(typeof e!="object")throw new TypeError("fb is not an object");if(!e.type||typeof e.type!="string")throw new TypeError("missing fb.type");(!e.parameter||typeof e.parameter!="string")&&(e.parameter="")}function kR(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(e.kind!=="audio"&&e.kind!=="video")throw new TypeError("invalid ext.kind");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.preferredId!="number")throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&typeof e.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&typeof e.direction!="string")throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function AR(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof e.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const a of Object.keys(e.parameters)){let s=e.parameters[a];if(s===void 0&&(e.parameters[a]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${a}s, value:${s}]`);if(a==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const a of e.rtcpFeedback)_S(a)}function PR(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.id!="number")throw new TypeError("missing ext.id");if(e.encrypt&&typeof e.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const t of Object.keys(e.parameters)){let i=e.parameters[t];if(i===void 0&&(e.parameters[t]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function NR(e){if(typeof e!="object")throw new TypeError("encoding is not an object");if(e.ssrc&&typeof e.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(e.rid&&typeof e.rid!="string")throw new TypeError("invalid encoding.rid");if(e.rtx&&typeof e.rtx!="object")throw new TypeError("invalid encoding.rtx");if(e.rtx&&typeof e.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!e.dtx||typeof e.dtx!="boolean")&&(e.dtx=!1),e.scalabilityMode&&typeof e.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function jR(e){if(typeof e!="object")throw new TypeError("rtcp is not an object");if(e.cname&&typeof e.cname!="string")throw new TypeError("invalid rtcp.cname");(!e.reducedSize||typeof e.reducedSize!="boolean")&&(e.reducedSize=!0)}function UR(e){if(typeof e!="object")throw new TypeError("numStreams is not an object");if(typeof e.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof e.MIS!="number")throw new TypeError("missing numStreams.MIS")}function us(e){return e?/.+\/rtx$/i.test(e.mimeType):!1}function of(e,t,{strict:i=!1,modify:n=!1}={}){const a=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(a!==s||e.clockRate!==t.clockRate||e.channels!==t.channels)return!1;switch(a){case"video/h264":{if(i){const r=e.parameters["packetization-mode"]??0,c=t.parameters["packetization-mode"]??0;if(r!==c||!Zm.isSameProfile(e.parameters,t.parameters))return!1;let o;try{o=Zm.generateProfileLevelIdStringForAnswer(e.parameters,t.parameters)}catch{return!1}n&&(o?(e.parameters["profile-level-id"]=o,t.parameters["profile-level-id"]=o):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const r=e.parameters["profile-id"]??0,c=t.parameters["profile-id"]??0;if(r!==c)return!1}break}}return!0}function zR(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}function Jm(e,t){const i=[];for(const n of e.rtcpFeedback??[]){const a=(t.rtcpFeedback??[]).find(s=>s.type===n.type&&(s.parameter===n.parameter||!s.parameter&&!n.parameter));a&&i.push(a)}return i}var mc={},vS={},Dl={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.Logger=void 0;const Pa=wl,Na="awaitqueue";class BR{constructor(t){_(this,"_debug");_(this,"_warn");_(this,"_error");t?(this._debug=Pa(`${Na}:${t}`),this._warn=Pa(`${Na}:WARN:${t}`),this._error=Pa(`${Na}:ERROR:${t}`)):(this._debug=Pa(Na),this._warn=Pa(`${Na}:WARN`),this._error=Pa(`${Na}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Cl.Logger=BR;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.AwaitQueueRemovedTaskError=ha.AwaitQueueStoppedError=void 0;class yp extends Error{constructor(t){super(t??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,yp)}}ha.AwaitQueueStoppedError=yp;class Sp extends Error{constructor(t){super(t??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Sp)}}ha.AwaitQueueRemovedTaskError=Sp;Object.defineProperty(Dl,"__esModule",{value:!0});Dl.AwaitQueue=void 0;const IR=Cl,Wm=ha,zi=new IR.Logger("AwaitQueue");class HR{constructor(){_(this,"pendingTasks",new Map);_(this,"nextTaskId",0);_(this,"stopping",!1);zi.debug("constructor()")}get size(){return this.pendingTasks.size}async push(t,i){if(i=i??t.name,zi.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((n,a)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:r=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),zi.debug(`resolving task [name:${s.name}]`),n(r);const[c]=this.pendingTasks.values();c&&!c.executedAt&&this.execute(c)},reject:r=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),zi.debug(`rejecting task [name:${s.name}]: %s`,String(r)),a(r),!this.stopping)){const[c]=this.pendingTasks.values();c&&!c.executedAt&&this.execute(c)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){zi.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())zi.debug(`stop() | stopping task [name:${t.name}]`),t.reject(new Wm.AwaitQueueStoppedError);this.stopping=!1}remove(t){zi.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){zi.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new Wm.AwaitQueueRemovedTaskError)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(n=>({idx:i++,task:n.task,name:n.name,enqueuedTime:n.executedAt?n.executedAt-n.enqueuedAt:t-n.enqueuedAt,executionTime:n.executedAt?t-n.executedAt:0}))}async execute(t){if(zi.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}Dl.AwaitQueue=HR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwaitQueueRemovedTaskError=e.AwaitQueueStoppedError=e.AwaitQueue=void 0;var t=Dl;Object.defineProperty(e,"AwaitQueue",{enumerable:!0,get:function(){return t.AwaitQueue}});var i=ha;Object.defineProperty(e,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return i.AwaitQueueStoppedError}}),Object.defineProperty(e,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return i.AwaitQueueRemovedTaskError}})})(vS);var gc={};Object.defineProperty(gc,"__esModule",{value:!0});gc.Producer=void 0;const qR=Oe,eg=si,ja=qe,oi=new qR.Logger("Producer");class $R extends eg.EnhancedEventEmitter{constructor({id:i,localId:n,rtpSender:a,track:s,rtpParameters:r,stopTracks:c,disableTrackOnPause:o,zeroRtpOnPause:l,appData:u}){super();_(this,"_id");_(this,"_localId");_(this,"_closed",!1);_(this,"_rtpSender");_(this,"_track");_(this,"_kind");_(this,"_rtpParameters");_(this,"_paused");_(this,"_maxSpatialLayer");_(this,"_stopTracks");_(this,"_disableTrackOnPause");_(this,"_zeroRtpOnPause");_(this,"_appData");_(this,"_observer",new eg.EnhancedEventEmitter);oi.debug("constructor()"),this._id=i,this._localId=n,this._rtpSender=a,this._track=s,this._kind=s.kind,this._rtpParameters=r,this._paused=o?!s.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=c,this._disableTrackOnPause=o,this._zeroRtpOnPause=l,this._appData=u??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(i){this._appData=i}get observer(){return this._observer}close(){this._closed||(oi.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(oi.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new ja.InvalidStateError("closed");return new Promise((i,n)=>{this.safeEmit("@getstats",i,n)})}pause(){if(oi.debug("pause()"),this._closed){oi.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((i,n)=>{this.safeEmit("@pause",i,n)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(oi.debug("resume()"),this._closed){oi.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((i,n)=>{this.safeEmit("@resume",i,n)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:i}){if(oi.debug("replaceTrack() [track:%o]",i),this._closed){if(i&&this._stopTracks)try{i.stop()}catch{}throw new ja.InvalidStateError("closed")}else if(i&&i.readyState==="ended")throw new ja.InvalidStateError("track ended");if(i===this._track){oi.debug("replaceTrack() | same track, ignored");return}await new Promise((n,a)=>{this.safeEmit("@replacetrack",i,n,a)}),this.destroyTrack(),this._track=i,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(i){if(this._closed)throw new ja.InvalidStateError("closed");if(this._kind!=="video")throw new ja.UnsupportedError("not a video Producer");if(typeof i!="number")throw new TypeError("invalid spatialLayer");i!==this._maxSpatialLayer&&(await new Promise((n,a)=>{this.safeEmit("@setmaxspatiallayer",i,n,a)}).catch(()=>{}),this._maxSpatialLayer=i)}async setRtpEncodingParameters(i){if(this._closed)throw new ja.InvalidStateError("closed");if(typeof i!="object")throw new TypeError("invalid params");await new Promise((n,a)=>{this.safeEmit("@setrtpencodingparameters",i,n,a)})}onTrackEnded(){oi.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}gc.Producer=$R;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.Consumer=void 0;const GR=Oe,tg=si,VR=qe,li=new GR.Logger("Consumer");class YR extends tg.EnhancedEventEmitter{constructor({id:i,localId:n,producerId:a,rtpReceiver:s,track:r,rtpParameters:c,appData:o}){super();_(this,"_id");_(this,"_localId");_(this,"_producerId");_(this,"_closed",!1);_(this,"_rtpReceiver");_(this,"_track");_(this,"_rtpParameters");_(this,"_paused");_(this,"_appData");_(this,"_observer",new tg.EnhancedEventEmitter);li.debug("constructor()"),this._id=i,this._localId=n,this._producerId=a,this._rtpReceiver=s,this._track=r,this._rtpParameters=c,this._paused=!r.enabled,this._appData=o??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(i){this._appData=i}get observer(){return this._observer}close(){this._closed||(li.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(li.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new VR.InvalidStateError("closed");return new Promise((i,n)=>{this.safeEmit("@getstats",i,n)})}pause(){if(li.debug("pause()"),this._closed){li.error("pause() | Consumer closed");return}if(this._paused){li.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(li.debug("resume()"),this._closed){li.error("resume() | Consumer closed");return}if(!this._paused){li.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){li.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}_c.Consumer=YR;var vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.DataProducer=void 0;const QR=Oe,ig=si,XR=qe,Bi=new QR.Logger("DataProducer");class KR extends ig.EnhancedEventEmitter{constructor({id:i,dataChannel:n,sctpStreamParameters:a,appData:s}){super();_(this,"_id");_(this,"_dataChannel");_(this,"_closed",!1);_(this,"_sctpStreamParameters");_(this,"_appData");_(this,"_observer",new ig.EnhancedEventEmitter);Bi.debug("constructor()"),this._id=i,this._dataChannel=n,this._sctpStreamParameters=a,this._appData=s??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(i){this._dataChannel.bufferedAmountLowThreshold=i}get appData(){return this._appData}set appData(i){this._appData=i}get observer(){return this._observer}close(){this._closed||(Bi.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Bi.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(i){if(Bi.debug("send()"),this._closed)throw new XR.InvalidStateError("closed");this._dataChannel.send(i)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Bi.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",i=>{if(this._closed)return;let{error:n}=i;n||(n=new Error("unknown DataChannel error")),n.errorDetail==="sctp-failure"?Bi.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.sctpCauseCode,n.message):Bi.error('DataChannel "error" event: %o',n),this.safeEmit("error",n)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Bi.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||Bi.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}vc.DataProducer=KR;var yc={};Object.defineProperty(yc,"__esModule",{value:!0});yc.DataConsumer=void 0;const FR=Oe,ng=si,qn=new FR.Logger("DataConsumer");class ZR extends ng.EnhancedEventEmitter{constructor({id:i,dataProducerId:n,dataChannel:a,sctpStreamParameters:s,appData:r}){super();_(this,"_id");_(this,"_dataProducerId");_(this,"_dataChannel");_(this,"_closed",!1);_(this,"_sctpStreamParameters");_(this,"_appData");_(this,"_observer",new ng.EnhancedEventEmitter);qn.debug("constructor()"),this._id=i,this._dataProducerId=n,this._dataChannel=a,this._sctpStreamParameters=s,this._appData=r??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(i){this._dataChannel.binaryType=i}get appData(){return this._appData}set appData(i){this._appData=i}get observer(){return this._observer}close(){this._closed||(qn.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(qn.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(qn.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",i=>{if(this._closed)return;let{error:n}=i;n||(n=new Error("unknown DataChannel error")),n.errorDetail==="sctp-failure"?qn.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.sctpCauseCode,n.message):qn.error('DataChannel "error" event: %o',n),this.safeEmit("error",n)}),this._dataChannel.addEventListener("close",()=>{this._closed||(qn.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",i=>{this._closed||this.safeEmit("message",i.data)})}}yc.DataConsumer=ZR;Object.defineProperty(mc,"__esModule",{value:!0});mc.Transport=void 0;const JR=vS,WR=Oe,ag=si,Qe=qe,Vd=Pe,pr=_e,eT=gc,tT=_c,iT=vc,nT=yc,Ie=new WR.Logger("Transport");class aT{constructor(t){_(this,"consumerOptions");_(this,"promise");_(this,"resolve");_(this,"reject");this.consumerOptions=t,this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n})}}class sT extends ag.EnhancedEventEmitter{constructor({direction:i,id:n,iceParameters:a,iceCandidates:s,dtlsParameters:r,sctpParameters:c,iceServers:o,iceTransportPolicy:l,additionalSettings:u,proprietaryConstraints:d,appData:f,handlerFactory:p,extendedRtpCapabilities:y,canProduceByKind:b}){super();_(this,"_id");_(this,"_closed",!1);_(this,"_direction");_(this,"_extendedRtpCapabilities");_(this,"_canProduceByKind");_(this,"_maxSctpMessageSize");_(this,"_handler");_(this,"_iceGatheringState","new");_(this,"_connectionState","new");_(this,"_appData");_(this,"_producers",new Map);_(this,"_consumers",new Map);_(this,"_dataProducers",new Map);_(this,"_dataConsumers",new Map);_(this,"_probatorConsumerCreated",!1);_(this,"_awaitQueue",new JR.AwaitQueue);_(this,"_pendingConsumerTasks",[]);_(this,"_consumerCreationInProgress",!1);_(this,"_pendingPauseConsumers",new Map);_(this,"_consumerPauseInProgress",!1);_(this,"_pendingResumeConsumers",new Map);_(this,"_consumerResumeInProgress",!1);_(this,"_pendingCloseConsumers",new Map);_(this,"_consumerCloseInProgress",!1);_(this,"_observer",new ag.EnhancedEventEmitter);Ie.debug("constructor() [id:%s, direction:%s]",n,i),this._id=n,this._direction=i,this._extendedRtpCapabilities=y,this._canProduceByKind=b,this._maxSctpMessageSize=c?c.maxMessageSize:null;const w=Vd.clone(u)??{};delete w.iceServers,delete w.iceTransportPolicy,delete w.bundlePolicy,delete w.rtcpMuxPolicy,delete w.sdpSemantics,this._handler=p(),this._handler.run({direction:i,iceParameters:a,iceCandidates:s,dtlsParameters:r,sctpParameters:c,iceServers:o,iceTransportPolicy:l,additionalSettings:w,proprietaryConstraints:d,extendedRtpCapabilities:y}),this._appData=f??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(i){this._appData=i}get observer(){return this._observer}close(){if(!this._closed){Ie.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const i of this._producers.values())i.transportClosed();this._producers.clear();for(const i of this._consumers.values())i.transportClosed();this._consumers.clear();for(const i of this._dataProducers.values())i.transportClosed();this._dataProducers.clear();for(const i of this._dataConsumers.values())i.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Qe.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:i}){if(Ie.debug("restartIce()"),this._closed)throw new Qe.InvalidStateError("closed");if(!i)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(i),"transport.restartIce()")}async updateIceServers({iceServers:i}={}){if(Ie.debug("updateIceServers()"),this._closed)throw new Qe.InvalidStateError("closed");if(!Array.isArray(i))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(i),"transport.updateIceServers()")}async produce({track:i,encodings:n,codecOptions:a,codec:s,stopTracks:r=!0,disableTrackOnPause:c=!0,zeroRtpOnPause:o=!1,onRtpSender:l,appData:u={}}={}){if(Ie.debug("produce() [track:%o]",i),this._closed)throw new Qe.InvalidStateError("closed");if(i){if(this._direction!=="send")throw new Qe.UnsupportedError("not a sending Transport");if(this._canProduceByKind[i.kind]){if(i.readyState==="ended")throw new Qe.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new Qe.UnsupportedError(`cannot produce ${i.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let d;if(n&&!Array.isArray(n))throw TypeError("encodings must be an array");n&&n.length===0?d=void 0:n&&(d=n.map(b=>{const w={active:!0};return b.active===!1&&(w.active=!1),typeof b.dtx=="boolean"&&(w.dtx=b.dtx),typeof b.scalabilityMode=="string"&&(w.scalabilityMode=b.scalabilityMode),typeof b.scaleResolutionDownBy=="number"&&(w.scaleResolutionDownBy=b.scaleResolutionDownBy),typeof b.maxBitrate=="number"&&(w.maxBitrate=b.maxBitrate),typeof b.maxFramerate=="number"&&(w.maxFramerate=b.maxFramerate),typeof b.adaptivePtime=="boolean"&&(w.adaptivePtime=b.adaptivePtime),typeof b.priority=="string"&&(w.priority=b.priority),typeof b.networkPriority=="string"&&(w.networkPriority=b.networkPriority),w}));const{localId:f,rtpParameters:p,rtpSender:y}=await this._handler.send({track:i,encodings:d,codecOptions:a,codec:s,onRtpSender:l});try{pr.validateRtpParameters(p);const{id:b}=await new Promise((m,v)=>{this.safeEmit("produce",{kind:i.kind,rtpParameters:p,appData:u},m,v)}),w=new eT.Producer({id:b,localId:f,rtpSender:y,track:i,rtpParameters:p,stopTracks:r,disableTrackOnPause:c,zeroRtpOnPause:o,appData:u});return this._producers.set(w.id,w),this.handleProducer(w),this._observer.safeEmit("newproducer",w),w}catch(b){throw this._handler.stopSending(f).catch(()=>{}),b}},"transport.produce()").catch(d=>{if(r)try{i.stop()}catch{}throw d})}async consume({id:i,producerId:n,kind:a,rtpParameters:s,streamId:r,onRtpReceiver:c,appData:o={}}){if(Ie.debug("consume()"),this._closed)throw new Qe.InvalidStateError("closed");if(this._direction!=="recv")throw new Qe.UnsupportedError("not a receiving Transport");if(typeof i!="string")throw new TypeError("missing id");if(typeof n!="string")throw new TypeError("missing producerId");if(a!=="audio"&&a!=="video")throw new TypeError(`invalid kind '${a}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object");const l=Vd.clone(s);if(!pr.canReceive(l,this._extendedRtpCapabilities))throw new Qe.UnsupportedError("cannot consume this Producer");const d=new aT({id:i,producerId:n,kind:a,rtpParameters:l,streamId:r,onRtpReceiver:c,appData:o});return this._pendingConsumerTasks.push(d),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),d.promise}async produceData({ordered:i=!0,maxPacketLifeTime:n,maxRetransmits:a,label:s="",protocol:r="",appData:c={}}={}){if(Ie.debug("produceData()"),this._closed)throw new Qe.InvalidStateError("closed");if(this._direction!=="send")throw new Qe.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(c&&typeof c!="object")throw new TypeError("if given, appData must be an object")}else throw new Qe.UnsupportedError("SCTP not enabled by remote Transport");return(n||a)&&(i=!1),this._awaitQueue.push(async()=>{const{dataChannel:o,sctpStreamParameters:l}=await this._handler.sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r});pr.validateSctpStreamParameters(l);const{id:u}=await new Promise((f,p)=>{this.safeEmit("producedata",{sctpStreamParameters:l,label:s,protocol:r,appData:c},f,p)}),d=new iT.DataProducer({id:u,dataChannel:o,sctpStreamParameters:l,appData:c});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:i,dataProducerId:n,sctpStreamParameters:a,label:s="",protocol:r="",appData:c={}}){if(Ie.debug("consumeData()"),this._closed)throw new Qe.InvalidStateError("closed");if(this._direction!=="recv")throw new Qe.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof i!="string")throw new TypeError("missing id");if(typeof n!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(c&&typeof c!="object")throw new TypeError("if given, appData must be an object")}else throw new Qe.UnsupportedError("SCTP not enabled by remote Transport");const o=Vd.clone(a);return pr.validateSctpStreamParameters(o),this._awaitQueue.push(async()=>{const{dataChannel:l}=await this._handler.receiveDataChannel({sctpStreamParameters:o,label:s,protocol:r}),u=new nT.DataConsumer({id:i,dataProducerId:n,dataChannel:l,sctpStreamParameters:o,appData:c});return this._dataConsumers.set(u.id,u),this.handleDataConsumer(u),this._observer.safeEmit("newdataconsumer",u),u},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){Ie.debug("createPendingConsumers() | there is no Consumer to be created");return}const i=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let n;const a=[];for(const s of i){const{id:r,kind:c,rtpParameters:o,streamId:l,onRtpReceiver:u}=s.consumerOptions;a.push({trackId:r,kind:c,rtpParameters:o,streamId:l,onRtpReceiver:u})}try{const s=await this._handler.receive(a);for(let r=0;r<s.length;++r){const c=i[r],o=s[r],{id:l,producerId:u,kind:d,rtpParameters:f,appData:p}=c.consumerOptions,{localId:y,rtpReceiver:b,track:w}=o,m=new tT.Consumer({id:l,localId:y,producerId:u,rtpReceiver:b,track:w,rtpParameters:f,appData:p});this._consumers.set(m.id,m),this.handleConsumer(m),!this._probatorConsumerCreated&&!n&&d==="video"&&(n=m),this._observer.safeEmit("newconsumer",m),c.resolve(m)}}catch(s){for(const r of i)r.reject(s)}if(n)try{const s=pr.generateProbatorRtpParameters(n.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:s}]),Ie.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(s){Ie.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",s)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){Ie.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const i=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const n=i.map(a=>a.localId);await this._handler.pauseReceiving(n)}catch(n){Ie.error("pausePendingConsumers() | failed to pause Consumers:",n)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){Ie.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const i=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const n=i.map(a=>a.localId);await this._handler.resumeReceiving(n)}catch(n){Ie.error("resumePendingConsumers() | failed to resume Consumers:",n)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){Ie.debug("closePendingConsumers() | there is no Consumer to be closed");return}const i=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(i.map(n=>n.localId))}catch(n){Ie.error("closePendingConsumers() | failed to close Consumers:",n)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const i=this._handler;i.on("@connect",({dtlsParameters:n},a,s)=>{if(this._closed){s(new Qe.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:n},a,s)}),i.on("@icegatheringstatechange",n=>{n!==this._iceGatheringState&&(Ie.debug("ICE gathering state changed to %s",n),this._iceGatheringState=n,this._closed||this.safeEmit("icegatheringstatechange",n))}),i.on("@icecandidateerror",n=>{Ie.warn(`ICE candidate error [url:${n.url}, localAddress:${n.address}, localPort:${n.port}]: ${n.errorCode} "${n.errorText}"`),this.safeEmit("icecandidateerror",n)}),i.on("@connectionstatechange",n=>{n!==this._connectionState&&(Ie.debug("connection state changed to %s",n),this._connectionState=n,this._closed||this.safeEmit("connectionstatechange",n))})}handleProducer(i){i.on("@close",()=>{this._producers.delete(i.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(i.localId),"producer @close event").catch(n=>Ie.warn("producer.close() failed:%o",n))}),i.on("@pause",(n,a)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(i.localId),"producer @pause event").then(n).catch(a)}),i.on("@resume",(n,a)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(i.localId),"producer @resume event").then(n).catch(a)}),i.on("@replacetrack",(n,a,s)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(i.localId,n),"producer @replacetrack event").then(a).catch(s)}),i.on("@setmaxspatiallayer",(n,a,s)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(i.localId,n),"producer @setmaxspatiallayer event").then(a).catch(s)}),i.on("@setrtpencodingparameters",(n,a,s)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(i.localId,n),"producer @setrtpencodingparameters event").then(a).catch(s)}),i.on("@getstats",(n,a)=>{if(this._closed)return a(new Qe.InvalidStateError("closed"));this._handler.getSenderStats(i.localId).then(n).catch(a)})}handleConsumer(i){i.on("@close",()=>{this._consumers.delete(i.id),this._pendingPauseConsumers.delete(i.id),this._pendingResumeConsumers.delete(i.id),!this._closed&&(this._pendingCloseConsumers.set(i.id,i),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),i.on("@pause",()=>{this._pendingResumeConsumers.has(i.id)&&this._pendingResumeConsumers.delete(i.id),this._pendingPauseConsumers.set(i.id,i),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),i.on("@resume",()=>{this._pendingPauseConsumers.has(i.id)&&this._pendingPauseConsumers.delete(i.id),this._pendingResumeConsumers.set(i.id,i),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),i.on("@getstats",(n,a)=>{if(this._closed)return a(new Qe.InvalidStateError("closed"));this._handler.getReceiverStats(i.localId).then(n).catch(a)})}handleDataProducer(i){i.on("@close",()=>{this._dataProducers.delete(i.id)})}handleDataConsumer(i){i.on("@close",()=>{this._dataConsumers.delete(i.id)})}}mc.Transport=sT;var xl={},Ne={},yS={},SS={exports:{}},sg=SS.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(sg).forEach(function(e){var t=sg[e];t.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});var bp=SS.exports;(function(e){var t=function(c){return String(Number(c))===c?Number(c):c},i=function(c,o,l,u){if(u&&!l)o[u]=t(c[1]);else for(var d=0;d<l.length;d+=1)c[d+1]!=null&&(o[l[d]]=t(c[d+1]))},n=function(c,o,l){var u=c.name&&c.names;c.push&&!o[c.push]?o[c.push]=[]:u&&!o[c.name]&&(o[c.name]={});var d=c.push?{}:u?o[c.name]:o;i(l.match(c.reg),d,c.names,c.name),c.push&&o[c.push].push(d)},a=bp,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(c){var o={},l=[],u=o;return c.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var f=d[0],p=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var y=0;y<(a[f]||[]).length;y+=1){var b=a[f][y];if(b.reg.test(p))return n(b,u,p)}}),o.media=l,o};var r=function(c,o){var l=o.split(/=(.+)/,2);return l.length===2?c[l[0]]=t(l[1]):l.length===1&&o.length>1&&(c[l[0]]=void 0),c};e.parseParams=function(c){return c.split(/;\s?/).reduce(r,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(c){return c.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(c){for(var o=[],l=c.split(" ").map(t),u=0;u<l.length;u+=3)o.push({component:l[u],ip:l[u+1],port:l[u+2]});return o},e.parseImageAttributes=function(c){return c.split(" ").map(function(o){return o.substring(1,o.length-1).split(",").reduce(r,{})})},e.parseSimulcastStreamList=function(c){return c.split(";").map(function(o){return o.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(yS);var Yd=bp,rT=/%[sdv%]/g,cT=function(e){var t=1,i=arguments,n=i.length;return e.replace(rT,function(a){if(t>=n)return a;var s=i[t];switch(t+=1,a){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},hr=function(e,t,i){var n=t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format,a=[e+"="+n];if(t.names)for(var s=0;s<t.names.length;s+=1){var r=t.names[s];t.name?a.push(i[t.name][r]):a.push(i[t.names[s]])}else a.push(i[t.name]);return cT.apply(null,a)},oT=["v","o","s","i","u","e","p","c","b","t","r","z","a"],lT=["i","c","b","a"],dT=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var i=t.outerOrder||oT,n=t.innerOrder||lT,a=[];return i.forEach(function(s){Yd[s].forEach(function(r){r.name in e&&e[r.name]!=null?a.push(hr(s,r,e)):r.push in e&&e[r.push]!=null&&e[r.push].forEach(function(c){a.push(hr(s,r,c))})})}),e.media.forEach(function(s){a.push(hr("m",Yd.m[0],s)),n.forEach(function(r){Yd[r].forEach(function(c){c.name in s&&s[c.name]!=null?a.push(hr(r,c,s)):c.push in s&&s[c.push]!=null&&s[c.push].forEach(function(o){a.push(hr(r,c,o))})})})}),a.join(`\r
`)+`\r
`},Sa=yS,uT=dT,fT=bp;Ne.grammar=fT;Ne.write=uT;Ne.parse=Sa.parse;Ne.parseParams=Sa.parseParams;Ne.parseFmtpConfig=Sa.parseFmtpConfig;Ne.parsePayloads=Sa.parsePayloads;Ne.parseRemoteCandidates=Sa.parseRemoteCandidates;Ne.parseImageAttributes=Sa.parseImageAttributes;Ne.parseSimulcastStreamList=Sa.parseSimulcastStreamList;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.extractRtpCapabilities=pT;_t.extractDtlsParameters=hT;_t.getCname=mT;_t.applyCodecParameters=gT;const bS=Ne;function pT({sdpObject:e}){const t=new Map,i=[];let n=!1,a=!1;for(const r of e.media){const c=r.type;switch(c){case"audio":{if(n)continue;n=!0;break}case"video":{if(a)continue;a=!0;break}default:continue}for(const o of r.rtp){const l={kind:c,mimeType:`${c}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};t.set(l.preferredPayloadType,l)}for(const o of r.fmtp??[]){const l=bS.parseParams(o.config),u=t.get(o.payload);u&&(l!=null&&l.hasOwnProperty("profile-level-id")&&(l["profile-level-id"]=String(l["profile-level-id"])),u.parameters=l)}for(const o of r.rtcpFb??[]){const l={type:o.type,parameter:o.subtype};if(l.parameter||delete l.parameter,o.payload!=="*"){const u=t.get(o.payload);if(!u)continue;u.rtcpFeedback.push(l)}else for(const u of t.values())u.kind===c&&!/.+\/rtx$/i.test(u.mimeType)&&u.rtcpFeedback.push(l)}for(const o of r.ext??[]){if(o["encrypt-uri"])continue;const l={kind:c,uri:o.uri,preferredId:o.value};i.push(l)}}return{codecs:Array.from(t.values()),headerExtensions:i}}function hT({sdpObject:e}){let t=e.setup,i=e.fingerprint;if(!t||!i){const s=(e.media??[]).find(r=>r.port!==0);s&&(t??(t=s.setup),i??(i=s.fingerprint))}if(t){if(!i)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let n;switch(t){case"active":{n="client";break}case"passive":{n="server";break}case"actpass":{n="auto";break}}return{role:n,fingerprints:[{algorithm:i.type,value:i.hash}]}}function mT({offerMediaObject:e}){const t=(e.ssrcs??[]).find(i=>i.attribute==="cname");return t?t.value:""}function gT({offerRtpParameters:e,answerMediaObject:t}){for(const i of e.codecs){const n=i.mimeType.toLowerCase();if(n!=="audio/opus"||!(t.rtp??[]).find(c=>c.payload===i.payloadType))continue;t.fmtp=t.fmtp??[];let s=t.fmtp.find(c=>c.payload===i.payloadType);s||(s={payload:i.payloadType,config:""},t.fmtp.push(s));const r=bS.parseParams(s.config);switch(n){case"audio/opus":{const c=i.parameters["sprop-stereo"];c!==void 0&&(r.stereo=Number(c)?1:0);break}}s.config="";for(const c of Object.keys(r))s.config&&(s.config+=";"),s.config+=`${c}=${r[c]}`}}var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.getRtpEncodings=_T;xi.addLegacySimulcast=vT;function _T({offerMediaObject:e}){const t=new Set;for(const a of e.ssrcs??[]){const s=a.id;t.add(s)}if(t.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const a of e.ssrcGroups??[]){if(a.semantics!=="FID")continue;let[s,r]=a.ssrcs.split(/\s+/);s=Number(s),r=Number(r),t.has(s)&&(t.delete(s),t.delete(r),i.set(s,r))}for(const a of t)i.set(a,null);const n=[];for(const[a,s]of i){const r={ssrc:a};s&&(r.rtx={ssrc:s}),n.push(r)}return n}function vT({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const i=(e.ssrcs??[]).find(d=>d.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[n,a]=i.value.split(" "),s=Number(i.id);let r;(e.ssrcGroups??[]).some(d=>{if(d.semantics!=="FID")return!1;const f=d.ssrcs.split(/\s+/);return Number(f[0])===s?(r=Number(f[1]),!0):!1});const c=e.ssrcs.find(d=>d.attribute==="cname");if(!c)throw new Error("a=ssrc line with cname information not found");const o=c.value,l=[],u=[];for(let d=0;d<t;++d)l.push(s+d),r&&u.push(r+d);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(const d of l)e.ssrcs.push({id:d,attribute:"cname",value:o}),e.ssrcs.push({id:d,attribute:"msid",value:`${n} ${a}`});for(let d=0;d<u.length;++d){const f=l[d],p=u[d];e.ssrcs.push({id:p,attribute:"cname",value:o}),e.ssrcs.push({id:p,attribute:"msid",value:`${n} ${a}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${p}`})}}var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.addNackSupportForOpus=yT;function yT(e){var t;for(const i of e.codecs??[])(i.mimeType.toLowerCase()==="audio/opus"||i.mimeType.toLowerCase()==="audio/multiopus")&&!((t=i.rtcpFeedback)!=null&&t.some(n=>n.type==="nack"&&!n.parameter))&&(i.rtcpFeedback||(i.rtcpFeedback=[]),i.rtcpFeedback.push({type:"nack"}))}var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.HandlerInterface=void 0;const ST=si;class bT extends ST.EnhancedEventEmitter{constructor(){super()}}ct.HandlerInterface=bT;var Ct={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.OfferMediaSection=Pn.AnswerMediaSection=Pn.MediaSection=void 0;const wT=Ne,rg=Pe;class wp{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:n,planB:a=!1}){_(this,"_mediaObject");_(this,"_planB");if(this._mediaObject={},this._planB=a,t&&this.setIceParameters(t),i){this._mediaObject.candidates=[];for(const s of i){const r={};r.component=1,r.foundation=s.foundation,r.ip=s.address??s.ip,r.port=s.port,r.priority=s.priority,r.transport=s.protocol,r.type=s.type,s.tcpType&&(r.tcptype=s.tcpType),this._mediaObject.candidates.push(r)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}n&&this.setDtlsRole(n.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(t){this._mediaObject.iceUfrag=t.usernameFragment,this._mediaObject.icePwd=t.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}Pn.MediaSection=wp;class RT extends wp{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:n,sctpParameters:a,plainRtpParameters:s,planB:r=!1,offerMediaObject:c,offerRtpParameters:o,answerRtpParameters:l,codecOptions:u}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:n,planB:r}),this._mediaObject.mid=String(c.mid),this._mediaObject.type=c.type,this._mediaObject.protocol=c.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),c.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const d of l.codecs){const f={payload:d.payloadType,codec:lf(d),rate:d.clockRate};d.channels>1&&(f.encoding=d.channels),this._mediaObject.rtp.push(f);const p=rg.clone(d.parameters)??{};let y=rg.clone(d.rtcpFeedback)??[];if(u){const{opusStereo:w,opusFec:m,opusDtx:v,opusMaxPlaybackRate:h,opusMaxAverageBitrate:g,opusPtime:S,opusNack:R,videoGoogleStartBitrate:x,videoGoogleMaxBitrate:O,videoGoogleMinBitrate:T}=u,U=o.codecs.find(L=>L.payloadType===d.payloadType);switch(d.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{w!==void 0&&(U.parameters["sprop-stereo"]=w?1:0,p.stereo=w?1:0),m!==void 0&&(U.parameters.useinbandfec=m?1:0,p.useinbandfec=m?1:0),v!==void 0&&(U.parameters.usedtx=v?1:0,p.usedtx=v?1:0),h!==void 0&&(p.maxplaybackrate=h),g!==void 0&&(p.maxaveragebitrate=g),S!==void 0&&(U.parameters.ptime=S,p.ptime=S),R||(U.rtcpFeedback=U.rtcpFeedback.filter(L=>L.type!=="nack"||L.parameter),y=y.filter(L=>L.type!=="nack"||L.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{x!==void 0&&(p["x-google-start-bitrate"]=x),O!==void 0&&(p["x-google-max-bitrate"]=O),T!==void 0&&(p["x-google-min-bitrate"]=T);break}}}const b={payload:d.payloadType,config:""};for(const w of Object.keys(p))b.config&&(b.config+=";"),b.config+=`${w}=${p[w]}`;b.config&&this._mediaObject.fmtp.push(b);for(const w of y)this._mediaObject.rtcpFb.push({payload:d.payloadType,type:w.type,subtype:w.parameter})}this._mediaObject.payloads=l.codecs.map(d=>d.payloadType).join(" "),this._mediaObject.ext=[];for(const d of l.headerExtensions)(c.ext??[]).some(p=>p.uri===d.uri)&&this._mediaObject.ext.push({uri:d.uri,value:d.id});if(c.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),c.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:c.simulcast.list1},this._mediaObject.rids=[];for(const d of c.rids??[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}else if(c.simulcast_03){this._mediaObject.simulcast_03={value:c.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const d of c.rids??[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof c.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=a.port,this._mediaObject.maxMessageSize=a.maxMessageSize):c.sctpmap&&(this._mediaObject.payloads=a.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:a.port,maxMessageSize:a.maxMessageSize});break}}}setDtlsRole(t){switch(t){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(t){var s,r;if(!((s=this._mediaObject.simulcast)!=null&&s.list1))return;const i={};for(const c of t)c.rid&&(i[c.rid]=c);const n=this._mediaObject.simulcast.list1,a=wT.parseSimulcastStreamList(n);for(const c of a)for(const o of c)o.paused=!((r=i[o.scid])!=null&&r.active);this._mediaObject.simulcast.list1=a.map(c=>c.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}Pn.AnswerMediaSection=RT;class TT extends wp{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:n,sctpParameters:a,plainRtpParameters:s,planB:r=!1,mid:c,kind:o,offerRtpParameters:l,streamId:u,trackId:d,oldDataChannelSpec:f=!1}){var p;switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:n,planB:r}),this._mediaObject.mid=String(c),this._mediaObject.type=o,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},a?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",o){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${u??"-"} ${d}`);for(const m of l.codecs){const v={payload:m.payloadType,codec:lf(m),rate:m.clockRate};m.channels>1&&(v.encoding=m.channels),this._mediaObject.rtp.push(v);const h={payload:m.payloadType,config:""};for(const g of Object.keys(m.parameters))h.config&&(h.config+=";"),h.config+=`${g}=${m.parameters[g]}`;h.config&&this._mediaObject.fmtp.push(h);for(const g of m.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:m.payloadType,type:g.type,subtype:g.parameter})}this._mediaObject.payloads=l.codecs.map(m=>m.payloadType).join(" "),this._mediaObject.ext=[];for(const m of l.headerExtensions)this._mediaObject.ext.push({uri:m.uri,value:m.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const y=l.encodings[0],b=y.ssrc,w=(p=y.rtx)==null?void 0:p.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],l.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${u??"-"} ${d}`}),w&&(l.rtcp.cname&&this._mediaObject.ssrcs.push({id:w,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:w,attribute:"msid",value:`${u??"-"} ${d}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${w}`}));break}case"application":{f?(this._mediaObject.payloads=a.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:a.port,maxMessageSize:a.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=a.port,this._mediaObject.maxMessageSize=a.maxMessageSize);break}}}setDtlsRole(t){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:t,streamId:i,trackId:n}){var o;const a=t.encodings[0],s=a.ssrc,r=(o=a.rtx)==null?void 0:o.ssrc,c=this._mediaObject.payloads.split(" ");for(const l of t.codecs){if(c.includes(String(l.payloadType)))continue;const u={payload:l.payloadType,codec:lf(l),rate:l.clockRate};l.channels>1&&(u.encoding=l.channels),this._mediaObject.rtp.push(u);const d={payload:l.payloadType,config:""};for(const f of Object.keys(l.parameters))d.config&&(d.config+=";"),d.config+=`${f}=${l.parameters[f]}`;d.config&&this._mediaObject.fmtp.push(d);for(const f of l.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:l.payloadType,type:f.type,subtype:f.parameter})}this._mediaObject.payloads+=` ${t.codecs.filter(l=>!this._mediaObject.payloads.includes(l.payloadType)).map(l=>l.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),t.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${i??"-"} ${n}`}),r&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:r,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:r,attribute:"msid",value:`${i??"-"} ${n}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${r}`}))}planBStopReceiving({offerRtpParameters:t}){var s;const i=t.encodings[0],n=i.ssrc,a=(s=i.rtx)==null?void 0:s.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(r=>r.id!==n&&r.id!==a),a&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(r=>r.ssrcs!==`${n} ${a}`))}}Pn.OfferMediaSection=TT;function lf(e){const i=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");return i[2]}Object.defineProperty(Ct,"__esModule",{value:!0});Ct.RemoteSdp=void 0;const ET=Ne,DT=Oe,Yc=Pn,Qc=new DT.Logger("RemoteSdp");class CT{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:n,sctpParameters:a,plainRtpParameters:s,planB:r=!1}){_(this,"_iceParameters");_(this,"_iceCandidates");_(this,"_dtlsParameters");_(this,"_sctpParameters");_(this,"_plainRtpParameters");_(this,"_planB");_(this,"_mediaSections",[]);_(this,"_midToIndex",new Map);_(this,"_firstMid");_(this,"_sdpObject");if(this._iceParameters=t,this._iceCandidates=i,this._dtlsParameters=n,this._sctpParameters=a,this._plainRtpParameters=s,this._planB=r,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},t!=null&&t.iceLite&&(this._sdpObject.icelite="ice-lite"),n){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const c=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:n.fingerprints[c-1].algorithm,hash:n.fingerprints[c-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(t){Qc.debug("updateIceParameters() [iceParameters:%o]",t),this._iceParameters=t,this._sdpObject.icelite=t.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(t)}updateDtlsRole(t){Qc.debug("updateDtlsRole() [role:%s]",t),this._dtlsParameters.role=t;for(const i of this._mediaSections)i.setDtlsRole(t)}setSessionExtmapAllowMixed(){Qc.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let t=0;t<this._mediaSections.length;++t){const i=this._mediaSections[t];if(i.closed)return{idx:t,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:t,reuseMid:i,offerRtpParameters:n,answerRtpParameters:a,codecOptions:s}){const r=new Yc.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:n,answerRtpParameters:a,codecOptions:s});i?this._replaceMediaSection(r,i):this._midToIndex.has(r.mid)?this._replaceMediaSection(r):this._addMediaSection(r)}receive({mid:t,kind:i,offerRtpParameters:n,streamId:a,trackId:s}){const r=this._midToIndex.get(t);let c;if(r!==void 0&&(c=this._mediaSections[r]),this.setSessionExtmapAllowMixed(),c)c.planBReceive({offerRtpParameters:n,streamId:a,trackId:s}),this._replaceMediaSection(c);else{c=new Yc.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:t,kind:i,offerRtpParameters:n,streamId:a,trackId:s});const o=this._mediaSections.find(l=>l.closed);o?this._replaceMediaSection(c,o.mid):this._addMediaSection(c)}}pauseMediaSection(t){this._findMediaSection(t).pause()}resumeSendingMediaSection(t){this._findMediaSection(t).resume()}resumeReceivingMediaSection(t){this._findMediaSection(t).resume()}disableMediaSection(t){this._findMediaSection(t).disable()}closeMediaSection(t){const i=this._findMediaSection(t);return t===this._firstMid?(Qc.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",t),this.disableMediaSection(t),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(t,i){const n=this._findMediaSection(t);n.muxSimulcastStreams(i),this._replaceMediaSection(n)}planBStopReceiving({mid:t,offerRtpParameters:i}){const n=this._findMediaSection(t);n.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(n)}sendSctpAssociation({offerMediaObject:t}){const i=new Yc.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:t=!1}={}){const i=new Yc.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:t});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,ET.write(this._sdpObject)}_addMediaSection(t){this._firstMid||(this._firstMid=t.mid),this._mediaSections.push(t),this._midToIndex.set(t.mid,this._mediaSections.length-1),this._sdpObject.media.push(t.getObject()),this._regenerateBundleMids()}_replaceMediaSection(t,i){if(typeof i=="string"){const n=this._midToIndex.get(i);if(n===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const a=this._mediaSections[n];this._mediaSections[n]=t,this._midToIndex.delete(a.mid),this._midToIndex.set(t.mid,n),this._sdpObject.media[n]=t.getObject(),this._regenerateBundleMids()}else{const n=this._midToIndex.get(t.mid);if(n===void 0)throw new Error(`no media section found with mid '${t.mid}'`);this._mediaSections[n]=t,this._sdpObject.media[n]=t.getObject()}}_findMediaSection(t){const i=this._midToIndex.get(t);if(i===void 0)throw new Error(`no media section found with mid '${t}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(t=>!t.closed).map(t=>t.mid).join(" "))}}Ct.RemoteSdp=CT;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.parse=MT;const xT=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function MT(e){const t=xT.exec(e??"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}Object.defineProperty(xl,"__esModule",{value:!0});xl.Chrome111=void 0;const on=Ne,LT=Oe,cg=Pe,Ua=_e,Xc=_t,og=xi,OT=Vs,kT=qe,AT=ct,PT=Ct,NT=Mi,$=new LT.Logger("Chrome111"),jT="Chrome111",lg={OS:1024,MIS:1024};class Rp extends AT.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Rp}get name(){return jT}close(){if($.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){$.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const n=await i.createOffer();try{i.close()}catch{}const a=on.parse(n.sdp),s=Xc.extractRtpCapabilities({sdpObject:a});return OT.addNackSupportForOpus(s),s}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return $.debug("getNativeSctpCapabilities()"),{numStreams:lg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){this.assertNotClosed(),$.debug("run()"),this._direction=i,this._remoteSdp=new PT.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:Ua.getSendingRtpParameters("audio",d),video:Ua.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ua.getSendingRemoteRtpParameters("audio",d),video:Ua.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):($.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(i){this.assertNotClosed(),$.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(this.assertNotClosed(),$.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});$.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();$.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s,onRtpSender:r}){if(this.assertNotClosed(),this.assertSendDirection(),$.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),n&&n.length>1){let w=1;for(const m of n){const v=m.scalabilityMode?(0,NT.parse)(m.scalabilityMode).temporalLayers:3;v>w&&(w=v)}n.forEach((m,v)=>{m.rid=`r${v}`,m.scalabilityMode=`L1T${w}`})}const c=cg.clone(this._sendingRtpParametersByKind[i.kind]);c.codecs=Ua.reduceCodecs(c.codecs,s);const o=cg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);o.codecs=Ua.reduceCodecs(o.codecs,s);const l=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:n});r&&r(u.sender);const d=await this._pc.createOffer();let f=on.parse(d.sdp);f.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),$.debug("send() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const p=u.mid;c.mid=p,f=on.parse(this._pc.localDescription.sdp);const y=f.media[l.idx];if(c.rtcp.cname=Xc.getCname({offerMediaObject:y}),!n)c.encodings=og.getRtpEncodings({offerMediaObject:y});else if(n.length===1){const w=og.getRtpEncodings({offerMediaObject:y});Object.assign(w[0],n[0]),c.encodings=w}else c.encodings=n;this._remoteSdp.send({offerMediaObject:y,reuseMid:l.reuseMid,offerRtpParameters:c,answerRtpParameters:o,codecOptions:a});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return $.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(p,u),{localId:p,rtpParameters:c,rtpSender:u.sender}}async stopSending(i){if(this.assertSendDirection(),$.debug("stopSending() [localId:%s]",i),this._closed)return;const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");if(n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid))try{n.stop()}catch{}const s=await this._pc.createOffer();$.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),$.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();$.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),$.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly";const a=await this._pc.createOffer();$.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?$.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):$.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),$.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();$.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),$.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();$.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};$.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%lg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=on.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),$.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};$.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;$.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);for(const o of i){const{trackId:l,onRtpReceiver:u}=o;if(u){const d=a.get(l),f=this._pc.getTransceivers().find(p=>p.mid===d);if(!f)throw new Error("transceiver not found");u(f.receiver)}}let r=await this._pc.createAnswer();const c=on.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);Xc.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:on.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),$.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(d)this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver});else throw new Error("new RTCRtpTransceiver not found")}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){$.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();$.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){$.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();$.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){$.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();$.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};$.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};$.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=on.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}$.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=on.parse(this._pc.localDescription.sdp));const a=Xc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new kT.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}xl.Chrome111=Rp;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.Chrome74=void 0;const di=Ne,UT=Oe,dg=Pe,za=_e,Kc=_t,Qd=xi,zT=Vs,BT=qe,IT=ct,HT=Ct,qT=Mi,I=new UT.Logger("Chrome74"),$T="Chrome74",ug={OS:1024,MIS:1024};class Tp extends IT.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Tp}get name(){return $T}close(){if(I.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){I.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const n=await i.createOffer();try{i.close()}catch{}const a=di.parse(n.sdp),s=Kc.extractRtpCapabilities({sdpObject:a});return zT.addNackSupportForOpus(s),s}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return I.debug("getNativeSctpCapabilities()"),{numStreams:ug}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){I.debug("run()"),this._direction=i,this._remoteSdp=new HT.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:za.getSendingRtpParameters("audio",d),video:za.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:za.getSendingRemoteRtpParameters("audio",d),video:za.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(I.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(i){this.assertNotClosed(),I.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(this.assertNotClosed(),I.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});I.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();I.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertNotClosed(),this.assertSendDirection(),I.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),n&&n.length>1&&n.forEach((m,v)=>{m.rid=`r${v}`});const r=dg.clone(this._sendingRtpParametersByKind[i.kind]);r.codecs=za.reduceCodecs(r.codecs,s);const c=dg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);c.codecs=za.reduceCodecs(c.codecs,s);const o=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:n});let u=await this._pc.createOffer(),d=di.parse(u.sdp);d.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let f;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d});let p=!1;const y=(0,qT.parse)((n??[{}])[0].scalabilityMode);n&&n.length===1&&y.spatialLayers>1&&r.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(I.debug("send() | enabling legacy simulcast for VP9 SVC"),p=!0,d=di.parse(u.sdp),f=d.media[o.idx],Qd.addLegacySimulcast({offerMediaObject:f,numStreams:y.spatialLayers}),u={type:"offer",sdp:di.write(d)}),I.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const b=l.mid;if(r.mid=b,d=di.parse(this._pc.localDescription.sdp),f=d.media[o.idx],r.rtcp.cname=Kc.getCname({offerMediaObject:f}),!n)r.encodings=Qd.getRtpEncodings({offerMediaObject:f});else if(n.length===1){let m=Qd.getRtpEncodings({offerMediaObject:f});Object.assign(m[0],n[0]),p&&(m=[m[0]]),r.encodings=m}else r.encodings=n;if(r.encodings.length>1&&(r.codecs[0].mimeType.toLowerCase()==="video/vp8"||r.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of r.encodings)m.scalabilityMode?m.scalabilityMode=`L1T${y.temporalLayers}`:m.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:o.reuseMid,offerRtpParameters:r,answerRtpParameters:c,codecOptions:a});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return I.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(b,l),{localId:b,rtpParameters:r,rtpSender:l.sender}}async stopSending(i){if(this.assertSendDirection(),I.debug("stopSending() [localId:%s]",i),this._closed)return;const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");if(n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid))try{n.stop()}catch{}const s=await this._pc.createOffer();I.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),I.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();I.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),I.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly";const a=await this._pc.createOffer();I.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?I.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):I.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),I.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();I.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),I.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();I.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};I.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%ug.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=di.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),I.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;I.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let r=await this._pc.createAnswer();const c=di.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);Kc.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:di.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),I.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(d)this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver});else throw new Error("new RTCRtpTransceiver not found")}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){I.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();I.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){I.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();I.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){I.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();I.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};I.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=di.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}I.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=di.parse(this._pc.localDescription.sdp));const a=Kc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new BT.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ml.Chrome74=Tp;var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.Chrome70=void 0;const zt=Ne,GT=Oe,fg=Pe,Ba=_e,Fc=_t,Xd=xi,VT=ct,YT=Ct,QT=Mi,F=new GT.Logger("Chrome70"),XT="Chrome70",pg={OS:1024,MIS:1024};class Ep extends VT.HandlerInterface{constructor(){super();_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Ep}get name(){return XT}close(){if(F.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const n=await i.createOffer();try{i.close()}catch{}const a=zt.parse(n.sdp);return Fc.extractRtpCapabilities({sdpObject:a})}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:pg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){F.debug("run()"),this._direction=i,this._remoteSdp=new YT.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:Ba.getSendingRtpParameters("audio",d),video:Ba.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ba.getSendingRemoteRtpParameters("audio",d),video:Ba.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){F.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(F.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",i.kind,i.id);const r=fg.clone(this._sendingRtpParametersByKind[i.kind]);r.codecs=Ba.reduceCodecs(r.codecs,s);const c=fg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);c.codecs=Ba.reduceCodecs(c.codecs,s);const o=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream]});let u=await this._pc.createOffer(),d=zt.parse(u.sdp);d.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let f;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),n&&n.length>1&&(F.debug("send() | enabling legacy simulcast"),d=zt.parse(u.sdp),f=d.media[o.idx],Xd.addLegacySimulcast({offerMediaObject:f,numStreams:n.length}),u={type:"offer",sdp:zt.write(d)});let p=!1;const y=(0,QT.parse)((n??[{}])[0].scalabilityMode);if(n&&n.length===1&&y.spatialLayers>1&&r.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(F.debug("send() | enabling legacy simulcast for VP9 SVC"),p=!0,d=zt.parse(u.sdp),f=d.media[o.idx],Xd.addLegacySimulcast({offerMediaObject:f,numStreams:y.spatialLayers}),u={type:"offer",sdp:zt.write(d)}),F.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),n){F.debug("send() | applying given encodings");const m=l.sender.getParameters();for(let v=0;v<(m.encodings??[]).length;++v){const h=m.encodings[v],g=n[v];if(!g)break;m.encodings[v]=Object.assign(h,g)}await l.sender.setParameters(m)}const b=l.mid;if(r.mid=b,d=zt.parse(this._pc.localDescription.sdp),f=d.media[o.idx],r.rtcp.cname=Fc.getCname({offerMediaObject:f}),r.encodings=Xd.getRtpEncodings({offerMediaObject:f}),n)for(let m=0;m<r.encodings.length;++m)n[m]&&Object.assign(r.encodings[m],n[m]);if(p&&(r.encodings=[r.encodings[0]]),r.encodings.length>1&&(r.codecs[0].mimeType.toLowerCase()==="video/vp8"||r.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of r.encodings)m.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:o.reuseMid,offerRtpParameters:r,answerRtpParameters:c,codecOptions:a});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(b,l),{localId:b,rtpParameters:r,rtpSender:l.sender}}async stopSending(i){this.assertSendDirection(),F.debug("stopSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");if(n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid))try{n.stop()}catch{}const s=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(i)}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){this.assertSendDirection(),n?F.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):F.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();F.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();F.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmitTime:n,maxRetransmits:a,protocol:r};F.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%pg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=zt.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;F.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let r=await this._pc.createAnswer();const c=zt.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);Fc.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:zt.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(!d)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver})}return n}async stopReceiving(i){this.assertRecvDirection();for(const s of i){F.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){}async resumeReceiving(i){}async getReceiverStats(i){this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:o,protocol:a};F.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=zt.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=zt.parse(this._pc.localDescription.sdp));const a=Fc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ll.Chrome70=Ep;var Ol={},ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.getRtpEncodings=KT;ba.addLegacySimulcast=FT;function KT({offerMediaObject:e,track:t}){const i=new Set;for(const s of e.ssrcs??[]){if(s.attribute!=="msid")continue;if(s.value.split(" ")[1]===t.id){const c=s.id;i.add(c)}}if(i.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);const n=new Map;for(const s of e.ssrcGroups??[]){if(s.semantics!=="FID")continue;let[r,c]=s.ssrcs.split(/\s+/);r=Number(r),c=Number(c),i.has(r)&&(i.delete(r),i.delete(c),n.set(r,c))}for(const s of i)n.set(s,null);const a=[];for(const[s,r]of n){const c={ssrc:s};r&&(c.rtx={ssrc:r}),a.push(c)}return a}function FT({offerMediaObject:e,track:t,numStreams:i}){if(i<=1)throw new TypeError("numStreams must be greater than 1");let n,a,s;if(!(e.ssrcs??[]).find(d=>d.attribute!=="msid"?!1:d.value.split(" ")[1]===t.id?(n=d.id,s=d.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(e.ssrcGroups??[]).some(d=>{if(d.semantics!=="FID")return!1;const f=d.ssrcs.split(/\s+/);return Number(f[0])===n?(a=Number(f[1]),!0):!1});const c=e.ssrcs.find(d=>d.attribute==="cname"&&d.id===n);if(!c)throw new Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);const o=c.value,l=[],u=[];for(let d=0;d<i;++d)l.push(n+d),a&&u.push(a+d);e.ssrcGroups=e.ssrcGroups??[],e.ssrcs=e.ssrcs??[],e.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(const d of l)e.ssrcs.push({id:d,attribute:"cname",value:o}),e.ssrcs.push({id:d,attribute:"msid",value:`${s} ${t.id}`});for(let d=0;d<u.length;++d){const f=l[d],p=u[d];e.ssrcs.push({id:p,attribute:"cname",value:o}),e.ssrcs.push({id:p,attribute:"msid",value:`${s} ${t.id}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${p}`})}}Object.defineProperty(Ol,"__esModule",{value:!0});Ol.Chrome67=void 0;const ui=Ne,ZT=Oe,hg=Pe,Ia=_e,Zc=_t,mg=ba,JT=ct,WT=Ct,ne=new ZT.Logger("Chrome67"),eE="Chrome67",gg={OS:1024,MIS:1024};class Dp extends JT.HandlerInterface{constructor(){super();_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_sendStream",new MediaStream);_(this,"_mapSendLocalIdRtpSender",new Map);_(this,"_nextSendLocalId",0);_(this,"_mapRecvLocalIdInfo",new Map);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Dp}get name(){return eE}close(){if(ne.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ne.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const n=await i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{i.close()}catch{}const a=ui.parse(n.sdp);return Zc.extractRtpCapabilities({sdpObject:a})}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return ne.debug("getNativeSctpCapabilities()"),{numStreams:gg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){ne.debug("run()"),this._direction=i,this._remoteSdp=new WT.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:Ia.getSendingRtpParameters("audio",d),video:Ia.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ia.getSendingRemoteRtpParameters("audio",d),video:Ia.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ne.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){ne.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(ne.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});ne.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ne.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};ne.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();ne.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertSendDirection(),ne.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&ne.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(i),this._pc.addTrack(i,this._sendStream);let r=await this._pc.createOffer(),c=ui.parse(r.sdp);c.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let o;const l=hg.clone(this._sendingRtpParametersByKind[i.kind]);l.codecs=Ia.reduceCodecs(l.codecs);const u=hg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);if(u.codecs=Ia.reduceCodecs(u.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),i.kind==="video"&&n&&n.length>1&&(ne.debug("send() | enabling simulcast"),c=ui.parse(r.sdp),o=c.media.find(y=>y.type==="video"),mg.addLegacySimulcast({offerMediaObject:o,track:i,numStreams:n.length}),r={type:"offer",sdp:ui.write(c)}),ne.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),c=ui.parse(this._pc.localDescription.sdp),o=c.media.find(y=>y.type===i.kind),l.rtcp.cname=Zc.getCname({offerMediaObject:o}),l.encodings=mg.getRtpEncodings({offerMediaObject:o,track:i}),n)for(let y=0;y<l.encodings.length;++y)n[y]&&Object.assign(l.encodings[y],n[y]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const y of l.encodings)y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:o,offerRtpParameters:l,answerRtpParameters:u,codecOptions:a});const d={type:"answer",sdp:this._remoteSdp.getSdp()};ne.debug("send() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d);const f=String(this._nextSendLocalId);this._nextSendLocalId++;const p=this._pc.getSenders().find(y=>y.track===i);return this._mapSendLocalIdRtpSender.set(f,p),{localId:f,rtpParameters:l,rtpSender:p}}async stopSending(i){this.assertSendDirection(),ne.debug("stopSending() [localId:%s]",i);const n=this._mapSendLocalIdRtpSender.get(i);if(!n)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(n),n.track&&this._sendStream.removeTrack(n.track),this._mapSendLocalIdRtpSender.delete(i);const a=await this._pc.createOffer();ne.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(r){if(this._sendStream.getTracks().length===0){ne.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};ne.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){this.assertSendDirection(),n?ne.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):ne.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.track;await a.replaceTrack(n),s&&this._sendStream.removeTrack(s),n&&this._sendStream.addTrack(n)}async setMaxSpatialLayer(i,n){this.assertSendDirection(),ne.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{c<=n?r.active=!0:r.active=!1}),await a.setParameters(s)}async setRtpEncodingParameters(i,n){this.assertSendDirection(),ne.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{s.encodings[c]={...r,...n}}),await a.setParameters(s)}async getSenderStats(i){this.assertSendDirection();const n=this._mapSendLocalIdRtpSender.get(i);if(!n)throw new Error("associated RTCRtpSender not found");return n.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmitTime:n,maxRetransmits:a,protocol:r};ne.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%gg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=ui.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),ne.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};ne.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertRecvDirection();const n=[];for(const c of i){const{trackId:o,kind:l,rtpParameters:u,streamId:d}=c;ne.debug("receive() [trackId:%s, kind:%s]",o,l);const f=l;this._remoteSdp.receive({mid:f,kind:l,offerRtpParameters:u,streamId:d??u.rtcp.cname,trackId:o})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};ne.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let s=await this._pc.createAnswer();const r=ui.parse(s.sdp);for(const c of i){const{kind:o,rtpParameters:l}=c,u=o,d=r.media.find(f=>String(f.mid)===u);Zc.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:ui.write(r)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:r}),ne.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const c of i){const{kind:o,trackId:l,rtpParameters:u}=c,d=l,f=o,p=this._pc.getReceivers().find(y=>y.track&&y.track.id===d);if(!p)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(d,{mid:f,rtpParameters:u,rtpReceiver:p}),n.push({localId:d,track:p.track,rtpReceiver:p})}return n}async stopReceiving(i){this.assertRecvDirection();for(const s of i){ne.debug("stopReceiving() [localId:%s]",s);const{mid:r,rtpParameters:c}=this._mapRecvLocalIdInfo.get(s)??{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ne.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();ne.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async pauseReceiving(i){}async resumeReceiving(i){}async getReceiverStats(i){this.assertRecvDirection();const{rtpReceiver:n}=this._mapRecvLocalIdInfo.get(i)??{};if(!n)throw new Error("associated RTCRtpReceiver not found");return n.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:o,protocol:a};ne.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const d={type:"offer",sdp:this._remoteSdp.getSdp()};ne.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=ui.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}ne.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=ui.parse(this._pc.localDescription.sdp));const a=Zc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ol.Chrome67=Dp;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.Chrome55=void 0;const fi=Ne,tE=Oe,mr=qe,_g=Pe,Ha=_e,Jc=_t,vg=ba,iE=ct,nE=Ct,le=new tE.Logger("Chrome55"),aE="Chrome55",yg={OS:1024,MIS:1024};class Cp extends iE.HandlerInterface{constructor(){super();_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_sendStream",new MediaStream);_(this,"_mapSendLocalIdTrack",new Map);_(this,"_nextSendLocalId",0);_(this,"_mapRecvLocalIdInfo",new Map);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Cp}get name(){return aE}close(){if(le.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){le.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const n=await i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{i.close()}catch{}const a=fi.parse(n.sdp);return Jc.extractRtpCapabilities({sdpObject:a})}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return le.debug("getNativeSctpCapabilities()"),{numStreams:yg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){le.debug("run()"),this._direction=i,this._remoteSdp=new nE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:Ha.getSendingRtpParameters("audio",d),video:Ha.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ha.getSendingRemoteRtpParameters("audio",d),video:Ha.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(le.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){le.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(le.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});le.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();le.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertSendDirection(),le.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&le.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(i),this._pc.addStream(this._sendStream);let r=await this._pc.createOffer(),c=fi.parse(r.sdp);c.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let o;const l=_g.clone(this._sendingRtpParametersByKind[i.kind]);l.codecs=Ha.reduceCodecs(l.codecs);const u=_g.clone(this._sendingRemoteRtpParametersByKind[i.kind]);if(u.codecs=Ha.reduceCodecs(u.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),i.kind==="video"&&n&&n.length>1&&(le.debug("send() | enabling simulcast"),c=fi.parse(r.sdp),o=c.media.find(p=>p.type==="video"),vg.addLegacySimulcast({offerMediaObject:o,track:i,numStreams:n.length}),r={type:"offer",sdp:fi.write(c)}),le.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),c=fi.parse(this._pc.localDescription.sdp),o=c.media.find(p=>p.type===i.kind),l.rtcp.cname=Jc.getCname({offerMediaObject:o}),l.encodings=vg.getRtpEncodings({offerMediaObject:o,track:i}),n)for(let p=0;p<l.encodings.length;++p)n[p]&&Object.assign(l.encodings[p],n[p]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const p of l.encodings)p.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:o,offerRtpParameters:l,answerRtpParameters:u,codecOptions:a});const d={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("send() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d);const f=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(f,i),{localId:f,rtpParameters:l}}async stopSending(i){this.assertSendDirection(),le.debug("stopSending() [localId:%s]",i);const n=this._mapSendLocalIdTrack.get(i);if(!n)throw new Error("track not found");this._mapSendLocalIdTrack.delete(i),this._sendStream.removeTrack(n),this._pc.addStream(this._sendStream);const a=await this._pc.createOffer();le.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(r){if(this._sendStream.getTracks().length===0){le.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){throw new mr.UnsupportedError("not implemented")}async setMaxSpatialLayer(i,n){throw new mr.UnsupportedError(" not implemented")}async setRtpEncodingParameters(i,n){throw new mr.UnsupportedError("not supported")}async getSenderStats(i){throw new mr.UnsupportedError("not implemented")}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmitTime:n,maxRetransmits:a,protocol:r};le.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%yg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=fi.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),le.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertRecvDirection();const n=[];for(const c of i){const{trackId:o,kind:l,rtpParameters:u,streamId:d}=c;le.debug("receive() [trackId:%s, kind:%s]",o,l);const f=l;this._remoteSdp.receive({mid:f,kind:l,offerRtpParameters:u,streamId:d??u.rtcp.cname,trackId:o})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let s=await this._pc.createAnswer();const r=fi.parse(s.sdp);for(const c of i){const{kind:o,rtpParameters:l}=c,u=o,d=r.media.find(f=>String(f.mid)===u);Jc.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:fi.write(r)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:r}),le.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const c of i){const{kind:o,trackId:l,rtpParameters:u}=c,d=o,f=l,p=c.streamId??u.rtcp.cname,b=this._pc.getRemoteStreams().find(w=>w.id===p).getTrackById(f);if(!b)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(f,{mid:d,rtpParameters:u}),n.push({localId:f,track:b})}return n}async stopReceiving(i){this.assertRecvDirection();for(const s of i){le.debug("stopReceiving() [localId:%s]",s);const{mid:r,rtpParameters:c}=this._mapRecvLocalIdInfo.get(s)??{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();le.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async pauseReceiving(i){}async resumeReceiving(i){}async getReceiverStats(i){throw new mr.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:o,protocol:a};le.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const d={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=fi.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=fi.parse(this._pc.localDescription.sdp));const a=Jc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}kl.Chrome55=Cp;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.Firefox120=void 0;const ln=Ne,sE=Oe,Sg=qe,bg=Pe,qa=_e,Wc=_t,wg=xi,rE=ct,cE=Ct,oE=Mi,V=new sE.Logger("Firefox120"),lE="Firefox120",Rg={OS:16,MIS:2048};class xp extends rE.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new xp}get name(){return lE}close(){if(V.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){V.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),n=document.createElement("canvas");n.getContext("2d");const s=n.captureStream().getVideoTracks()[0];try{i.addTransceiver("audio",{direction:"sendrecv"}),i.addTransceiver(s,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const r=await i.createOffer();try{n.remove()}catch{}try{s.stop()}catch{}try{i.close()}catch{}const c=ln.parse(r.sdp);return Wc.extractRtpCapabilities({sdpObject:c})}catch(r){try{n.remove()}catch{}try{s.stop()}catch{}try{i.close()}catch{}throw r}}async getNativeSctpCapabilities(){return V.debug("getNativeSctpCapabilities()"),{numStreams:Rg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){this.assertNotClosed(),V.debug("run()"),this._direction=i,this._remoteSdp=new cE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:qa.getSendingRtpParameters("audio",d),video:qa.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:qa.getSendingRemoteRtpParameters("audio",d),video:qa.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(V.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){throw this.assertNotClosed(),new Sg.UnsupportedError("not supported")}async restartIce(i){if(this.assertNotClosed(),V.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});V.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();V.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s,onRtpSender:r}){this.assertNotClosed(),this.assertSendDirection(),V.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),n&&n.length>1&&n.forEach((w,m)=>{w.rid=`r${m}`});const c=bg.clone(this._sendingRtpParametersByKind[i.kind]);c.codecs=qa.reduceCodecs(c.codecs,s);const o=bg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);o.codecs=qa.reduceCodecs(o.codecs,s);const l=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:n});r&&r(l.sender);const u=await this._pc.createOffer();let d=ln.parse(u.sdp);d.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d});const f=(0,oE.parse)((n??[{}])[0].scalabilityMode);V.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p=l.mid;c.mid=p,d=ln.parse(this._pc.localDescription.sdp);const y=d.media[d.media.length-1];if(c.rtcp.cname=Wc.getCname({offerMediaObject:y}),!n)c.encodings=wg.getRtpEncodings({offerMediaObject:y});else if(n.length===1){const w=wg.getRtpEncodings({offerMediaObject:y});Object.assign(w[0],n[0]),c.encodings=w}else c.encodings=n;if(c.encodings.length>1&&(c.codecs[0].mimeType.toLowerCase()==="video/vp8"||c.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const w of c.encodings)w.scalabilityMode?w.scalabilityMode=`L1T${f.temporalLayers}`:w.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:y,offerRtpParameters:c,answerRtpParameters:o,codecOptions:a});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return V.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(p,l),{localId:p,rtpParameters:c,rtpSender:l.sender}}async stopSending(i){if(this.assertSendDirection(),V.debug("stopSending() [localId:%s]",i),this._closed)return;const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated transceiver not found");n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.disableMediaSection(n.mid);const a=await this._pc.createOffer();V.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),V.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();V.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),V.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(i);const a=await this._pc.createOffer();V.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?V.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):V.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),V.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated transceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();V.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),V.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();V.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};V.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Rg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=ln.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d}),V.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;V.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);for(const o of i){const{trackId:l,onRtpReceiver:u}=o;if(u){const d=a.get(l),f=this._pc.getTransceivers().find(p=>p.mid===d);if(!f)throw new Error("transceiver not found");u(f.receiver)}}let r=await this._pc.createAnswer();const c=ln.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);Wc.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f}),r={type:"answer",sdp:ln.write(c)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:c}),V.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(!d)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver})}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){V.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();V.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){V.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();V.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){V.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();V.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};V.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=ln.parse(f.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:p})}V.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=ln.parse(this._pc.localDescription.sdp));const a=Wc.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Sg.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Al.Firefox120=xp;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.Firefox60=void 0;const dn=Ne,dE=Oe,Tg=qe,Kd=Pe,$a=_e,eo=_t,Eg=xi,uE=ct,fE=Ct,pE=Mi,Y=new dE.Logger("Firefox60"),hE="Firefox60",Dg={OS:16,MIS:2048};class Mp extends uE.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Mp}get name(){return hE}close(){if(Y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Y.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),n=document.createElement("canvas");n.getContext("2d");const s=n.captureStream().getVideoTracks()[0];try{i.addTransceiver("audio",{direction:"sendrecv"});const r=i.addTransceiver(s,{direction:"sendrecv"}),c=r.sender.getParameters(),o=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];c.encodings=o,await r.sender.setParameters(c);const l=await i.createOffer();try{n.remove()}catch{}try{s.stop()}catch{}try{i.close()}catch{}const u=dn.parse(l.sdp);return eo.extractRtpCapabilities({sdpObject:u})}catch(r){try{n.remove()}catch{}try{s.stop()}catch{}try{i.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Y.debug("getNativeSctpCapabilities()"),{numStreams:Dg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){this.assertNotClosed(),Y.debug("run()"),this._direction=i,this._remoteSdp=new fE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:$a.getSendingRtpParameters("audio",d),video:$a.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:$a.getSendingRemoteRtpParameters("audio",d),video:$a.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){throw this.assertNotClosed(),new Tg.UnsupportedError("not supported")}async restartIce(i){if(this.assertNotClosed(),Y.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});Y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();Y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertNotClosed(),this.assertSendDirection(),Y.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),n&&(n=Kd.clone(n),n.forEach((b,w)=>{b.rid=`r${w}`}),n.reverse());const r=Kd.clone(this._sendingRtpParametersByKind[i.kind]);r.codecs=$a.reduceCodecs(r.codecs,s);const c=Kd.clone(this._sendingRemoteRtpParametersByKind[i.kind]);c.codecs=$a.reduceCodecs(c.codecs,s);const o=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream]});if(n){const b=o.sender.getParameters();b.encodings=n,await o.sender.setParameters(b)}const l=await this._pc.createOffer();let u=dn.parse(l.sdp);u.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:u});const d=(0,pE.parse)((n??[{}])[0].scalabilityMode);Y.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=o.mid;r.mid=f,u=dn.parse(this._pc.localDescription.sdp);const p=u.media[u.media.length-1];if(r.rtcp.cname=eo.getCname({offerMediaObject:p}),!n)r.encodings=Eg.getRtpEncodings({offerMediaObject:p});else if(n.length===1){const b=Eg.getRtpEncodings({offerMediaObject:p});Object.assign(b[0],n[0]),r.encodings=b}else r.encodings=n.reverse();if(r.encodings.length>1&&(r.codecs[0].mimeType.toLowerCase()==="video/vp8"||r.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of r.encodings)b.scalabilityMode?b.scalabilityMode=`L1T${d.temporalLayers}`:b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:r,answerRtpParameters:c,codecOptions:a});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return Y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(f,o),{localId:f,rtpParameters:r,rtpSender:o.sender}}async stopSending(i){if(this.assertSendDirection(),Y.debug("stopSending() [localId:%s]",i),this._closed)return;const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated transceiver not found");n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.disableMediaSection(n.mid);const a=await this._pc.createOffer();Y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),Y.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();Y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),Y.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(i);const a=await this._pc.createOffer();Y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?Y.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):Y.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),Y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated transceiver not found");const s=a.sender.getParameters();n=s.encodings.length-1-n,s.encodings.forEach((o,l)=>{l>=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();Y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),Y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();Y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};Y.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Dg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=dn.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d}),Y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};Y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;Y.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let r=await this._pc.createAnswer();const c=dn.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);eo.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f}),r={type:"answer",sdp:dn.write(c)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:c}),Y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(!d)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver})}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){Y.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();Y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){Y.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();Y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){Y.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();Y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};Y.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};Y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=dn.parse(f.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:p})}Y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=dn.parse(this._pc.localDescription.sdp));const a=eo.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Tg.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Pl.Firefox60=Mp;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Safari12=void 0;const pi=Ne,mE=Oe,Cg=Pe,Ga=_e,to=_t,xg=xi,gE=Vs,_E=qe,vE=ct,yE=Ct,SE=Mi,H=new mE.Logger("Safari12"),bE="Safari12",Mg={OS:1024,MIS:1024};class Lp extends vE.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Lp}get name(){return bE}close(){if(H.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){H.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{i.addTransceiver("audio"),i.addTransceiver("video");const n=await i.createOffer();try{i.close()}catch{}const a=pi.parse(n.sdp),s=to.extractRtpCapabilities({sdpObject:a});return gE.addNackSupportForOpus(s),s}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return H.debug("getNativeSctpCapabilities()"),{numStreams:Mg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){this.assertNotClosed(),H.debug("run()"),this._direction=i,this._remoteSdp=new yE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:Ga.getSendingRtpParameters("audio",d),video:Ga.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ga.getSendingRemoteRtpParameters("audio",d),video:Ga.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(H.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){this.assertNotClosed(),H.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(this.assertNotClosed(),H.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});H.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();H.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s,onRtpSender:r}){this.assertNotClosed(),this.assertSendDirection(),H.debug("send() [kind:%s, track.id:%s]",i.kind,i.id);const c=Cg.clone(this._sendingRtpParametersByKind[i.kind]);c.codecs=Ga.reduceCodecs(c.codecs,s);const o=Cg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);o.codecs=Ga.reduceCodecs(o.codecs,s);const l=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream]});r&&r(u.sender);let d=await this._pc.createOffer(),f=pi.parse(d.sdp);f.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});const y=(0,SE.parse)((n??[{}])[0].scalabilityMode);n&&n.length>1&&(H.debug("send() | enabling legacy simulcast"),f=pi.parse(d.sdp),p=f.media[l.idx],xg.addLegacySimulcast({offerMediaObject:p,numStreams:n.length}),d={type:"offer",sdp:pi.write(f)}),H.debug("send() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const b=u.mid;if(c.mid=b,f=pi.parse(this._pc.localDescription.sdp),p=f.media[l.idx],c.rtcp.cname=to.getCname({offerMediaObject:p}),c.encodings=xg.getRtpEncodings({offerMediaObject:p}),n)for(let m=0;m<c.encodings.length;++m)n[m]&&Object.assign(c.encodings[m],n[m]);if(c.encodings.length>1&&(c.codecs[0].mimeType.toLowerCase()==="video/vp8"||c.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of c.encodings)m.scalabilityMode?m.scalabilityMode=`L1T${y.temporalLayers}`:m.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,reuseMid:l.reuseMid,offerRtpParameters:c,answerRtpParameters:o,codecOptions:a});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return H.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(b,u),{localId:b,rtpParameters:c,rtpSender:u.sender}}async stopSending(i){if(this.assertSendDirection(),this._closed)return;H.debug("stopSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");if(n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid))try{n.stop()}catch{}const s=await this._pc.createOffer();H.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),H.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();H.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),H.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(i);const a=await this._pc.createOffer();H.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?H.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):H.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),H.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();H.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),H.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();H.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};H.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Mg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=pi.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),H.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;H.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);for(const o of i){const{trackId:l,onRtpReceiver:u}=o;if(u){const d=a.get(l),f=this._pc.getTransceivers().find(p=>p.mid===d);if(!f)throw new Error("transceiver not found");u(f.receiver)}}let r=await this._pc.createAnswer();const c=pi.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);to.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:pi.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),H.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(!d)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver})}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){H.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();H.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){H.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();H.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){H.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();H.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};H.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=pi.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=pi.parse(this._pc.localDescription.sdp));const a=to.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new _E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Nl.Safari12=Lp;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.Safari11=void 0;const hi=Ne,wE=Oe,Lg=Pe,Va=_e,io=_t,Og=ba,RE=ct,TE=Ct,ae=new wE.Logger("Safari11"),EE="Safari11",kg={OS:1024,MIS:1024};class Op extends RE.HandlerInterface{constructor(){super();_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_sendStream",new MediaStream);_(this,"_mapSendLocalIdRtpSender",new Map);_(this,"_nextSendLocalId",0);_(this,"_mapRecvLocalIdInfo",new Map);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Op}get name(){return EE}close(){if(ae.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ae.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const n=await i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{i.close()}catch{}const a=hi.parse(n.sdp);return io.extractRtpCapabilities({sdpObject:a})}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return ae.debug("getNativeSctpCapabilities()"),{numStreams:kg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){ae.debug("run()"),this._direction=i,this._remoteSdp=new TE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:Va.getSendingRtpParameters("audio",d),video:Va.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Va.getSendingRemoteRtpParameters("audio",d),video:Va.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ae.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){ae.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(ae.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});ae.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();ae.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertSendDirection(),ae.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&ae.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(i),this._pc.addTrack(i,this._sendStream);let r=await this._pc.createOffer(),c=hi.parse(r.sdp);c.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let o;const l=Lg.clone(this._sendingRtpParametersByKind[i.kind]);l.codecs=Va.reduceCodecs(l.codecs);const u=Lg.clone(this._sendingRemoteRtpParametersByKind[i.kind]);if(u.codecs=Va.reduceCodecs(u.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),i.kind==="video"&&n&&n.length>1&&(ae.debug("send() | enabling simulcast"),c=hi.parse(r.sdp),o=c.media.find(y=>y.type==="video"),Og.addLegacySimulcast({offerMediaObject:o,track:i,numStreams:n.length}),r={type:"offer",sdp:hi.write(c)}),ae.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),c=hi.parse(this._pc.localDescription.sdp),o=c.media.find(y=>y.type===i.kind),l.rtcp.cname=io.getCname({offerMediaObject:o}),l.encodings=Og.getRtpEncodings({offerMediaObject:o,track:i}),n)for(let y=0;y<l.encodings.length;++y)n[y]&&Object.assign(l.encodings[y],n[y]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const y of l.encodings)y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:o,offerRtpParameters:l,answerRtpParameters:u,codecOptions:a});const d={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("send() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d);const f=String(this._nextSendLocalId);this._nextSendLocalId++;const p=this._pc.getSenders().find(y=>y.track===i);return this._mapSendLocalIdRtpSender.set(f,p),{localId:f,rtpParameters:l,rtpSender:p}}async stopSending(i){this.assertSendDirection();const n=this._mapSendLocalIdRtpSender.get(i);if(!n)throw new Error("associated RTCRtpSender not found");n.track&&this._sendStream.removeTrack(n.track),this._mapSendLocalIdRtpSender.delete(i);const a=await this._pc.createOffer();ae.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(r){if(this._sendStream.getTracks().length===0){ae.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){this.assertSendDirection(),n?ae.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):ae.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.track;await a.replaceTrack(n),s&&this._sendStream.removeTrack(s),n&&this._sendStream.addTrack(n)}async setMaxSpatialLayer(i,n){this.assertSendDirection(),ae.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{c<=n?r.active=!0:r.active=!1}),await a.setParameters(s)}async setRtpEncodingParameters(i,n){this.assertSendDirection(),ae.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapSendLocalIdRtpSender.get(i);if(!a)throw new Error("associated RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{s.encodings[c]={...r,...n}}),await a.setParameters(s)}async getSenderStats(i){this.assertSendDirection();const n=this._mapSendLocalIdRtpSender.get(i);if(!n)throw new Error("associated RTCRtpSender not found");return n.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};ae.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%kg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=hi.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),ae.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertRecvDirection();const n=[];for(const c of i){const{trackId:o,kind:l,rtpParameters:u,streamId:d}=c;ae.debug("receive() [trackId:%s, kind:%s]",o,l);const f=l;this._remoteSdp.receive({mid:f,kind:l,offerRtpParameters:u,streamId:d??u.rtcp.cname,trackId:o})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let s=await this._pc.createAnswer();const r=hi.parse(s.sdp);for(const c of i){const{kind:o,rtpParameters:l}=c,u=o,d=r.media.find(f=>String(f.mid)===u);io.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:hi.write(r)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:r}),ae.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const c of i){const{kind:o,trackId:l,rtpParameters:u}=c,d=o,f=l,p=this._pc.getReceivers().find(y=>y.track&&y.track.id===f);if(!p)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(f,{mid:d,rtpParameters:u,rtpReceiver:p}),n.push({localId:f,track:p.track,rtpReceiver:p})}return n}async stopReceiving(i){this.assertRecvDirection();for(const s of i){ae.debug("stopReceiving() [localId:%s]",s);const{mid:r,rtpParameters:c}=this._mapRecvLocalIdInfo.get(s)??{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();ae.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertRecvDirection();const{rtpReceiver:n}=this._mapRecvLocalIdInfo.get(i)??{};if(!n)throw new Error("associated RTCRtpReceiver not found");return n.getStats()}async pauseReceiving(i){}async resumeReceiving(i){}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};ae.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const d={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=hi.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=hi.parse(this._pc.localDescription.sdp));const a=io.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}jl.Safari11=Op;var Ul={},zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.getCapabilities=DE;zl.mangleRtpParameters=CE;const wS=Pe;function DE(){const e=RTCRtpReceiver.getCapabilities(),t=wS.clone(e);for(const i of t.codecs??[]){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType??`${i.kind}/${i.name}`,i.parameters){const n=i.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(const n of i.rtcpFeedback??[])n.parameter||(n.parameter="")}return t}function CE(e){const t=wS.clone(e);t.mid&&(t.muxId=t.mid,delete t.mid);for(const i of t.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return t}Object.defineProperty(Ul,"__esModule",{value:!0});Ul.Edge11=void 0;const xE=Oe,Fd=qe,no=Pe,Zd=_e,Jd=zl,ME=ct,pe=new xE.Logger("Edge11"),LE="Edge11";class kp extends ME.HandlerInterface{constructor(){super();_(this,"_sendingRtpParametersByKind");_(this,"_remoteIceParameters");_(this,"_remoteIceCandidates");_(this,"_remoteDtlsParameters");_(this,"_iceGatherer");_(this,"_iceTransport");_(this,"_dtlsTransport");_(this,"_rtpSenders",new Map);_(this,"_rtpReceivers",new Map);_(this,"_nextSendLocalId",0);_(this,"_cname");_(this,"_transportReady",!1)}static createFactory(){return()=>new kp}get name(){return LE}close(){pe.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const i of this._rtpSenders.values())try{i.stop()}catch{}for(const i of this._rtpReceivers.values())try{i.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return pe.debug("getNativeRtpCapabilities()"),Jd.getCapabilities()}async getNativeSctpCapabilities(){return pe.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){pe.debug("run()"),this._sendingRtpParametersByKind={audio:Zd.getSendingRtpParameters("audio",d),video:Zd.getSendingRtpParameters("video",d)},this._remoteIceParameters=n,this._remoteIceCandidates=a,this._remoteDtlsParameters=s,this._cname=`CNAME-${no.generateRandomNumber()}`,this.setIceGatherer({iceServers:c,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(i){throw new Fd.UnsupportedError("not supported")}async restartIce(i){if(pe.debug("restartIce()"),this._remoteIceParameters=i,!!this._transportReady){pe.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,i,"controlling");for(const n of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(n);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){pe.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),pe.debug("send() | calling new RTCRtpSender()");const r=new RTCRtpSender(i,this._dtlsTransport),c=no.clone(this._sendingRtpParametersByKind[i.kind]);c.codecs=Zd.reduceCodecs(c.codecs,s);const o=c.codecs.some(d=>/.+\/rtx$/i.test(d.mimeType));n||(n=[{}]);for(const d of n)d.ssrc=no.generateRandomNumber(),o&&(d.rtx={ssrc:no.generateRandomNumber()});c.encodings=n,c.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const l=Jd.mangleRtpParameters(c);pe.debug("send() | calling rtpSender.send() [params:%o]",l),await r.send(l);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,r),{localId:u,rtpParameters:c,rtpSender:r}}async stopSending(i){pe.debug("stopSending() [localId:%s]",i);const n=this._rtpSenders.get(i);if(!n)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(i);try{pe.debug("stopSending() | calling rtpSender.stop()"),n.stop()}catch(a){throw pe.warn("stopSending() | rtpSender.stop() failed:%o",a),a}}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){n?pe.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):pe.debug("replaceTrack() [localId:%s, no track]",i);const a=this._rtpSenders.get(i);if(!a)throw new Error("RTCRtpSender not found");a.setTrack(n)}async setMaxSpatialLayer(i,n){pe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._rtpSenders.get(i);if(!a)throw new Error("RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{c<=n?r.active=!0:r.active=!1}),await a.setParameters(s)}async setRtpEncodingParameters(i,n){pe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._rtpSenders.get(i);if(!a)throw new Error("RTCRtpSender not found");const s=a.getParameters();s.encodings.forEach((r,c)=>{s.encodings[c]={...r,...n}}),await a.setParameters(s)}async getSenderStats(i){const n=this._rtpSenders.get(i);if(!n)throw new Error("RTCRtpSender not found");return n.getStats()}async sendDataChannel(i){throw new Fd.UnsupportedError("not implemented")}async receive(i){const n=[];for(const a of i){const{trackId:s,kind:r}=a;pe.debug("receive() [trackId:%s, kind:%s]",s,r)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const a of i){const{trackId:s,kind:r,rtpParameters:c}=a;pe.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,r);o.addEventListener("error",d=>{pe.error('rtpReceiver "error" event [event:%o]',d)});const l=Jd.mangleRtpParameters(c);pe.debug("receive() | calling rtpReceiver.receive() [params:%o]",l),await o.receive(l);const u=s;this._rtpReceivers.set(u,o),n.push({localId:u,track:o.track,rtpReceiver:o})}return n}async stopReceiving(i){for(const n of i){pe.debug("stopReceiving() [localId:%s]",n);const a=this._rtpReceivers.get(n);if(!a)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(n);try{pe.debug("stopReceiving() | calling rtpReceiver.stop()"),a.stop()}catch(s){pe.warn("stopReceiving() | rtpReceiver.stop() failed:%o",s)}}}async pauseReceiving(i){}async resumeReceiving(i){}async getReceiverStats(i){const n=this._rtpReceivers.get(i);if(!n)throw new Error("RTCRtpReceiver not found");return n.getStats()}async receiveDataChannel(i){throw new Fd.UnsupportedError("not implemented")}setIceGatherer({iceServers:i,iceTransportPolicy:n}){const a=new RTCIceGatherer({iceServers:i??[],gatherPolicy:n??"all"});a.addEventListener("error",s=>{pe.error('iceGatherer "error" event [event:%o]',s)});try{a.gather()}catch(s){pe.debug("setIceGatherer() | iceGatherer.gather() failed: %s",s.toString())}this._iceGatherer=a}setIceTransport(){const i=new RTCIceTransport(this._iceGatherer);i.addEventListener("statechange",()=>{switch(i.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),i.addEventListener("icestatechange",()=>{switch(i.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),i.addEventListener("candidatepairchange",n=>{pe.debug('iceTransport "candidatepairchange" event [pair:%o]',n.pair)}),this._iceTransport=i}setDtlsTransport(){const i=new RTCDtlsTransport(this._iceTransport);i.addEventListener("statechange",()=>{pe.debug('dtlsTransport "statechange" event [state:%s]',i.state)}),i.addEventListener("dtlsstatechange",()=>{pe.debug('dtlsTransport "dtlsstatechange" event [state:%s]',i.state),i.state==="closed"&&this.emit("@connectionstatechange","closed")}),i.addEventListener("error",n=>{pe.error('dtlsTransport "error" event [event:%o]',n)}),this._dtlsTransport=i}async setupTransport({localDtlsRole:i}){pe.debug("setupTransport()");const n=this._dtlsTransport.getLocalParameters();n.role=i,await new Promise((a,s)=>{this.safeEmit("@connect",{dtlsParameters:n},a,s)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const a of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(a);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(a=>a.algorithm==="sha-256"||a.algorithm==="sha-384"||a.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}Ul.Edge11=kp;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.ReactNativeUnifiedPlan=void 0;const mi=Ne,OE=Oe,Ag=Pe,Ya=_e,ao=_t,Wd=xi,kE=Vs,AE=qe,PE=ct,NE=Ct,jE=Mi,B=new OE.Logger("ReactNativeUnifiedPlan"),UE="ReactNativeUnifiedPlan",Pg={OS:1024,MIS:1024};class Ap extends PE.HandlerInterface{constructor(){super();_(this,"_closed",!1);_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_mapMidTransceiver",new Map);_(this,"_sendStream",new MediaStream);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Ap}get name(){return UE}close(){if(B.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){B.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const n=await i.createOffer();try{i.close()}catch{}const a=mi.parse(n.sdp),s=ao.extractRtpCapabilities({sdpObject:a});return kE.addNackSupportForOpus(s),s}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return B.debug("getNativeSctpCapabilities()"),{numStreams:Pg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){this.assertNotClosed(),B.debug("run()"),this._direction=i,this._remoteSdp=new NE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r}),this._sendingRtpParametersByKind={audio:Ya.getSendingRtpParameters("audio",d),video:Ya.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Ya.getSendingRemoteRtpParameters("audio",d),video:Ya.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(B.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){this.assertNotClosed(),B.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(this.assertNotClosed(),B.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});B.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();B.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s,onRtpSender:r}){this.assertNotClosed(),this.assertSendDirection(),B.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),n&&n.length>1&&n.forEach((v,h)=>{v.rid=`r${h}`});const c=Ag.clone(this._sendingRtpParametersByKind[i.kind]);c.codecs=Ya.reduceCodecs(c.codecs,s);const o=Ag.clone(this._sendingRemoteRtpParametersByKind[i.kind]);o.codecs=Ya.reduceCodecs(o.codecs,s);const l=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:n});r&&r(u.sender);let d=await this._pc.createOffer(),f=mi.parse(d.sdp);f.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});let y=!1;const b=(0,jE.parse)((n??[{}])[0].scalabilityMode);n&&n.length===1&&b.spatialLayers>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(B.debug("send() | enabling legacy simulcast for VP9 SVC"),y=!0,f=mi.parse(d.sdp),p=f.media[l.idx],Wd.addLegacySimulcast({offerMediaObject:p,numStreams:b.spatialLayers}),d={type:"offer",sdp:mi.write(f)}),B.debug("send() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);let w=u.mid??void 0;if(w||B.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),c.mid=w,f=mi.parse(this._pc.localDescription.sdp),p=f.media[l.idx],c.rtcp.cname=ao.getCname({offerMediaObject:p}),!n)c.encodings=Wd.getRtpEncodings({offerMediaObject:p});else if(n.length===1){let v=Wd.getRtpEncodings({offerMediaObject:p});Object.assign(v[0],n[0]),y&&(v=[v[0]]),c.encodings=v}else c.encodings=n;if(c.encodings.length>1&&(c.codecs[0].mimeType.toLowerCase()==="video/vp8"||c.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const v of c.encodings)v.scalabilityMode?v.scalabilityMode=`L1T${b.temporalLayers}`:v.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,reuseMid:l.reuseMid,offerRtpParameters:c,answerRtpParameters:o,codecOptions:a});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return B.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),w||(w=u.mid,c.mid=w),this._mapMidTransceiver.set(w,u),{localId:w,rtpParameters:c,rtpSender:u.sender}}async stopSending(i){if(this.assertSendDirection(),this._closed)return;B.debug("stopSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");if(n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid))try{n.stop()}catch{}const s=await this._pc.createOffer();B.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),B.debug("pauseSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(i);const a=await this._pc.createOffer();B.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),B.debug("resumeSending() [localId:%s]",i);const n=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="sendonly";const a=await this._pc.createOffer();B.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const s={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(i,n){this.assertNotClosed(),this.assertSendDirection(),n?B.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):B.debug("replaceTrack() [localId:%s, no track]",i);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),this.assertSendDirection(),B.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{l<=n?o.active=!0:o.active=!1}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();B.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),this.assertSendDirection(),B.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n);const a=this._mapMidTransceiver.get(i);if(!a)throw new Error("associated RTCRtpTransceiver not found");const s=a.sender.getParameters();s.encodings.forEach((o,l)=>{s.encodings[l]={...o,...n}}),await a.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(i,s.encodings);const r=await this._pc.createOffer();B.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const c={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,protocol:r};B.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Pg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=mi.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),B.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};B.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d,streamId:f}=o;B.debug("receive() [trackId:%s, kind:%s]",l,u);const p=d.mid??String(this._mapMidTransceiver.size);a.set(l,p),this._remoteSdp.receive({mid:p,kind:u,offerRtpParameters:d,streamId:f??d.rtcp.cname,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);for(const o of i){const{trackId:l,onRtpReceiver:u}=o;if(u){const d=a.get(l),f=this._pc.getTransceivers().find(p=>p.mid===d);if(!f)throw new Error("transceiver not found");u(f.receiver)}}let r=await this._pc.createAnswer();const c=mi.parse(r.sdp);for(const o of i){const{trackId:l,rtpParameters:u}=o,d=a.get(l),f=c.media.find(p=>String(p.mid)===d);ao.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:mi.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),B.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{trackId:l}=o,u=a.get(l),d=this._pc.getTransceivers().find(f=>f.mid===u);if(d)this._mapMidTransceiver.set(u,d),n.push({localId:u,track:d.receiver.track,rtpReceiver:d.receiver});else throw new Error("new RTCRtpTransceiver not found")}return n}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const s of i){B.debug("stopReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();B.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of i)this._mapMidTransceiver.delete(s)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){B.debug("pauseReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();B.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const s of i){B.debug("resumeReceiving() [localId:%s]",s);const r=this._mapMidTransceiver.get(s);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const n={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();B.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const n=this._mapMidTransceiver.get(i);if(!n)throw new Error("associated RTCRtpTransceiver not found");return n.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o,protocol:a};B.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const d={type:"offer",sdp:this._remoteSdp.getSdp()};B.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=mi.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}B.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=mi.parse(this._pc.localDescription.sdp));const a=ao.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new AE.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Bl.ReactNativeUnifiedPlan=Ap;var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.ReactNative=void 0;const gi=Ne,zE=Oe,gr=qe,eu=Pe,Qa=_e,so=_t,Ng=ba,BE=ct,IE=Ct,oe=new zE.Logger("ReactNative"),HE="ReactNative",jg={OS:1024,MIS:1024};class Pp extends BE.HandlerInterface{constructor(){super();_(this,"_direction");_(this,"_remoteSdp");_(this,"_sendingRtpParametersByKind");_(this,"_sendingRemoteRtpParametersByKind");_(this,"_forcedLocalDtlsRole");_(this,"_pc");_(this,"_sendStream",new MediaStream);_(this,"_mapSendLocalIdTrack",new Map);_(this,"_nextSendLocalId",0);_(this,"_mapRecvLocalIdInfo",new Map);_(this,"_hasDataChannelMediaSection",!1);_(this,"_nextSendSctpStreamId",0);_(this,"_transportReady",!1)}static createFactory(){return()=>new Pp}get name(){return HE}close(){if(oe.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){oe.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const n=await i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{i.close()}catch{}const a=gi.parse(n.sdp);return so.extractRtpCapabilities({sdpObject:a})}catch(n){try{i.close()}catch{}throw n}}async getNativeSctpCapabilities(){return oe.debug("getNativeSctpCapabilities()"),{numStreams:jg}}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:d}){oe.debug("run()"),this._direction=i,this._remoteSdp=new IE.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:Qa.getSendingRtpParameters("audio",d),video:Qa.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:Qa.getSendingRemoteRtpParameters("audio",d),video:Qa.getSendingRemoteRtpParameters("video",d)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:c??[],iceTransportPolicy:o??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...l},u),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",f=>{this.emit("@icecandidateerror",f)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(oe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(i){oe.debug("updateIceServers()");const n=this._pc.getConfiguration();n.iceServers=i,this._pc.setConfiguration(n)}async restartIce(i){if(oe.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),!!this._transportReady)if(this._direction==="send"){const n=await this._pc.createOffer({iceRestart:!0});oe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const n={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();oe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertSendDirection(),oe.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&oe.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(i),this._pc.addStream(this._sendStream);let r=await this._pc.createOffer(),c=gi.parse(r.sdp);c.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let o;const l=eu.clone(this._sendingRtpParametersByKind[i.kind]);l.codecs=Qa.reduceCodecs(l.codecs);const u=eu.clone(this._sendingRemoteRtpParametersByKind[i.kind]);if(u.codecs=Qa.reduceCodecs(u.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),i.kind==="video"&&n&&n.length>1&&(oe.debug("send() | enabling simulcast"),c=gi.parse(r.sdp),o=c.media.find(p=>p.type==="video"),Ng.addLegacySimulcast({offerMediaObject:o,track:i,numStreams:n.length}),r={type:"offer",sdp:gi.write(c)}),oe.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),c=gi.parse(this._pc.localDescription.sdp),o=c.media.find(p=>p.type===i.kind),l.rtcp.cname=so.getCname({offerMediaObject:o}),l.encodings=Ng.getRtpEncodings({offerMediaObject:o,track:i}),n)for(let p=0;p<l.encodings.length;++p)n[p]&&Object.assign(l.encodings[p],n[p]);if(l.encodings.length>1&&(l.codecs[0].mimeType.toLowerCase()==="video/vp8"||l.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const p of l.encodings)p.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:o,offerRtpParameters:l,answerRtpParameters:u,codecOptions:a});const d={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d);const f=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(f,i),{localId:f,rtpParameters:l}}async stopSending(i){this.assertSendDirection(),oe.debug("stopSending() [localId:%s]",i);const n=this._mapSendLocalIdTrack.get(i);if(!n)throw new Error("track not found");this._mapSendLocalIdTrack.delete(i),this._sendStream.removeTrack(n),this._pc.addStream(this._sendStream);const a=await this._pc.createOffer();oe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(r){if(this._sendStream.getTracks().length===0){oe.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(i){}async resumeSending(i){}async replaceTrack(i,n){throw new gr.UnsupportedError("not implemented")}async setMaxSpatialLayer(i,n){throw new gr.UnsupportedError("not implemented")}async setRtpEncodingParameters(i,n){throw new gr.UnsupportedError("not implemented")}async getSenderStats(i){throw new gr.UnsupportedError("not implemented")}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertSendDirection();const c={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmitTime:n,maxRetransmits:a,protocol:r};oe.debug("sendDataChannel() [options:%o]",c);const o=this._pc.createDataChannel(s,c);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jg.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),d=gi.parse(u.sdp),f=d.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),oe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const p={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const l={streamId:c.id,ordered:c.ordered,maxPacketLifeTime:c.maxPacketLifeTime,maxRetransmits:c.maxRetransmits};return{dataChannel:o,sctpStreamParameters:l}}async receive(i){this.assertRecvDirection();const n=[],a=new Map;for(const o of i){const{trackId:l,kind:u,rtpParameters:d}=o;oe.debug("receive() [trackId:%s, kind:%s]",l,u);const f=u;let p=o.streamId??d.rtcp.cname;oe.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),p+=`-hack-${eu.generateRandomNumber()}`,a.set(l,p),this._remoteSdp.receive({mid:f,kind:u,offerRtpParameters:d,streamId:p,trackId:l})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let r=await this._pc.createAnswer();const c=gi.parse(r.sdp);for(const o of i){const{kind:l,rtpParameters:u}=o,d=l,f=c.media.find(p=>String(p.mid)===d);so.applyCodecParameters({offerRtpParameters:u,answerMediaObject:f})}r={type:"answer",sdp:gi.write(c)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),oe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const o of i){const{kind:l,trackId:u,rtpParameters:d}=o,f=u,p=l,y=a.get(u),w=this._pc.getRemoteStreams().find(m=>m.id===y).getTrackById(f);if(!w)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(f,{mid:p,rtpParameters:d}),n.push({localId:f,track:w})}return n}async stopReceiving(i){this.assertRecvDirection();for(const s of i){oe.debug("stopReceiving() [localId:%s]",s);const{mid:r,rtpParameters:c}=this._mapRecvLocalIdInfo.get(s)??{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const a=await this._pc.createAnswer();oe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async pauseReceiving(i){}async resumeReceiving(i){}async getReceiverStats(i){throw new gr.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){this.assertRecvDirection();const{streamId:s,ordered:r,maxPacketLifeTime:c,maxRetransmits:o}=i,l={negotiated:!0,id:s,ordered:r,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:o,protocol:a};oe.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(n,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const d={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const f=await this._pc.createAnswer();if(!this._transportReady){const p=gi.parse(f.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:i,localSdpObject:n}){n||(n=gi.parse(this._pc.localDescription.sdp));const a=so.extractDtlsParameters({sdpObject:n});a.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:a},s,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Il.ReactNative=Pp;Object.defineProperty(ya,"__esModule",{value:!0});ya.Device=void 0;ya.detectDeviceAsync=TS;ya.detectDevice=ES;const RS=q1,qE=Oe,$E=si,$n=qe,Ug=Pe,un=_e,GE=mc,VE=xl,YE=Ml,QE=Ll,XE=Ol,KE=kl,FE=Al,ZE=Pl,JE=Nl,WE=jl,eD=Ul,tD=Bl,iD=Il,$e=new qE.Logger("Device");async function TS(e){$e.debug("detectDeviceAsync() [userAgent:%s]",e),!e&&typeof navigator=="object"&&(e=navigator.userAgent);const t=await(0,RS.UAParser)(e).withFeatureCheck();return DS(t)}function ES(e){$e.debug("detectDevice() [userAgent:%s]",e),!e&&typeof navigator=="object"&&(e=navigator.userAgent);const t=(0,RS.UAParser)(e);return DS(t)}class Np{constructor({handlerName:t,handlerFactory:i}={}){_(this,"_handlerFactory");_(this,"_handlerName");_(this,"_loaded",!1);_(this,"_extendedRtpCapabilities");_(this,"_recvRtpCapabilities");_(this,"_canProduceByKind");_(this,"_sctpCapabilities");_(this,"_observer",new $E.EnhancedEventEmitter);if($e.debug("constructor()"),t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)$e.debug("constructor() | handler given: %s",t);else if(t=ES(),t)$e.debug("constructor() | detected handler: %s",t);else throw new $n.UnsupportedError("device not supported");switch(t){case"Chrome111":{this._handlerFactory=VE.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=YE.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=QE.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=XE.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=KE.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=FE.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=ZE.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=JE.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=WE.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=eD.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=tD.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=iD.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${t}"`)}}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}static async factory({handlerName:t,handlerFactory:i}={}){if($e.debug("factory()"),t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(!t&&!i&&(t=await TS(),!t))throw new $n.UnsupportedError("device not supported");return new Np({handlerName:t,handlerFactory:i})}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new $n.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new $n.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:t,preferLocalCodecsOrder:i=!1}){$e.debug("load() [routerRtpCapabilities:%o]",t);let n;try{if(this._loaded)throw new $n.InvalidStateError("already loaded");const a=Ug.clone(t);un.validateRtpCapabilities(a),n=this._handlerFactory();const s=await n.getNativeRtpCapabilities();$e.debug("load() | got native RTP capabilities:%o",s);const r=Ug.clone(s);un.validateRtpCapabilities(r),this._extendedRtpCapabilities=un.getExtendedRtpCapabilities(r,a,i),$e.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=un.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=un.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=un.getRecvRtpCapabilities(this._extendedRtpCapabilities),un.validateRtpCapabilities(this._recvRtpCapabilities),$e.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await n.getNativeSctpCapabilities(),$e.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),un.validateSctpCapabilities(this._sctpCapabilities),$e.debug("load() succeeded"),this._loaded=!0,n.close()}catch(a){throw n&&n.close(),a}}canProduce(t){if(this._loaded){if(t!=="audio"&&t!=="video")throw new TypeError(`invalid kind "${t}"`)}else throw new $n.InvalidStateError("not loaded");return this._canProduceByKind[t]}createSendTransport({id:t,iceParameters:i,iceCandidates:n,dtlsParameters:a,sctpParameters:s,iceServers:r,iceTransportPolicy:c,additionalSettings:o,proprietaryConstraints:l,appData:u}){return $e.debug("createSendTransport()"),this.createTransport({direction:"send",id:t,iceParameters:i,iceCandidates:n,dtlsParameters:a,sctpParameters:s,iceServers:r,iceTransportPolicy:c,additionalSettings:o,proprietaryConstraints:l,appData:u})}createRecvTransport({id:t,iceParameters:i,iceCandidates:n,dtlsParameters:a,sctpParameters:s,iceServers:r,iceTransportPolicy:c,additionalSettings:o,proprietaryConstraints:l,appData:u}){return $e.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:t,iceParameters:i,iceCandidates:n,dtlsParameters:a,sctpParameters:s,iceServers:r,iceTransportPolicy:c,additionalSettings:o,proprietaryConstraints:l,appData:u})}createTransport({direction:t,id:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,appData:d}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof n!="object")throw new TypeError("missing iceParameters");if(Array.isArray(a)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(r&&typeof r!="object")throw new TypeError("wrong sctpParameters");if(d&&typeof d!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new $n.InvalidStateError("not loaded");const f=new GE.Transport({direction:t,id:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,appData:d,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",f),f}}ya.Device=Np;function DS(e){var t,i,n,a;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if($e.debug("detectDeviceImpl() | React-Native detected"),typeof RTCPeerConnection>"u"){$e.warn("detectDeviceImpl() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?($e.debug("detectDeviceImpl() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):($e.debug("detectDeviceImpl() | ReactNative PlanB handler chosen"),"ReactNative")}else{$e.debug("detectDeviceImpl() | browser detected [userAgent:%s, parsed:%o]",e.ua,e);const s=e.browser,r=(t=s.name)==null?void 0:t.toLowerCase(),c=parseInt(s.major??"0"),l=(i=e.engine.name)==null?void 0:i.toLowerCase(),u=e.os,d=(n=u.name)==null?void 0:n.toLowerCase(),f=parseFloat(u.version??"0"),y=(a=e.device.model)==null?void 0:a.toLowerCase(),b=d==="ios"||y==="ipad",w=r&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(r),m=r&&["firefox","mobile firefox","mobile focus"].includes(r),v=r&&["safari","mobile safari"].includes(r),h=r&&["edge"].includes(r);if((w||h)&&!b&&c>=111)return"Chrome111";if(w&&!b&&c>=74||h&&!b&&c>=88)return"Chrome74";if(w&&!b&&c>=70)return"Chrome70";if(w&&!b&&c>=67)return"Chrome67";if(w&&!b&&c>=55)return"Chrome55";if(m&&!b&&c>=120)return"Firefox120";if(m&&!b&&c>=60)return"Firefox60";if(m&&b&&f>=14.3)return"Safari12";if(v&&c>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(v&&c>=11)return"Safari11";if(h&&!b&&c>=11&&c<=18)return"Edge11";if(l==="webkit"&&b&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(l==="blink"){const g=e.ua.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(g){const S=Number(g[1]);return S>=111?"Chrome111":S>=74?"Chrome74":S>=70?"Chrome70":S>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{$e.warn("detectDeviceImpl() | browser not supported [name:%s, version:%s]",r,c);return}}}var CS={};Object.defineProperty(CS,"__esModule",{value:!0});var xS={};Object.defineProperty(xS,"__esModule",{value:!0});(function(e){var t=Qn&&Qn.__createBinding||(Object.create?function(n,a,s,r){r===void 0&&(r=s);var c=Object.getOwnPropertyDescriptor(a,s);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,r,c)}:function(n,a,s,r){r===void 0&&(r=s),n[r]=a[s]}),i=Qn&&Qn.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&t(a,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(ya,e),i(mc,e),i(gc,e),i(_c,e),i(vc,e),i(yc,e),i(CS,e),i(xS,e),i(ct,e),i(qe,e)})(sS);var Hl={},ql={},MS={},jp={};Object.defineProperty(jp,"__esModule",{value:!0});jp.default="ffffffff-ffff-ffff-ffff-ffffffffffff";var Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.default="00000000-0000-0000-0000-000000000000";var Ys={},Qs={},zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;Object.defineProperty(Qs,"__esModule",{value:!0});const nD=zp;function aD(e){return typeof e=="string"&&nD.default.test(e)}Qs.default=aD;Object.defineProperty(Ys,"__esModule",{value:!0});const sD=Qs;function rD(e){if(!(0,sD.default)(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,t&255,(t=parseInt(e.slice(9,13),16))>>>8,t&255,(t=parseInt(e.slice(14,18),16))>>>8,t&255,(t=parseInt(e.slice(19,23),16))>>>8,t&255,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255)}Ys.default=rD;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.unsafeStringify=void 0;const cD=Qs,it=[];for(let e=0;e<256;++e)it.push((e+256).toString(16).slice(1));function LS(e,t=0){return(it[e[t+0]]+it[e[t+1]]+it[e[t+2]]+it[e[t+3]]+"-"+it[e[t+4]]+it[e[t+5]]+"-"+it[e[t+6]]+it[e[t+7]]+"-"+it[e[t+8]]+it[e[t+9]]+"-"+it[e[t+10]]+it[e[t+11]]+it[e[t+12]]+it[e[t+13]]+it[e[t+14]]+it[e[t+15]]).toLowerCase()}Zt.unsafeStringify=LS;function oD(e,t=0){const i=LS(e,t);if(!(0,cD.default)(i))throw TypeError("Stringified UUID is invalid");return i}Zt.default=oD;var Xs={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});let tu;const lD=new Uint8Array(16);function dD(){if(!tu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");tu=crypto.getRandomValues.bind(crypto)}return tu(lD)}Sc.default=dD;Object.defineProperty(Xs,"__esModule",{value:!0});Xs.updateV1State=void 0;const zg=Sc,uD=Zt,_r={};function fD(e,t,i){var s;let n;const a=(e==null?void 0:e._v6)??!1;if(e){const r=Object.keys(e);r.length===1&&r[0]==="_v6"&&(e=void 0)}if(e)n=Bg(e.random??((s=e.rng)==null?void 0:s.call(e))??(0,zg.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,i);else{const r=Date.now(),c=(0,zg.default)();OS(_r,r,c),n=Bg(c,_r.msecs,_r.nsecs,a?void 0:_r.clockseq,a?void 0:_r.node,t,i)}return t??(0,uD.unsafeStringify)(n)}function OS(e,t,i){return e.msecs??(e.msecs=-1/0),e.nsecs??(e.nsecs=0),t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=i.slice(10,16),e.node[0]|=1,e.clockseq=(i[8]<<8|i[9])&16383),e.msecs=t,e}Xs.updateV1State=OS;function Bg(e,t,i,n,a,s,r=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),r=0;else if(r<0||r+16>s.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);t??(t=Date.now()),i??(i=0),n??(n=(e[8]<<8|e[9])&16383),a??(a=e.slice(10,16)),t+=122192928e5;const c=((t&268435455)*1e4+i)%4294967296;s[r++]=c>>>24&255,s[r++]=c>>>16&255,s[r++]=c>>>8&255,s[r++]=c&255;const o=t/4294967296*1e4&268435455;s[r++]=o>>>8&255,s[r++]=o&255,s[r++]=o>>>24&15|16,s[r++]=o>>>16&255,s[r++]=n>>>8|128,s[r++]=n&255;for(let l=0;l<6;++l)s[r++]=a[l];return s}Xs.default=fD;var $l={};Object.defineProperty($l,"__esModule",{value:!0});const pD=Ys,hD=Zt;function mD(e){const t=typeof e=="string"?(0,pD.default)(e):e,i=gD(t);return typeof e=="string"?(0,hD.unsafeStringify)(i):i}$l.default=mD;function gD(e){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}var kS={},Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});function _D(e){const t=SD(e),i=yD(t,e.length*8);return vD(i)}function vD(e){const t=new Uint8Array(e.length*4);for(let i=0;i<e.length*4;i++)t[i]=e[i>>2]>>>i%4*8&255;return t}function AS(e){return(e+64>>>9<<4)+14+1}function yD(e,t){const i=new Uint32Array(AS(t)).fill(0);i.set(e),i[t>>5]|=128<<t%32,i[i.length-1]=t,e=i;let n=1732584193,a=-271733879,s=-1732584194,r=271733878;for(let c=0;c<e.length;c+=16){const o=n,l=a,u=s,d=r;n=lt(n,a,s,r,e[c],7,-680876936),r=lt(r,n,a,s,e[c+1],12,-389564586),s=lt(s,r,n,a,e[c+2],17,606105819),a=lt(a,s,r,n,e[c+3],22,-1044525330),n=lt(n,a,s,r,e[c+4],7,-176418897),r=lt(r,n,a,s,e[c+5],12,1200080426),s=lt(s,r,n,a,e[c+6],17,-1473231341),a=lt(a,s,r,n,e[c+7],22,-45705983),n=lt(n,a,s,r,e[c+8],7,1770035416),r=lt(r,n,a,s,e[c+9],12,-1958414417),s=lt(s,r,n,a,e[c+10],17,-42063),a=lt(a,s,r,n,e[c+11],22,-1990404162),n=lt(n,a,s,r,e[c+12],7,1804603682),r=lt(r,n,a,s,e[c+13],12,-40341101),s=lt(s,r,n,a,e[c+14],17,-1502002290),a=lt(a,s,r,n,e[c+15],22,1236535329),n=dt(n,a,s,r,e[c+1],5,-165796510),r=dt(r,n,a,s,e[c+6],9,-1069501632),s=dt(s,r,n,a,e[c+11],14,643717713),a=dt(a,s,r,n,e[c],20,-373897302),n=dt(n,a,s,r,e[c+5],5,-701558691),r=dt(r,n,a,s,e[c+10],9,38016083),s=dt(s,r,n,a,e[c+15],14,-660478335),a=dt(a,s,r,n,e[c+4],20,-405537848),n=dt(n,a,s,r,e[c+9],5,568446438),r=dt(r,n,a,s,e[c+14],9,-1019803690),s=dt(s,r,n,a,e[c+3],14,-187363961),a=dt(a,s,r,n,e[c+8],20,1163531501),n=dt(n,a,s,r,e[c+13],5,-1444681467),r=dt(r,n,a,s,e[c+2],9,-51403784),s=dt(s,r,n,a,e[c+7],14,1735328473),a=dt(a,s,r,n,e[c+12],20,-1926607734),n=ut(n,a,s,r,e[c+5],4,-378558),r=ut(r,n,a,s,e[c+8],11,-2022574463),s=ut(s,r,n,a,e[c+11],16,1839030562),a=ut(a,s,r,n,e[c+14],23,-35309556),n=ut(n,a,s,r,e[c+1],4,-1530992060),r=ut(r,n,a,s,e[c+4],11,1272893353),s=ut(s,r,n,a,e[c+7],16,-155497632),a=ut(a,s,r,n,e[c+10],23,-1094730640),n=ut(n,a,s,r,e[c+13],4,681279174),r=ut(r,n,a,s,e[c],11,-358537222),s=ut(s,r,n,a,e[c+3],16,-722521979),a=ut(a,s,r,n,e[c+6],23,76029189),n=ut(n,a,s,r,e[c+9],4,-640364487),r=ut(r,n,a,s,e[c+12],11,-421815835),s=ut(s,r,n,a,e[c+15],16,530742520),a=ut(a,s,r,n,e[c+2],23,-995338651),n=ft(n,a,s,r,e[c],6,-198630844),r=ft(r,n,a,s,e[c+7],10,1126891415),s=ft(s,r,n,a,e[c+14],15,-1416354905),a=ft(a,s,r,n,e[c+5],21,-57434055),n=ft(n,a,s,r,e[c+12],6,1700485571),r=ft(r,n,a,s,e[c+3],10,-1894986606),s=ft(s,r,n,a,e[c+10],15,-1051523),a=ft(a,s,r,n,e[c+1],21,-2054922799),n=ft(n,a,s,r,e[c+8],6,1873313359),r=ft(r,n,a,s,e[c+15],10,-30611744),s=ft(s,r,n,a,e[c+6],15,-1560198380),a=ft(a,s,r,n,e[c+13],21,1309151649),n=ft(n,a,s,r,e[c+4],6,-145523070),r=ft(r,n,a,s,e[c+11],10,-1120210379),s=ft(s,r,n,a,e[c+2],15,718787259),a=ft(a,s,r,n,e[c+9],21,-343485551),n=Tn(n,o),a=Tn(a,l),s=Tn(s,u),r=Tn(r,d)}return Uint32Array.of(n,a,s,r)}function SD(e){if(e.length===0)return new Uint32Array;const t=new Uint32Array(AS(e.length*8)).fill(0);for(let i=0;i<e.length;i++)t[i>>2]|=(e[i]&255)<<i%4*8;return t}function Tn(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function bD(e,t){return e<<t|e>>>32-t}function Gl(e,t,i,n,a,s){return Tn(bD(Tn(Tn(t,e),Tn(n,s)),a),i)}function lt(e,t,i,n,a,s,r){return Gl(t&i|~t&n,e,t,a,s,r)}function dt(e,t,i,n,a,s,r){return Gl(t&n|i&~n,e,t,a,s,r)}function ut(e,t,i,n,a,s,r){return Gl(t^i^n,e,t,a,s,r)}function ft(e,t,i,n,a,s,r){return Gl(i^(t|~n),e,t,a,s,r)}Bp.default=_D;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.URL=Xt.DNS=Xt.stringToBytes=void 0;const Ig=Ys,wD=Zt;function PS(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t}Xt.stringToBytes=PS;Xt.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Xt.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function RD(e,t,i,n,a,s){const r=typeof i=="string"?PS(i):i,c=typeof n=="string"?(0,Ig.default)(n):n;if(typeof n=="string"&&(n=(0,Ig.default)(n)),(n==null?void 0:n.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+r.length);if(o.set(c),o.set(r,c.length),o=t(o),o[6]=o[6]&15|e,o[8]=o[8]&63|128,a){s=s||0;for(let l=0;l<16;++l)a[s+l]=o[l];return a}return(0,wD.unsafeStringify)(o)}Xt.default=RD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=Bp,i=Xt;var n=Xt;Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}});function a(s,r,c,o){return(0,i.default)(48,t.default,s,r,c,o)}a.DNS=i.DNS,a.URL=i.URL,e.default=a})(kS);var Ip={},Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});const TD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);Hp.default={randomUUID:TD};Object.defineProperty(Ip,"__esModule",{value:!0});const Hg=Hp,ED=Sc,DD=Zt;function CD(e,t,i){var a;if(Hg.default.randomUUID&&!t&&!e)return Hg.default.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??(0,ED.default)();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(i=i||0,i<0||i+16>t.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let s=0;s<16;++s)t[i+s]=n[s];return t}return(0,DD.unsafeStringify)(n)}Ip.default=CD;var NS={},qp={};Object.defineProperty(qp,"__esModule",{value:!0});function xD(e,t,i,n){switch(e){case 0:return t&i^~t&n;case 1:return t^i^n;case 2:return t&i^t&n^i&n;case 3:return t^i^n}}function iu(e,t){return e<<t|e>>>32-t}function MD(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520],n=new Uint8Array(e.length+1);n.set(e),n[e.length]=128,e=n;const a=e.length/4+2,s=Math.ceil(a/16),r=new Array(s);for(let c=0;c<s;++c){const o=new Uint32Array(16);for(let l=0;l<16;++l)o[l]=e[c*64+l*4]<<24|e[c*64+l*4+1]<<16|e[c*64+l*4+2]<<8|e[c*64+l*4+3];r[c]=o}r[s-1][14]=(e.length-1)*8/Math.pow(2,32),r[s-1][14]=Math.floor(r[s-1][14]),r[s-1][15]=(e.length-1)*8&4294967295;for(let c=0;c<s;++c){const o=new Uint32Array(80);for(let y=0;y<16;++y)o[y]=r[c][y];for(let y=16;y<80;++y)o[y]=iu(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);let l=i[0],u=i[1],d=i[2],f=i[3],p=i[4];for(let y=0;y<80;++y){const b=Math.floor(y/20),w=iu(l,5)+xD(b,u,d,f)+p+t[b]+o[y]>>>0;p=f,f=d,d=iu(u,30)>>>0,u=l,l=w}i[0]=i[0]+l>>>0,i[1]=i[1]+u>>>0,i[2]=i[2]+d>>>0,i[3]=i[3]+f>>>0,i[4]=i[4]+p>>>0}return Uint8Array.of(i[0]>>24,i[0]>>16,i[0]>>8,i[0],i[1]>>24,i[1]>>16,i[1]>>8,i[1],i[2]>>24,i[2]>>16,i[2]>>8,i[2],i[3]>>24,i[3]>>16,i[3]>>8,i[3],i[4]>>24,i[4]>>16,i[4]>>8,i[4])}qp.default=MD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=qp,i=Xt;var n=Xt;Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}});function a(s,r,c,o){return(0,i.default)(80,t.default,s,r,c,o)}a.DNS=i.DNS,a.URL=i.URL,e.default=a})(NS);var $p={};Object.defineProperty($p,"__esModule",{value:!0});const LD=Zt,OD=Xs,kD=$l;function AD(e,t,i){e??(e={}),i??(i=0);let n=(0,OD.default)({...e,_v6:!0},new Uint8Array(16));if(n=(0,kD.default)(n),t){for(let a=0;a<16;a++)t[i+a]=n[a];return t}return(0,LD.unsafeStringify)(n)}$p.default=AD;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});const PD=Ys,ND=Zt;function jD(e){const t=typeof e=="string"?(0,PD.default)(e):e,i=UD(t);return typeof e=="string"?(0,ND.unsafeStringify)(i):i}Gp.default=jD;function UD(e){return Uint8Array.of((e[3]&15)<<4|e[4]>>4&15,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|e[6]&15,e[7],(e[1]&15)<<4|(e[2]&240)>>4,(e[2]&15)<<4|(e[3]&240)>>4,16|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.updateV7State=void 0;const qg=Sc,zD=Zt,nu={};function BD(e,t,i){var a;let n;if(e)n=$g(e.random??((a=e.rng)==null?void 0:a.call(e))??(0,qg.default)(),e.msecs,e.seq,t,i);else{const s=Date.now(),r=(0,qg.default)();jS(nu,s,r),n=$g(r,nu.msecs,nu.seq,t,i)}return t??(0,zD.unsafeStringify)(n)}function jS(e,t,i){return e.msecs??(e.msecs=-1/0),e.seq??(e.seq=0),t>e.msecs?(e.seq=i[6]<<23|i[7]<<16|i[8]<<8|i[9],e.msecs=t):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}bc.updateV7State=jS;function $g(e,t,i,n,a=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),a=0;else if(a<0||a+16>n.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);return t??(t=Date.now()),i??(i=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9]),n[a++]=t/1099511627776&255,n[a++]=t/4294967296&255,n[a++]=t/16777216&255,n[a++]=t/65536&255,n[a++]=t/256&255,n[a++]=t&255,n[a++]=112|i>>>28&15,n[a++]=i>>>20&255,n[a++]=128|i>>>14&63,n[a++]=i>>>6&255,n[a++]=i<<2&255|e[10]&3,n[a++]=e[11],n[a++]=e[12],n[a++]=e[13],n[a++]=e[14],n[a++]=e[15],n}bc.default=BD;var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});const ID=Qs;function HD(e){if(!(0,ID.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}Vp.default=HD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.validate=e.v7=e.v6ToV1=e.v6=e.v5=e.v4=e.v3=e.v1ToV6=e.v1=e.stringify=e.parse=e.NIL=e.MAX=void 0;var t=jp;Object.defineProperty(e,"MAX",{enumerable:!0,get:function(){return t.default}});var i=Up;Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return i.default}});var n=Ys;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.default}});var a=Zt;Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.default}});var s=Xs;Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return s.default}});var r=$l;Object.defineProperty(e,"v1ToV6",{enumerable:!0,get:function(){return r.default}});var c=kS;Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return c.default}});var o=Ip;Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return o.default}});var l=NS;Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return l.default}});var u=$p;Object.defineProperty(e,"v6",{enumerable:!0,get:function(){return u.default}});var d=Gp;Object.defineProperty(e,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=bc;Object.defineProperty(e,"v7",{enumerable:!0,get:function(){return f.default}});var p=Qs;Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return p.default}});var y=Vp;Object.defineProperty(e,"version",{enumerable:!0,get:function(){return y.default}})})(MS);var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.FakeEventTarget=void 0;class qD{constructor(){_(this,"listeners",{})}addEventListener(t,i,n={}){var a;i&&((a=this.listeners)[t]??(a[t]=[]),this.listeners[t].push({callback:i,once:n.once===!0}))}removeEventListener(t,i){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(n=>n.callback!==i))}dispatchEvent(t){if(!t||typeof t.type!="string")throw new Error("invalid event object");const i=this.listeners[t.type];if(!i)return!0;for(const n of[...i]){try{n.callback.call(this,t)}catch(a){setTimeout(()=>{throw a},0)}n.once&&this.removeEventListener(t.type,n.callback)}return!t.defaultPrevented}}Vl.FakeEventTarget=qD;var Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.clone=$D;function $D(e){if(e!==void 0)return Number.isNaN(e)?NaN:typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}Object.defineProperty(ql,"__esModule",{value:!0});ql.FakeMediaStreamTrack=void 0;const Gg=MS,GD=Vl,ro=Yp;var Jr,ws,Rs,_i,yn,vi,Xn,Ts,Kn,Es,Fn,Zn,Jn,Wn,ea,ta;const Xp=class Xp extends GD.FakeEventTarget{constructor({kind:i,id:n,label:a,contentHint:s,enabled:r,muted:c,readyState:o,capabilities:l,constraints:u,settings:d,data:f}){super();tt(this,Jr,void 0);tt(this,ws,void 0);tt(this,Rs,void 0);tt(this,_i,void 0);tt(this,yn,void 0);tt(this,vi,void 0);tt(this,Xn,void 0);tt(this,Ts,void 0);tt(this,Kn,void 0);tt(this,Es,void 0);tt(this,Fn,void 0);tt(this,Zn,null);tt(this,Jn,null);tt(this,Wn,null);tt(this,ea,null);tt(this,ta,null);Ee(this,Jr,n??(0,Gg.v4)()),Ee(this,ws,i),Ee(this,Rs,a??""),Ee(this,Xn,s??""),Ee(this,yn,r??!0),Ee(this,vi,c??!1),Ee(this,_i,o??"live"),Ee(this,Ts,l??{}),Ee(this,Kn,u??{}),Ee(this,Es,d??{}),Ee(this,Fn,f??{})}get id(){return K(this,Jr)}get kind(){return K(this,ws)}get label(){return K(this,Rs)}get contentHint(){return K(this,Xn)}set contentHint(i){Ee(this,Xn,i)}get enabled(){return K(this,yn)}set enabled(i){const n=K(this,yn)!==i;Ee(this,yn,i),n&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return K(this,vi)}get readyState(){return K(this,_i)}get data(){return K(this,Fn)}set data(i){Ee(this,Fn,i)}get onmute(){return K(this,Zn)}set onmute(i){K(this,Zn)&&this.removeEventListener("mute",K(this,Zn)),Ee(this,Zn,i),i&&this.addEventListener("mute",i)}get onunmute(){return K(this,Jn)}set onunmute(i){K(this,Jn)&&this.removeEventListener("unmute",K(this,Jn)),Ee(this,Jn,i),i&&this.addEventListener("unmute",i)}get onended(){return K(this,Wn)}set onended(i){K(this,Wn)&&this.removeEventListener("ended",K(this,Wn)),Ee(this,Wn,i),i&&this.addEventListener("ended",i)}get onenabledchange(){return K(this,ea)}set onenabledchange(i){K(this,ea)&&this.removeEventListener("enabledchange",K(this,ea)),Ee(this,ea,i),i&&this.addEventListener("enabledchange",i)}get onstopped(){return K(this,ta)}set onstopped(i){K(this,ta)&&this.removeEventListener("stopped",K(this,ta)),Ee(this,ta,i),i&&this.addEventListener("stopped",i)}addEventListener(i,n,a){super.addEventListener(i,n,a)}removeEventListener(i,n){super.removeEventListener(i,n)}stop(){K(this,_i)!=="ended"&&(Ee(this,_i,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:i,data:n}={}){return new Xp({id:i??(0,Gg.v4)(),kind:K(this,ws),label:K(this,Rs),contentHint:K(this,Xn),enabled:K(this,yn),muted:K(this,vi),readyState:K(this,_i),capabilities:(0,ro.clone)(K(this,Ts)),constraints:(0,ro.clone)(K(this,Kn)),settings:(0,ro.clone)(K(this,Es)),data:n??(0,ro.clone)(K(this,Fn))})}getCapabilities(){return K(this,Ts)}getConstraints(){return K(this,Kn)}async applyConstraints(i={}){return Ee(this,Kn,i),Promise.resolve()}getSettings(){return K(this,Es)}remoteStop(){K(this,_i)!=="ended"&&(Ee(this,_i,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){K(this,vi)||(Ee(this,vi,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){K(this,vi)&&(Ee(this,vi,!1),this.dispatchEvent(new Event("unmute")))}};Jr=new WeakMap,ws=new WeakMap,Rs=new WeakMap,_i=new WeakMap,yn=new WeakMap,vi=new WeakMap,Xn=new WeakMap,Ts=new WeakMap,Kn=new WeakMap,Es=new WeakMap,Fn=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Wn=new WeakMap,ea=new WeakMap,ta=new WeakMap;let df=Xp;ql.FakeMediaStreamTrack=df;Object.defineProperty(Hl,"__esModule",{value:!0});Hl.FakeHandler=void 0;const VD=ql,YD=si,QD=Oe,Xa=Pe,Vg=_e,XD=qe,KD=ct,pt=new QD.Logger("FakeHandler"),FD="FakeHandler";class Yg extends YD.EnhancedEventEmitter{constructor({id:i,ordered:n,maxPacketLifeTime:a,maxRetransmits:s,label:r,protocol:c}){super();_(this,"id");_(this,"ordered");_(this,"maxPacketLifeTime");_(this,"maxRetransmits");_(this,"label");_(this,"protocol");this.id=i,this.ordered=n,this.maxPacketLifeTime=a,this.maxRetransmits=s,this.label=r,this.protocol=c}close(){this.safeEmit("close"),this.emit("@close")}send(i){this.safeEmit("message",i)}addEventListener(i,n){this.on(i,n)}}class Qp extends KD.HandlerInterface{constructor(i){super();_(this,"_closed",!1);_(this,"fakeParameters");_(this,"_rtpParametersByKind");_(this,"_cname",`CNAME-${Xa.generateRandomNumber()}`);_(this,"_transportReady",!1);_(this,"_nextLocalId",1);_(this,"_tracks",new Map);_(this,"_nextSctpStreamId",0);this.fakeParameters=i}static createFactory(i){return()=>new Qp(i)}get name(){return FD}close(){pt.debug("close()"),!this._closed&&(this._closed=!0)}setIceGatheringState(i){this.emit("@icegatheringstatechange",i)}setConnectionState(i){this.emit("@connectionstatechange",i)}async getNativeRtpCapabilities(){return pt.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return pt.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:i,iceParameters:n,iceCandidates:a,dtlsParameters:s,sctpParameters:r,iceServers:c,iceTransportPolicy:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),pt.debug("run()"),this._rtpParametersByKind={audio:Vg.getSendingRtpParameters("audio",u),video:Vg.getSendingRtpParameters("video",u)}}async updateIceServers(i){this.assertNotClosed(),pt.debug("updateIceServers()")}async restartIce(i){this.assertNotClosed(),pt.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:i,encodings:n,codecOptions:a,codec:s}){this.assertNotClosed(),pt.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const r=Xa.clone(this._rtpParametersByKind[i.kind]),c=r.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));r.mid=`mid-${Xa.generateRandomNumber()}`,n||(n=[{}]);for(const l of n)l.ssrc=Xa.generateRandomNumber(),c&&(l.rtx={ssrc:Xa.generateRandomNumber()});r.encodings=n,r.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const o=this._nextLocalId++;return this._tracks.set(o,i),{localId:String(o),rtpParameters:r}}async stopSending(i){if(pt.debug("stopSending() [localId:%s]",i),!this._closed){if(!this._tracks.has(Number(i)))throw new Error("local track not found");this._tracks.delete(Number(i))}}async pauseSending(i){this.assertNotClosed()}async resumeSending(i){this.assertNotClosed()}async replaceTrack(i,n){this.assertNotClosed(),n?pt.debug("replaceTrack() [localId:%s, track.id:%s]",i,n.id):pt.debug("replaceTrack() [localId:%s, no track]",i),this._tracks.delete(Number(i)),this._tracks.set(Number(i),n)}async setMaxSpatialLayer(i,n){this.assertNotClosed(),pt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,n)}async setRtpEncodingParameters(i,n){this.assertNotClosed(),pt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,n)}async getSenderStats(i){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}){this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),pt.debug("sendDataChannel()");const c=new Yg({id:this._nextSctpStreamId++,ordered:i,maxPacketLifeTime:n,maxRetransmits:a,label:s,protocol:r}),o={streamId:this._nextSctpStreamId,ordered:i,maxPacketLifeTime:n,maxRetransmits:a};return{dataChannel:c,sctpStreamParameters:o}}async receive(i){this.assertNotClosed();const n=[];for(const a of i){const{trackId:s,kind:r}=a;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),pt.debug("receive() [trackId:%s, kind:%s]",s,r);const c=this._nextLocalId++,o=new VD.FakeMediaStreamTrack({kind:r});this._tracks.set(c,o),n.push({localId:String(c),track:o})}return n}async stopReceiving(i){if(!this._closed)for(const n of i)pt.debug("stopReceiving() [localId:%s]",n),this._tracks.delete(Number(n))}async pauseReceiving(i){this.assertNotClosed()}async resumeReceiving(i){this.assertNotClosed()}async getReceiverStats(i){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:i,label:n,protocol:a}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),pt.debug("receiveDataChannel()"),{dataChannel:new Yg({id:i.streamId,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits,label:n,protocol:a})}}async setupTransport({localDtlsRole:i,localSdpObject:n}){const a=Xa.clone(this.fakeParameters.generateLocalDtlsParameters());i&&(a.role=i),this.emit("@connectionstatechange","connecting"),await new Promise((s,r)=>this.emit("@connect",{dtlsParameters:a},s,r)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new XD.InvalidStateError("method called in a closed handler")}}Hl.FakeHandler=Qp;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.generateRouterRtpCapabilities=ZD;ri.generateNativeRtpCapabilities=JD;ri.generateNativeSctpCapabilities=WD;ri.generateLocalDtlsParameters=eC;ri.generateTransportRemoteParameters=tC;ri.generateProducerRemoteParameters=iC;ri.generateConsumerRemoteParameters=nC;ri.generateDataProducerRemoteParameters=aC;ri.generateDataConsumerRemoteParameters=sC;const gt=Pe;function Ot(){return String(gt.generateRandomNumber())}function ZD(){return gt.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}},{mimeType:"video/H264",kind:"video",preferredPayloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:105,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"profile-id":0,"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:106,clockRate:9e4,rtcpFeedback:[],parameters:{apt:105}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:11,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"}]})}function JD(){return gt.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:111,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{minptime:10,useinbandfec:1}},{mimeType:"audio/ISAC",kind:"audio",preferredPayloadType:103,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"audio/CN",kind:"audio",preferredPayloadType:106,clockRate:32e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:96,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{baz:"1234abcd"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:97,clockRate:9e4,rtcpFeedback:[],parameters:{apt:96}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:98,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{"profile-id":0}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:99,clockRate:9e4,rtcpFeedback:[],parameters:{apt:98}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:2},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:3},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:4},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",preferredId:6},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type",preferredId:7},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing",preferredId:8},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10}]})}function WD(){return gt.deepFreeze({numStreams:{OS:2048,MIS:2048}})}function eC(){return gt.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"82:5A:68:3D:36:C3:0A:DE:AF:E7:32:43:D2:88:83:57:AC:2D:65:E5:80:C4:B6:FB:AF:1A:A0:21:9F:6D:0C:AD"}],role:"auto"})}function tC(){return{id:Ot(),iceParameters:gt.deepFreeze({iceLite:!0,password:"yku5ej8nvfaor28lvtrabcx0wkrpkztz",usernameFragment:"h3hk1iz6qqlnqlne"}),iceCandidates:gt.deepFreeze([{foundation:"udpcandidate",address:"9.9.9.9",ip:"9.9.9.9",port:40533,priority:1078862079,protocol:"udp",type:"host",tcpType:"passive"},{foundation:"udpcandidate",address:"9.9.9.9",ip:"9:9:9:9:9:9",port:41333,priority:1078862089,protocol:"udp",type:"host",tcpType:"passive"}]),dtlsParameters:gt.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"A9:F4:E0:D2:74:D3:0F:D9:CA:A5:2F:9F:7F:47:FA:F0:C4:72:DD:73:49:D0:3B:14:90:20:51:30:1B:90:8E:71"},{algorithm:"sha-384",value:"03:D9:0B:87:13:98:F6:6D:BC:FC:92:2E:39:D4:E1:97:32:61:30:56:84:70:81:6E:D1:82:97:EA:D9:C1:21:0F:6B:C5:E7:7F:E1:97:0C:17:97:6E:CF:B3:EF:2E:74:B0"},{algorithm:"sha-512",value:"84:27:A4:28:A4:73:AF:43:02:2A:44:68:FF:2F:29:5C:3B:11:9A:60:F4:A8:F0:F5:AC:A0:E3:49:3E:B1:34:53:A9:85:CE:51:9B:ED:87:5E:B8:F4:8E:3D:FA:20:51:B8:96:EE:DA:56:DC:2F:5C:62:79:15:23:E0:21:82:2B:2C"}],role:"auto"}),sctpParameters:gt.deepFreeze({port:5e3,OS:2048,MIS:2048,maxMessageSize:2e6})}}function iC(){return gt.deepFreeze({id:Ot()})}function nC({id:e,codecMimeType:t}={}){switch(t){case"audio/opus":return{id:e??Ot(),producerId:Ot(),kind:"audio",rtpParameters:gt.deepFreeze({codecs:[{mimeType:"audio/opus",payloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}}],encodings:[{ssrc:46687003}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",id:10}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"audio/ISAC":return{id:e??Ot(),producerId:Ot(),kind:"audio",rtpParameters:gt.deepFreeze({codecs:[{mimeType:"audio/ISAC",payloadType:111,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}}],encodings:[{ssrc:46687004}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/VP8":return{id:e??Ot(),producerId:Ot(),kind:"video",rtpParameters:gt.deepFreeze({codecs:[{mimeType:"video/VP8",payloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",payloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}}],encodings:[{ssrc:99991111,rtx:{ssrc:99991112}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/H264":return{id:e??Ot(),producerId:Ot(),kind:"video",rtpParameters:gt.deepFreeze({codecs:[{mimeType:"video/H264",payloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",payloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}}],encodings:[{ssrc:99991113,rtx:{ssrc:99991114}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};default:throw new TypeError(`unknown codecMimeType '${t}'`)}}function aC(){return gt.deepFreeze({id:Ot()})}function sC({id:e}={}){return{id:e??Ot(),dataProducerId:Ot(),sctpStreamParameters:gt.deepFreeze({streamId:666,maxPacketLifeTime:5e3,maxRetransmits:void 0})}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.debug=e.testFakeParameters=e.FakeHandler=e.ortc=e.parseScalabilityMode=e.detectDeviceAsync=e.detectDevice=e.Device=e.version=e.types=void 0;const t=wl;e.debug=t.default,e.types=sS,e.version="3.11.0";var i=ya;Object.defineProperty(e,"Device",{enumerable:!0,get:function(){return i.Device}}),Object.defineProperty(e,"detectDevice",{enumerable:!0,get:function(){return i.detectDevice}}),Object.defineProperty(e,"detectDeviceAsync",{enumerable:!0,get:function(){return i.detectDeviceAsync}});var n=Mi;Object.defineProperty(e,"parseScalabilityMode",{enumerable:!0,get:function(){return n.parse}}),e.ortc=_e;var a=Hl;Object.defineProperty(e,"FakeHandler",{enumerable:!0,get:function(){return a.FakeHandler}}),e.testFakeParameters=ri})(aS);const rC=({peers:e,hostId:t,myId:i})=>{console.log("비디오그리드로 넘어옴");const[n,a]=Ae.useState(null);Ae.useEffect(()=>{if(!n)if(t&&e[t])a(t);else{const o=Object.keys(e).find(l=>{var u;return((u=e[l])==null?void 0:u.getVideoTracks().length)>0});o&&a(o)}},[e,t]),Ae.useEffect(()=>{console.log("mainStreamId changed to:",n),console.log(e),console.log(e[n])},[n]);const s=o=>{a(o)},r=e?e[n]:null,c=e?Object.entries(e).filter(([o,l])=>o!==n&&l!=null&&l.getVideoTracks().length>0):[];return fs("div",{children:[fs("div",{style:{marginBottom:16},children:[It("h3",{style:{color:"green"},children:"Main Screen ()"}),r?It(Qg,{id:n,stream:r,muted:n===i}):It("div",{style:{width:640,height:480,backgroundColor:"#111",display:"flex",justifyContent:"center",alignItems:"center",color:"#fff"},children:"방송이 중단되었습니다."})]}),It("h1",{children:"서브화면"}),It("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:c.map(([o,l])=>((l==null?void 0:l.getVideoTracks())||[]).length===0?null:fs("div",{onClick:()=>s(o),style:{cursor:"pointer"},children:[It(Qg,{id:o,stream:l,muted:o===i}),It("p",{style:{color:"red",textAlign:"center"},children:JSON.stringify(o)})]},o))})]})},Qg=({id:e,stream:t,muted:i})=>{const n=Ae.useRef();return console.log("Stream for",e,":",t),Ae.useEffect(()=>{const a=n.current;a&&(t?(a.srcObject=t,a.play().catch(s=>console.warn("video play error:",s))):a.srcObject=null)},[t]),It("video",{ref:n,autoPlay:!0,playsInline:!0,muted:i,width:640,height:480,style:{backgroundColor:"black",border:"2px solid white"}})};function cC(){var O,T;const[e,t]=Ae.useState({}),[i,n]=Ae.useState(!1),[a,s]=Ae.useState(null),[r,c]=Ae.useState(null),o=Ae.useRef(null),l=Ae.useRef(null),u=Ae.useRef(null),d=Ae.useRef({}),f=Ae.useRef(null),p=Ae.useRef(new Set),y=Ae.useRef(null),b=Ae.useRef(null),w=Ae.useRef(null),m=new URLSearchParams(window.location.search),v=m.get("userId"),h=m.get("roomId"),[g,S]=Ae.useState({});Ae.useRef({}),Ae.useEffect(()=>{w.current=To("https://bidcastserver.kro.kr",{transports:["websocket"]}),w.current.on("connect",()=>{c(w.current.id)}),w.current.emit("register-login-id",{loginId:v,auctionId:h}),w.current.emit("join-auction",{auctionId:h},({hostSocketId:M})=>{console.log("경매사이트 입장"),s(M),console.log("호스트소켓아이디"+M)});async function U(){try{w.current.emit("create-router",null,async({rtpCapabilities:M})=>{o.current=new aS.Device,await o.current.load({routerRtpCapabilities:M}),f.current=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),w.current.emit("create-transport",{direction:"send"},q=>{l.current=o.current.createSendTransport(q),l.current.on("connect",({dtlsParameters:ee},X,D)=>{w.current.emit("connect-transport",{dtlsParameters:ee,transportId:l.current.id},k=>{k?D():X()})}),l.current.on("produce",({kind:ee,rtpParameters:X},D,k)=>{w.current.emit("produce",{kind:ee,rtpParameters:X,transportId:l.current.id,roomId:h},({id:j})=>{p.current.add(j),S(re=>{const Ce=re[w.current.id]||{};return{...re,[w.current.id]:{...Ce,[ee]:j}}}),D({id:j})})})}),w.current.emit("create-transport",{direction:"recv"},q=>{u.current=o.current.createRecvTransport(q),u.current.on("connect",({dtlsParameters:ee},X,D)=>{w.current.emit("connect-transport",{dtlsParameters:ee,transportId:u.current.id},k=>{k?D():X()})}),w.current.emit("get-existing-producers",{roomId:h},ee=>{ee.filter(({producerId:X})=>!p.current.has(X)).forEach(({socketId:X,producerId:D,kind:k})=>{S(j=>{const re=j[X]||{};return{...j,[X]:{...re,[k]:D}}}),L(D,X)})})})}),w.current.on("new-producer",({producerId:M,socketId:q,kind:ee})=>{console.log("new-producer received:",M,q),q!==w.current.id&&(S(X=>{const D=X[q]||{};return{...X,[q]:{...D,[ee]:M}}}),console.log("New producer from other:",M),L(M),console.log(a),console.log(g))}),w.current.on("user-disconnected",({socketId:M,producerId:q})=>{console.log("User disconnected:",M,q),d.current[q]&&(d.current[q].close(),delete d.current[q]),t(ee=>{const X={...ee};return delete X[q],X}),S(ee=>{const X={...ee};return X[M]&&(Object.entries(X[M]).forEach(([D,k])=>{k===q&&delete X[M][D]}),Object.keys(X[M]).length===0&&delete X[M]),X})})}catch(M){console.error("Start error:",M)}}async function L(M){if(console.log("consume 호출 여부 체크 전:",M,d.current[M]),M===g[w.current.id]){console.log("👤 자기 자신의 producerId, consume 생략:",M);return}if(!o.current||!u.current||d.current[M]){console.log("consume 중복 또는 조건 미충족, return:",M);return}w.current.emit("consume",{producerId:M,rtpCapabilities:o.current.rtpCapabilities,transportId:u.current.id,roomId:h},async({id:q,kind:ee,rtpParameters:X})=>{try{const D=await u.current.consume({id:q,producerId:M,kind:ee,rtpParameters:X});console.log("consume 후 consumer 할당:",M,D),d.current[M]=D,console.log("consume 후 consumers.current 상태:",d.current);const k=new MediaStream;k.addTrack(D.track),t(j=>({...j,[M]:k})),await D.resume(),w.current.emit("consumer-resume",{consumerId:D.id})}catch(D){console.error("Consume error:",D)}})}return U(),()=>{w.current&&w.current.disconnect()}},[]);const R=async()=>{var U,L,M;if(l.current)if(i){const q=(M=y.current)==null?void 0:M.id;y.current&&(y.current.close(),p.current.delete(y.current.id),y.current=null),b.current&&(b.current.close(),p.current.delete(b.current.id),b.current=null),f.current&&(f.current.getTracks().forEach(ee=>ee.stop()),f.current=null),S(ee=>{const X={...ee};return X[w.current.id]&&(delete X[w.current.id].video,delete X[w.current.id].audio,Object.keys(X[w.current.id]).length===0&&delete X[w.current.id]),X}),q&&t(ee=>{const X={...ee};return delete X[q],X}),n(!1),w.current.emit("close-producer")}else try{console.log(f.current),f.current||(f.current=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}));const q=f.current.getVideoTracks()[0],ee=f.current.getAudioTracks()[0];q&&(y.current=await l.current.produce({track:q}),p.current.add(y.current.id),S(k=>{const j=k[w.current.id]||{};return{...k,[w.current.id]:{...j,video:y.current.id}}})),ee&&(console.log(11111),b.current=await l.current.produce({track:ee}),console.log(22222),p.current.add(b.current.id),S(k=>{const j=k[w.current.id]||{};return{...k,[w.current.id]:{...j,audio:b.current.id}}})),console.log("내 프로듀서 아이디"+y.current.id),console.log("호스트 아이디"+a),console.log("호스트 프로듀서 아이디"+g[a]),console.log("내 아이디"+v),console.log("내 프로듀서 아이디"+g[r]),t(k=>({...k,[y.current.id]:f.current})),n(!0);const X=a&&((U=g[a])!=null&&U.video)?g[a].video:null,D=r&&((L=g[r])!=null&&L.video)?g[r].video:null}catch(q){console.error("Error starting stream:",q)}},x=r===a;return fs("div",{children:[It("h1",{children:"🎥 Bidcast Streaming"}),fs("p",{children:["Room ID: ",h," | User ID: ",v]}),fs("p",{children:["내 소켓 ID: ",r," | 호스트 ID: ",a]}),It("button",{onClick:R,className:"streaming-btn",children:i?x?"📴 호스트 방송 중단":"📴 손님 송출 중단":x?"📡 호스트 방송 시작":"📡 손님 화면 송출"}),It(rC,{peers:e,hostId:(O=g[a])==null?void 0:O.video,myId:(T=g[r])==null?void 0:T.video})]})}const oC=V0.createRoot(document.getElementById("root"));oC.render(It(cC,{}));
